import{_ as M,o as C,w as k,b as v,c as _,d as g,t as x,f as B,r as u}from"./index-tY8q6Zf3.js";const H={class:"heatmap-wrapper"},S=["width","height"],V={key:0,class:"color-scale"},E={class:"scale-label"},I={class:"scale-label"},N={__name:"HeatmapCanvas",props:{grid:{type:Array,default:()=>[]},size:{type:Number,default:420},colorScale:{type:Boolean,default:!0}},setup(d){const a=d,h=u(null),f=u(null),m=u(null),y=c=>{const e=[{r:30,g:64,b:175},{r:37,g:99,b:235},{r:59,g:130,b:246},{r:6,g:182,b:212},{r:16,g:185,b:129},{r:245,g:158,b:11}],o=c*(e.length-1),s=Math.floor(o),r=o-s,t=e[Math.min(s,e.length-1)],l=e[Math.min(s+1,e.length-1)];return`rgb(${Math.round(t.r+(l.r-t.r)*r)}, ${Math.round(t.g+(l.g-t.g)*r)}, ${Math.round(t.b+(l.b-t.b)*r)})`},p=()=>{var b;if(!h.value||a.grid.length===0)return;const c=h.value.getContext("2d"),e=a.grid.length,o=((b=a.grid[0])==null?void 0:b.length)||0,s=a.size/o,r=a.size/e;let t=1/0,l=-1/0;a.grid.forEach(i=>{i.forEach(n=>{n<t&&(t=n),n>l&&(l=n)})});const w=l-t||1;f.value=t,m.value=l,c.clearRect(0,0,a.size,a.size);for(let i=0;i<e;i++)for(let n=0;n<o;n++){const z=(a.grid[i][n]-t)/w;c.fillStyle=y(z),c.fillRect(n*s,i*r,s+.5,r+.5)}};return C(p),k(()=>a.grid,p,{deep:!0}),(c,e)=>{var o,s;return v(),_("div",H,[g("canvas",{ref_key:"canvas",ref:h,width:d.size,height:d.size,class:"heatmap-canvas"},null,8,S),d.colorScale?(v(),_("div",V,[g("span",E,x((o=f.value)==null?void 0:o.toFixed(2)),1),e[0]||(e[0]=g("div",{class:"scale-bar"},null,-1)),g("span",I,x((s=m.value)==null?void 0:s.toFixed(2)),1)])):B("",!0)])}}},R=M(N,[["__scopeId","data-v-1f7a3a07"]]);export{R as H};
