import{a as d}from"./network-T6nY3V_4.js";const g="http://localhost:8001",r=d.create({baseURL:g});class u{constructor(e=50){this.cache=new Map,this.pending=new Map,this.maxSize=e}normalizeParams(e){return Array.isArray(e)?e.map(a=>this.normalizeParams(a)):e&&typeof e=="object"?Object.keys(e).sort().reduce((a,t)=>(a[t]=this.normalizeParams(e[t]),a),{}):e}generateKey(e,a){const t=this.normalizeParams(a||{});return`${e}?${JSON.stringify(t)}`}get(e,a){const t=this.generateKey(e,a),n=this.cache.get(t);return n?(n.lastAccess=Date.now(),n.data):null}set(e,a,t){const n=this.generateKey(e,a);if(this.cache.size>=this.maxSize){let o=null,i=1/0;for(const[p,c]of this.cache.entries())c.lastAccess<i&&(i=c.lastAccess,o=p);o&&this.cache.delete(o)}this.cache.set(n,{data:t,lastAccess:Date.now()})}clear(){this.cache.clear(),this.pending.clear()}cachedGet(e,a={},t={}){const n=a.params||{},o=!!(t!=null&&t.bypassCache),i=this.generateKey(e,n);if(!o){const c=this.get(e,n);if(c)return Promise.resolve({data:c});const l=this.pending.get(i);if(l)return l}const p=r.get(e,a).then(c=>(o||this.set(e,n,c.data),c)).finally(()=>{this.pending.delete(i)});return o||this.pending.set(i,p),p}}const m=new u(100),f=()=>r.get("/boreholes/scan"),y=(s,e=20)=>r.get("/boreholes/preview",{params:{file:s,limit:e}}),x=s=>{const e=new FormData;return s.forEach(a=>e.append("files",a)),r.post("/boreholes/upload",e)},_=(s,e,a,t,n)=>r.get("/pressure/index/grid",{params:{method:s,grid_size:e,elastic_modulus:a,density:t,tensile_strength:n}}),b=(s,e,a,t,n)=>r.get("/pressure/steps",{params:{model:s,h:e,q:a,t,s:n}}),w=(s,e)=>r.get("/export/index",{params:{method:s,grid_size:e},responseType:"blob"}),k=s=>r.get("/pressure/index/workfaces",{params:s}),S=s=>r.get("/export/pressure-index-workfaces",{params:s,responseType:"blob"}),z=(s,e)=>r.get("/summary/index",{params:{method:s,grid_size:e}}),v=s=>r.get("/summary/index-workfaces",{params:s}),P=(s,e,a)=>r.get("/summary/steps",{params:{model:s,target:e,grid_size:a}}),I=s=>r.get("/summary/steps-workfaces",{params:s}),A=s=>r.get("/pressure/steps/boreholes",{params:{model:s}}),q=s=>r.get("/export/pressure-steps",{params:{model:s},responseType:"blob"}),B=(s,e,a,t,n,o)=>r.get("/pressure/steps/grid",{params:{model:s,target:e,h_mode:a,q_mode:t,grid_size:n,default_q:o}}),G=(s,e,a,t,n,o)=>r.get("/export/pressure-steps-grid",{params:{model:s,target:e,h_mode:a,q_mode:t,grid_size:n,default_q:o},responseType:"blob"}),C=()=>m.cachedGet("/seams/list"),W=s=>r.get("/seams/stats",{params:{seam_name:s}}),K=(s,e=null)=>r.get("/seams/overburden",{params:{seam_name:s,borehole:e}}),O=(s,e="kriging",a=80,t=12,n=150,o=1,i={})=>{const p={params:{seam_name:s,method:e,grid_size:a,num_levels:t,dpi:n,smooth_sigma:o}};return i!=null&&i.forceRefresh?r.get("/seams/contour-images",p):m.cachedGet("/seams/contour-images",p)},R=(s,e=null,a=null)=>r.post("/api/mpi/batch",{points:s,weights:e,config:a}),T=(s,e=50,a="idw",t=null,n=null)=>r.post("/api/mpi/interpolate",{points:s,resolution:e,method:a,weights:t,bounds:n}),j=()=>r.get("/api/mpi/weights"),D=s=>{const e=new FormData;return e.append("file",s),r.post("/api/mpi/workfaces/parse",e)},M=s=>r.post("/api/mpi/heatmap-image",s),E=(s,e=!0,a=!0)=>m.cachedGet("/api/rock-params/query",{params:{lithology:s,use_synonyms:e,include_default:a}}),F=s=>r.post("/api/algorithm-validation/evaluate",s),J=(s="16-3ç…¤",e=50,a="idw",t=null)=>{const n={seam_name:s,resolution:e,method:a};return t&&typeof t=="object"&&(n.weights=JSON.stringify(t)),m.cachedGet("/api/algorithm-validation/spatial-overview",{params:n})};export{I as A,R as B,W as a,K as b,O as c,j as d,_ as e,w as f,C as g,k as h,S as i,D as j,M as k,E as l,T as m,F as n,G as o,y as p,q,b as r,f as s,B as t,x as u,J as v,A as w,z as x,v as y,P as z};
