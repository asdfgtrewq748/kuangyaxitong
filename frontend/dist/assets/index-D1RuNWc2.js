const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataImport-zaD2bNxe.js","assets/vendor-CA5Q5CdR.js","assets/api-BcwPnB85.js","assets/network-T6nY3V_4.js","assets/vue-router-D9BXaJFq.js","assets/DataImport-GGJEsJzz.css","assets/Interpolation-DK7WzPtk.js","assets/Interpolation-4dbEssh6.css","assets/PressureIndex-h4hkif7O.js","assets/HeatmapCanvas-DZhbS9WW.js","assets/HeatmapCanvas-G0XigWI_.css","assets/PressureIndex-DskCl0uJ.css","assets/MpiHeatmap-DPOVwREy.js","assets/MpiHeatmap-CoYI5vQ_.css","assets/MpiHeatmapPro-Cffs22HS.js","assets/MpiHeatmapPro-CV7YZDS6.css","assets/MpiAlgorithm-C9V3K2xN.js","assets/MpiAlgorithm-Ck0jR6kT.css","assets/AcademicAlgorithm-CrfHmuV_.js","assets/echarts-CG3_94Cz.js","assets/echarts-Dy-VGqd_.js","assets/AcademicAlgorithm-BSForOJu.css","assets/AlgorithmValidation-DgAmLF7l.js","assets/AlgorithmValidation--PjDzECZ.css","assets/Steps-CDVMurvq.js","assets/Steps-BS8S8uzJ.css","assets/Report-DmPIJPPA.js","assets/Report-BQ7S_AM8.css"])))=>i.map(i=>d[i]);
var se=Object.defineProperty;var H=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var K=(t,e,n)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||(e={}))re.call(e,n)&&K(t,n,e[n]);if(H)for(var n of H(e))ae.call(e,n)&&K(t,n,e[n]);return t};import{b4 as z,b5 as w,b6 as $,b7 as p,b8 as k,b9 as C,ba as Q,bb as S,bc as V,bd as ie,b as x,w as le,r as ce,c as A,be as ue,bf as de,bg as W,bh as pe,u as P,bi as D,bj as J,i as me,bk as fe}from"./vendor-CA5Q5CdR.js";import{u as _e,a as ve,c as ge,b as he}from"./vue-router-D9BXaJFq.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))v(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&v(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function v(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const we={class:"toast-container"},ye=["aria-live"],be={class:"toast-icon"},Se={class:"toast-content"},Oe={__name:"Toast",setup(t,{expose:e}){const n=x([]);let v=0;const r=new Map,i=new Map,a=l=>{const u={success:"✓",error:"✕",warning:"⚠",info:"ℹ"};return u[l]||u.info},f=(l,u="info",d=3e3)=>{const h=++v,y={id:h,message:l,type:u,isExiting:!1};n.value=[...n.value,y].slice(-5);const R=setTimeout(()=>{m(h)},d);r.set(h,R)},m=l=>{const u=r.get(l);u&&(clearTimeout(u),r.delete(l));const d=n.value.find(h=>h.id===l);if(d){d.isExiting=!0;const h=setTimeout(()=>{n.value=n.value.filter(y=>y.id!==l),i.delete(l)},200);i.set(l,h)}};return z(()=>{for(const l of r.values())clearTimeout(l);for(const l of i.values())clearTimeout(l);r.clear(),i.clear()}),e({add:f}),(l,u)=>(w(),$(ie,{to:"body"},[p("div",we,[(w(!0),k(V,null,C(n.value,d=>(w(),k("div",{key:d.id,class:Q(["toast",d.type,d.isExiting&&"toast-exit"]),role:"alert","aria-live":d.type==="error"?"assertive":"polite"},[p("span",be,S(a(d.type)),1),p("span",Se,S(d.message),1)],10,ye))),128))])]))}},X="kuangya_workspace_flow_v1",ke=120,B=["DataImport","Interpolation","AcademicAlgorithm","AlgorithmValidation","Report"],Z=()=>({selectedSeam:"",updatedAt:"",steps:{DataImport:!1,Interpolation:!1,AcademicAlgorithm:!1,MpiAlgorithm:!1,PressureIndex:!1,AlgorithmValidation:!1,Report:!1},metrics:{boreholes:0,interpolationPoints:0,pressureReady:!1,validationReady:!1,reportGeneratedAt:""}}),_=ce(Z());let T=null;const M=(t={})=>{const e=Z();_.selectedSeam=typeof t.selectedSeam=="string"?t.selectedSeam:e.selectedSeam,_.updatedAt=typeof t.updatedAt=="string"?t.updatedAt:e.updatedAt,_.steps=E(E({},e.steps),t.steps||{}),_.metrics=E(E({},e.metrics),t.metrics||{})},Ee=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{const t=localStorage.getItem(X);if(!t)return;M(JSON.parse(t))}catch(t){M()}},Ae=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{localStorage.setItem(X,JSON.stringify(_))}catch(t){}},Re=()=>{T&&clearTimeout(T),T=setTimeout(()=>{T=null,Ae()},ke)},Pe=(t,e=null)=>{Object.prototype.hasOwnProperty.call(_.steps,t)&&(_.steps[t]=!0,e&&typeof e=="object"&&(_.metrics=E(E({},_.metrics),e)),_.updatedAt=new Date().toISOString())},Ie=t=>{_.selectedSeam=typeof t=="string"?t:"",_.updatedAt=new Date().toISOString()},Te=()=>{M(),_.updatedAt=new Date().toISOString()};Ee();le(_,()=>{Re()},{deep:!0,flush:"post"});const xe=A(()=>{const t=B.filter(e=>_.steps[e]).length;return Number((t/B.length).toFixed(2))}),Le=()=>({flowOrder:B,workspaceState:_,completionRate:xe,markStepDone:Pe,setSelectedSeam:Ie,resetFlow:Te}),De=(t,e)=>{const n=t.__vccOpts||t;for(const[v,r]of e)n[v]=r;return n},Ce={class:"app-layout"},Ve={class:"sidebar"},Be={class:"sidebar-nav"},Me={class:"nav-badge"},$e={class:"nav-text"},Fe={class:"main-content"},Ne={class:"content-wrapper"},je={class:"workflow-strip"},qe={class:"workflow-head"},Ue={class:"workflow-track"},Ge=["onClick"],He={class:"step-index"},Ke={class:"step-title"},We={class:"workflow-actions"},Je={key:0,class:"workflow-seam"},Ye={key:0,class:"workflow-guard"},ze={class:"workflow-guard-text"},Qe={__name:"AppLayout",setup(t){var j,q,U,G;const e=_e(),n=ve(),v=x(null),{flowOrder:r,workspaceState:i,completionRate:a,resetFlow:f}=Le(),m=(G=(U=(q=(j=ue())==null?void 0:j.appContext)==null?void 0:q.config)==null?void 0:U.globalProperties)==null?void 0:G.$toast,l=A(()=>n.getRoutes().filter(s=>{var o,c;return((o=s.meta)==null?void 0:o.title)&&((c=s.meta)==null?void 0:c.nav)!==!1}).sort((s,o)=>{var c,b;return Number(((c=s.meta)==null?void 0:c.navOrder)||999)-Number(((b=o.meta)==null?void 0:b.navOrder)||999)})),u=A(()=>{const s=new Map(n.getRoutes().map(o=>[o.name,o]));return r.map(o=>s.get(o)).filter(Boolean)}),d=A(()=>String(e.name||"")),h=A(()=>i.selectedSeam?{seam:i.selectedSeam}:void 0),y=s=>{var o;return!!((o=i.steps)!=null&&o[s])},R=A(()=>{if(u.value.length===0)return null;const s=u.value.findIndex(o=>o.name===d.value);if(s>=0){const o=u.value[s];if(!y(o.name))return o;for(let c=s+1;c<u.value.length;c+=1)if(!y(u.value[c].name))return u.value[c]}return u.value.find(o=>!y(o.name))||u.value[u.value.length-1]}),F=s=>{const o=u.value.findIndex(c=>c.name===s);return o<=0?null:u.value.find((c,b)=>b<o&&!y(c.name))||null},I=A(()=>{const s=d.value;if(!s)return null;const o=F(s);if(!o)return null;const c=u.value.find(b=>b.name===s);return c?{blockedBy:o,current:c}:null}),N=s=>{var c,b;if(!(s!=null&&s.name))return;const o=F(s.name);o&&((c=v.value)!=null&&c.add)&&v.value.add(`Flow hint: finish ${((b=o.meta)==null?void 0:b.title)||o.name} first`,"warning",2600),n.push({name:s.name,query:h.value})},te=()=>{var s;(s=R.value)!=null&&s.name&&n.push({name:R.value.name,query:h.value})},oe=s=>{var c;return String(((c=s==null?void 0:s.meta)==null?void 0:c.title)||"").slice(0,1)||"•"};return de(()=>{m&&typeof m=="object"&&(m.value=v.value)}),z(()=>{m&&typeof m=="object"&&(m.value=null)}),(s,o)=>{const c=W("router-link"),b=W("router-view");return w(),k("div",Ce,[p("aside",Ve,[o[2]||(o[2]=p("div",{class:"sidebar-logo"},"MPI",-1)),p("nav",Be,[(w(!0),k(V,null,C(l.value,g=>(w(),$(c,{key:g.path,to:g.path,class:"nav-item","active-class":"active"},{default:pe(()=>[p("span",Me,S(oe(g)),1),p("span",$e,S(g.meta.title),1)]),_:2},1032,["to"]))),128))])]),p("main",Fe,[p("div",Ne,[p("section",je,[p("div",qe,[o[3]||(o[3]=p("strong",null,"Product Flow",-1)),p("span",null,S(Math.round(P(a)*100))+"%",1)]),p("div",Ue,[(w(!0),k(V,null,C(u.value,(g,ne)=>(w(),k("button",{key:g.path,type:"button",class:Q(["workflow-step",{active:g.name===d.value,done:y(g.name)}]),onClick:at=>N(g)},[p("span",He,S(ne+1),1),p("span",Ke,S(g.meta.title),1)],10,Ge))),128))]),p("div",We,[P(i).selectedSeam?(w(),k("span",Je,"Seam "+S(P(i).selectedSeam),1)):D("",!0),R.value?(w(),k("button",{key:1,type:"button",class:"workflow-btn",onClick:te}," Next: "+S(R.value.meta.title),1)):D("",!0),p("button",{type:"button",class:"workflow-btn ghost",onClick:o[0]||(o[0]=(...g)=>P(f)&&P(f)(...g))},"Reset")]),I.value?(w(),k("div",Ye,[p("div",ze,[o[4]||(o[4]=p("strong",null,"Flow guard",-1)),p("span",null," Previous step "+S(I.value.blockedBy.meta.title)+" is not done. You can stay here, but completing it first is recommended. ",1)]),p("button",{type:"button",class:"workflow-btn guard",onClick:o[1]||(o[1]=g=>N(I.value.blockedBy))}," Go to "+S(I.value.blockedBy.meta.title),1)])):D("",!0)]),J(b)])]),J(Oe,{ref_key:"toast",ref:v},null,512)])}}},Xe=De(Qe,[["__scopeId","data-v-039e0be1"]]),Ze={__name:"App",setup(t){return(e,n)=>(w(),$(Xe))}},et="modulepreload",tt=function(t){return"/"+t},Y={},O=function(e,n,v){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),f=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(m=>{if(m=tt(m),m in Y)return;Y[m]=!0;const l=m.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":et,l||(d.as="script"),d.crossOrigin="",d.href=m,f&&d.setAttribute("nonce",f),document.head.appendChild(d),l)return new Promise((h,y)=>{d.addEventListener("load",h),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(a){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=a,window.dispatchEvent(f),!f.defaultPrevented)throw a}return r.then(a=>{for(const f of a||[])f.status==="rejected"&&i(f.reason);return e().catch(i)})},ot=[{path:"/",redirect:"/algorithm-validation"},{path:"/data",name:"DataImport",component:()=>O(()=>import("./DataImport-zaD2bNxe.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{title:"数据导入",icon:"upload",navOrder:10,flowOrder:10}},{path:"/interpolation",name:"Interpolation",component:()=>O(()=>import("./Interpolation-DK7WzPtk.js"),__vite__mapDeps([6,1,4,2,3,7])),meta:{title:"插值分析",icon:"chart",navOrder:20,flowOrder:20}},{path:"/pressure",name:"PressureIndex",component:()=>O(()=>import("./PressureIndex-h4hkif7O.js"),__vite__mapDeps([8,1,4,9,10,2,3,11])),meta:{title:"矿压指标",icon:"bar",nav:!1,legacy:!0}},{path:"/mpi-heatmap",name:"MpiHeatmap",component:()=>O(()=>import("./MpiHeatmap-DPOVwREy.js"),__vite__mapDeps([12,1,2,3,4,13])),meta:{title:"MPI 热力图（旧版）",icon:"legacy",nav:!1,legacy:!0}},{path:"/mpi-heatmap-pro",name:"MpiHeatmapPro",component:()=>O(()=>import("./MpiHeatmapPro-Cffs22HS.js"),__vite__mapDeps([14,1,2,3,4,15])),meta:{title:"MPI 数值模拟",icon:"bolt",navOrder:40}},{path:"/mpi-algorithm",name:"MpiAlgorithm",component:()=>O(()=>import("./MpiAlgorithm-C9V3K2xN.js"),__vite__mapDeps([16,1,4,17])),meta:{title:"MPI 算法原理",icon:"box",nav:!1,legacy:!0}},{path:"/academic-algorithm",name:"AcademicAlgorithm",component:()=>O(()=>import("./AcademicAlgorithm-CrfHmuV_.js"),__vite__mapDeps([18,1,3,19,20,4,21])),meta:{title:"新算法原理",icon:"book",navOrder:30,flowOrder:30}},{path:"/algorithm-validation",name:"AlgorithmValidation",component:()=>O(()=>import("./AlgorithmValidation-DgAmLF7l.js"),__vite__mapDeps([22,1,4,2,3,19,20,23])),meta:{title:"新算法实证",icon:"flask",navOrder:50,flowOrder:40}},{path:"/steps",name:"Steps",component:()=>O(()=>import("./Steps-CDVMurvq.js"),__vite__mapDeps([24,1,9,10,2,3,4,25])),meta:{title:"来压步距",icon:"grid",navOrder:60}},{path:"/report",name:"Report",component:()=>O(()=>import("./Report-DmPIJPPA.js"),__vite__mapDeps([26,1,4,2,3,27])),meta:{title:"结果报告",icon:"report",navOrder:70,flowOrder:50}}],nt=ge({history:he(),routes:ot}),ee=Symbol("toast");function st(t){const e=x(null);return t.provide(ee,e),e}function ut(){const t=me(ee,x(null)),e=(a,f="info",m=3e3)=>{var l;(l=t.value)==null||l.add(a,f,m)};return{add:e,success:a=>e(a,"success"),error:a=>e(a,"error"),warning:a=>e(a,"warning"),info:a=>e(a,"info")}}const L=fe(Ze);L.use(nt);const rt=st(L);L.config.globalProperties.$toast=rt;L.mount("#app");export{De as _,ut as a,O as b,Le as u};
