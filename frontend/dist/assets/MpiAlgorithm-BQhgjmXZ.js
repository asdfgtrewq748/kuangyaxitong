const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/katex-CBmFCdgC.css"])))=>i.map(i=>d[i]);
var z=(Q,I,d)=>new Promise((o,l)=>{var G=r=>{try{P(d.next(r))}catch(w){l(w)}},K=r=>{try{P(d.throw(r))}catch(w){l(w)}},P=r=>r.done?o(r.value):Promise.resolve(r.value).then(G,K);P((d=d.apply(Q,I)).next())});import{_ as wt,a as st}from"./index-BQuJNExo.js";import{e as yt,b as p,a as t,g as j,C as $,I as q,E as Mt,A as It,t as n,n as S,y as Z,z as R,F as L,r as F,D as et,M as at,d as m,k as _,o as h}from"./vue-vendor-uHJg9g_5.js";import{J as St}from"./jszip.min-eC0OUXGO.js";const Rt={class:"page mpi-algorithm-page"},Pt={class:"page-header"},Tt={class:"header-actions"},$t={class:"export-controls"},Lt={class:"export-toggle"},Ft=["disabled"],Ht={key:0,class:"export-status"},Bt={key:1,class:"export-done"},At={key:2,class:"export-error"},Ct={key:3,class:"export-progress"},Et={class:"card flow-card"},Vt={class:"section-header flow-header"},Dt={class:"mode-tabs"},Ot={class:"flow-figure"},Ut=["src"],Nt={class:"flow-steps"},zt=["onMouseenter"],jt={class:"step-index"},Zt={class:"step-content"},Gt={class:"card indicators-card"},Kt={class:"indicator-grid"},Jt={class:"indicator-card"},Xt={class:"figure-block"},Wt=["src"],qt={class:"formula"},Qt=["innerHTML"],Yt=["innerHTML"],ts=["innerHTML"],ss=["innerHTML"],es={class:"indicator-card"},as={class:"figure-block"},is=["src"],ls={class:"interactive-control"},ns={class:"control-header"},os={class:"bri-sim-result"},rs={class:"bri-value-bar"},ds={class:"bri-bar-track"},cs={class:"bri-value"},us={class:"formula"},vs=["innerHTML"],ps=["innerHTML"],ms=["innerHTML"],hs=["innerHTML"],fs={class:"indicator-card"},_s={class:"figure-block"},bs=["src"],gs={class:"formula"},ks=["innerHTML"],xs=["innerHTML"],ws=["innerHTML"],ys={class:"asi-animation-container"},Ms={class:"stress-bars"},Is={class:"card weight-card"},Ss={class:"weight-grid"},Rs={class:"weight-controls"},Ps={class:"weight-label"},Ts={class:"weight-value"},$s=["onUpdate:modelValue"],Ls={class:"weight-hint"},Fs={class:"weight-preview"},Hs={class:"stack-bar"},Bs={class:"formula formula-inline"},As=["innerHTML"],Cs={class:"card example-card"},Es={class:"example-grid"},Vs={class:"example-table"},Ds={class:"sample-selector"},Os=["onClick"],Us={class:"example-result"},Ns={class:"result-value"},zs={class:"result-breakdown"},js={class:"card output-card"},Zs={class:"output-steps"},Gs={__name:"MpiAlgorithm",setup(Q){let I=null;const d=a=>{if(!I)return a;try{return I.renderToString(a,{throwOnError:!1,displayMode:!0,output:"html",strict:!1})}catch(s){return console.error("KaTeX render error:",s),a}},o={rsi:{main:"\\text{RSI} = \\min(\\text{RSI}_{\\text{norm}} + \\text{RSI}_{\\text{key}} + \\text{RSI}_{\\text{struct}}, 0, 100)",norm:"\\text{RSI}_{\\text{norm}} = \\min\\left(\\frac{\\bar{\\sigma_t}}{10}, 1\\right) \\times 40",key:"\\text{RSI}_{\\text{key}} = \\min(n_{\\text{key}} \\times 15, 30)",struct:"\\text{RSI}_{\\text{struct}} = (1 - r_{\\text{soft}}) \\times 40"},bri:{main:"\\text{BRI} = \\max(100 - P_{\\text{depth}} - P_{\\text{hard}} - P_{\\text{thick}}, 0)",depth:"P_{\\text{depth}} = \\min\\left(\\frac{H - H_{\\text{crit}}}{200}, 1\\right) \\times 40",hard:"P_{\\text{hard}} = \\min\\left(\\frac{E_{\\text{hard}}}{500}, 1\\right) \\times 30",thick:"P_{\\text{thick}} = \\min\\left(\\frac{h_{\\text{coal}}}{10}, 1\\right) \\times 30"},asi:{main:"\\text{ASI} = S_{\\text{stiff}} + S_{\\text{fric}}",stiff:"S_{\\text{stiff}} = \\min\\left(\\frac{\\bar{E}}{35} \\times 50, 50\\right)",fric:"S_{\\text{fric}} = \\max\\left(\\frac{\\bar{\\varphi} - 20}{25} \\times 50, 0\\right)"},mpi:"\\text{MPI} = w_r \\cdot \\text{RSI} + w_b \\cdot \\text{BRI} + w_a \\cdot \\text{ASI}"},l=at({rsi:{main:"",norm:"",key:"",struct:""},bri:{main:"",depth:"",hard:"",thick:""},asi:{main:"",stiff:"",fric:""}});yt(()=>z(this,null,function*(){try{const a=yield st(()=>import("./katex-BpsngXkd.js"),[]);I=a.default||a,yield st(()=>Promise.resolve({}),__vite__mapDeps([0])),l.rsi.main=d(o.rsi.main),l.rsi.norm=d(o.rsi.norm),l.rsi.key=d(o.rsi.key),l.rsi.struct=d(o.rsi.struct),l.bri.main=d(o.bri.main),l.bri.depth=d(o.bri.depth),l.bri.hard=d(o.bri.hard),l.bri.thick=d(o.bri.thick),l.asi.main=d(o.asi.main),l.asi.stiff=d(o.asi.stiff),l.asi.fric=d(o.asi.fric)}catch(a){console.error("Failed to load KaTeX:",a),Object.keys(o).forEach(s=>{typeof o[s]=="string"||typeof o[s]=="object"&&Object.keys(o[s]).forEach(e=>{l[s][e]=o[s][e]})})}}));const G=a=>{if(!I)return a;try{return I.renderToString(a,{throwOnError:!1,displayMode:!1,output:"html",strict:!1})}catch(s){return console.error("KaTeX render error:",s),a}},K=[{key:"input",title:"数据输入",subtitle:"岩层参数 / 地质信息",detailTitle:"输入数据来源",detail:"包括钻孔岩性、煤层厚度、抗拉强度、采深等，所有参数可追踪到原始表格。"},{key:"sub",title:"子指标计算",subtitle:"RSI / BRI / ASI",detailTitle:"子指标输出",detail:"分别描述顶板稳定性、冲击风险与支承压力分布，便于解释与诊断。"},{key:"fusion",title:"权重融合",subtitle:"默认 0.4 / 0.35 / 0.25",detailTitle:"权重融合逻辑",detail:"通过权重加权得到综合 MPI，可根据矿区经验进行微调并记录。"},{key:"risk",title:"风险等级",subtitle:"低 / 中 / 高",detailTitle:"风险映射",detail:"将 MPI 数值划分为风险等级，支撑施工决策与预警。"},{key:"output",title:"图像输出",subtitle:"热力图 / 等值线",detailTitle:"可视化输出",detail:"生成高分辨率热力图与等值线，支持报告级导出。"}],P=m(0),r=m(!1),w=m("sub"),D=m("svg"),J=m("current"),X=m(!1),H=m(!1),T=m(0),g=m(""),B=m(""),A=m(!1),y=at({rsi:.4,bri:.35,asi:.25}),O=m(600),C=_(()=>{const a=O.value,s=400,e=a>s?Math.min((a-s)/200,1)*40:0;return Math.min(Math.max(100-e-15-15,0),100)}),it=_(()=>{const a=C.value;return a>=70?"low":a>=50?"medium":"high"}),lt=_(()=>{const a=C.value;return a>=70?"低风险":a>=50?"中风险":"高风险"}),nt=_(()=>{const a=C.value;return a>=70?"linear-gradient(90deg, #22c55e, #16a34a)":a>=50?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #ef4444, #dc2626)"}),ot=_(()=>{const a=[];for(let s=0;s<20;s++){const e=s/19;let i;e<.4?i=30+Math.random()*10:e<.6?i=30+(1-Math.abs(e-.5)/.1)*60+Math.random()*5:i=30+Math.exp(-(e-.6)*3)*30+Math.random()*10,a.push({height:Math.min(Math.max(i,10),95),color:i>70?"linear-gradient(180deg, #ef4444, #dc2626)":i>50?"linear-gradient(180deg, #f59e0b, #d97706)":"linear-gradient(180deg, #22c55e, #16a34a)",delay:s*.05})}return a}),rt=_(()=>50),dt=[{key:"rsi",label:"RSI 权重",default:"0.40"},{key:"bri",label:"BRI 权重",default:"0.35"},{key:"asi",label:"ASI 权重",default:"0.25"}],ct=_(()=>y.rsi+y.bri+y.asi),k=_(()=>{const a=ct.value||1;return{rsi:y.rsi/a,bri:y.bri/a,asi:y.asi/a}}),U=[{id:"a",name:"样例点 A（汇总表浅埋）",point:{burial_depth:86,thickness:6},strata:[{name:"岩层1",thickness:6,tensile_strength:2.3,compressive_strength:20.51,elastic_modulus:3,friction_angle:28},{name:"岩层2",thickness:1.5,tensile_strength:1.2,compressive_strength:14.32,elastic_modulus:9.8,friction_angle:17.5},{name:"岩层3",thickness:8,tensile_strength:4.5,compressive_strength:26.93,elastic_modulus:17,friction_angle:22.3},{name:"岩层4",thickness:12.5,tensile_strength:10.5,compressive_strength:35.36,elastic_modulus:28,friction_angle:20},{name:"岩层5",thickness:7,tensile_strength:3.6,compressive_strength:33.93,elastic_modulus:25,friction_angle:28}]},{id:"b",name:"样例点 B（汇总表深埋）",point:{burial_depth:967.7,thickness:5.9},strata:[{name:"岩层1",thickness:5.9,tensile_strength:2.4,compressive_strength:27,elastic_modulus:.5,friction_angle:42.6},{name:"岩层2",thickness:1.5,tensile_strength:4.7,compressive_strength:38.3,elastic_modulus:10.8,friction_angle:36},{name:"岩层3",thickness:15.7,tensile_strength:3.1,compressive_strength:32.8,elastic_modulus:9.3,friction_angle:38.8},{name:"岩层4",thickness:20,tensile_strength:2.1,compressive_strength:27,elastic_modulus:8.34,friction_angle:37.8},{name:"岩层5",thickness:46,tensile_strength:3.1,compressive_strength:27,elastic_modulus:9.3,friction_angle:38.8}]}],W=m(U[0].id),N=_(()=>U.find(a=>a.id===W.value)||U[0]),Y=a=>a.filter(e=>e.compressive_strength>60&&e.thickness>5&&e.elastic_modulus/35>.8),ut=a=>{const s=a.slice(0,2),e=s.reduce((f,M)=>f+M.thickness,0),i=e>0?s.reduce((f,M)=>f+M.thickness*M.tensile_strength,0)/e:0,c=Y(a),v=Math.min(c.length*15,30),u=a.reduce((f,M)=>f+M.thickness,0),E=(1-(u>0?a.filter(f=>f.compressive_strength<30).reduce((f,M)=>f+M.thickness,0)/u:0))*40,V=Math.min(i/10,1)*40;return Math.min(Math.max(V+v+E,0),100)},vt=(a,s)=>{const e=a.burial_depth||0,i=a.thickness||0,c=400,v=e>c?Math.min((e-c)/200,1)*40:0,u=s.filter(V=>V.compressive_strength>60).reduce((V,f)=>V+f.thickness*f.elastic_modulus,0),b=Math.min(u/500,1)*30,E=Math.min(i/10,1)*30;return Math.min(Math.max(100-v-b-E,0),100)},pt=a=>{const s=a.reduce((u,b)=>u+b.thickness,0);if(s===0)return 50;const e=a.reduce((u,b)=>u+b.elastic_modulus*b.thickness,0)/s,i=Math.min(e/35*50,50),c=a.reduce((u,b)=>u+b.friction_angle*b.thickness,0)/s,v=Math.max(Math.min((c-20)/25*50,50),0);return Math.min(Math.max(i+v,0),100)},x=_(()=>{const{point:a,strata:s}=N.value,e=ut(s),i=vt(a,s),c=pt(s);return{mpi:k.value.rsi*e+k.value.bri*i+k.value.asi*c,breakdown:{rsi:e,bri:i,asi:c}}}),tt=_(()=>{const a=x.value.mpi;return a>=70?{label:"低风险",class:"low"}:a>=50?{label:"中风险",class:"medium"}:{label:"高风险",class:"high"}}),mt=_(()=>[{label:"埋深 (m)",value:N.value.point.burial_depth.toFixed(1)},{label:"煤层厚度 (m)",value:N.value.point.thickness.toFixed(1)},{label:"关键层数量",value:Y(N.value.strata).length},{label:"RSI",value:x.value.breakdown.rsi.toFixed(2)},{label:"BRI",value:x.value.breakdown.bri.toFixed(2)},{label:"ASI",value:x.value.breakdown.asi.toFixed(2)},{label:"权重 (RSI/BRI/ASI)",value:`${k.value.rsi.toFixed(2)} / ${k.value.bri.toFixed(2)} / ${k.value.asi.toFixed(2)}`},{label:"MPI",value:x.value.mpi.toFixed(2)}]),ht=[{title:"1. 网格化",desc:"将采集点转换为规则网格，保障空间分辨率一致。"},{title:"2. 插值",desc:"采用 IDW/Linear/Nearest 等方法填补空缺区域。"},{title:"3. 颜色映射",desc:"按照风险等级与 ODI 色带映射颜色。"},{title:"4. 叠加标注",desc:"叠加等值线、坐标轴与关键点注记。"}],ft=a=>{a.forEach((s,e)=>{setTimeout(()=>{const i=document.createElement("a");i.href=`/mpi-algorithm/${s}`,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i)},e*200)})},_t=a=>{const s=D.value,i=a==="bw"?"_bw":"";return w.value==="sub"?[`flow_overview${i}.${s}`,`rsi_stability${i}.${s}`,`bri_depth_curve${i}.${s}`,`asi_stress_profile${i}.${s}`,`mpi_colorbar${i}.${s}`]:[`flow_overview${i}.${s}`,`rsi_stability${i}.${s}`,`bri_depth_curve${i}.${s}`,`asi_stress_profile${i}.${s}`,`mpi_colorbar${i}.${s}`]},bt=()=>{const s=new Date().toISOString().slice(0,10).replace(/-/g,"");return`kuangyaxitong-mpi-${w.value}-${D.value}-${s}.zip`},gt=a=>z(this,null,function*(){const s=new St,e=s.folder("mpi-figures");let i=0;for(const u of a){const E=yield(yield fetch(`/mpi-algorithm/${u}`)).blob();e.file(u,E),i+=1,T.value=Math.round(i/a.length*80),g.value=`正在打包：${i}/${a.length}`}g.value="正在生成ZIP...";const c=yield s.generateAsync({type:"blob"},u=>{T.value=80+Math.round(u.percent*.2)}),v=document.createElement("a");v.href=URL.createObjectURL(c),v.download=bt(),document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(v.href)}),kt=()=>z(this,null,function*(){H.value=!0,T.value=0,g.value="准备导出...",B.value="",A.value=!1;try{const s=(J.value==="both"?["color","bw"]:[r.value?"bw":"color"]).flatMap(e=>_t(e));X.value?yield gt(s):(g.value=`准备下载 ${s.length} 个文件...`,ft(s),T.value=100),g.value="导出完成",A.value=!0}catch(a){g.value="导出失败",B.value=`错误原因：${(a==null?void 0:a.message)||"未知错误"}`}finally{setTimeout(()=>{H.value=!1,g.value="",B.value="",T.value=0,A.value=!1},1200)}}),xt=()=>{const a=["chrome://downloads/","edge://downloads/all","about:downloads"];let s=!1;for(const e of a)if(window.open(e,"_blank")){s=!0;break}s||(g.value="浏览器限制打开下载页，可用快捷键 Ctrl+J 查看下载记录。")};return(a,s)=>(h(),p("div",Rt,[t("div",Pt,[s[11]||(s[11]=j('<div class="page-header-content" data-v-45fda31c><div class="page-header-icon" data-v-45fda31c><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-45fda31c><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" data-v-45fda31c></path><path d="M8 12h8" data-v-45fda31c></path><path d="M12 8v8" data-v-45fda31c></path></svg></div><div data-v-45fda31c><h1 class="page-title" data-v-45fda31c>MPI 矿压影响指标算法原理</h1><p class="page-subtitle" data-v-45fda31c>从岩层参数到空间分布的可解释指数，3-5 分钟快速理解</p></div></div>',1)),t("div",Tt,[t("div",$t,[$(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>w.value=e),class:"param-select export-select"},[...s[7]||(s[7]=[t("option",{value:"sub"},"导出当前子图",-1),t("option",{value:"all"},"导出全部图（批量）",-1)])],512),[[q,w.value]]),$(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>D.value=e),class:"param-select export-select"},[...s[8]||(s[8]=[t("option",{value:"svg"},"SVG",-1),t("option",{value:"png"},"PNG",-1)])],512),[[q,D.value]]),$(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>J.value=e),class:"param-select export-select"},[...s[9]||(s[9]=[t("option",{value:"current"},"当前配色",-1),t("option",{value:"both"},"彩色+黑白",-1)])],512),[[q,J.value]]),t("label",Lt,[$(t("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=e=>X.value=e)},null,512),[[Mt,X.value]]),s[10]||(s[10]=It(" 打包ZIP ",-1))]),t("button",{class:"btn ghost",disabled:H.value,onClick:kt},n(H.value?"导出中...":"开始导出"),9,Ft),t("button",{class:S(["btn ghost",{highlight:A.value}]),onClick:xt},"打开下载记录",2)]),g.value?(h(),p("div",Ht,n(g.value),1)):Z("",!0),A.value?(h(),p("div",Bt,"导出完成，可查看下载记录。")):Z("",!0),B.value?(h(),p("div",At,n(B.value),1)):Z("",!0),H.value?(h(),p("div",Ct,[t("div",{class:"export-progress-bar",style:R({width:`${T.value}%`})},null,4)])):Z("",!0)])]),s[43]||(s[43]=j('<section class="card overview-card" data-v-45fda31c><div class="overview-text" data-v-45fda31c><h2 data-v-45fda31c>一句话总览</h2><p data-v-45fda31c> MPI 将<strong data-v-45fda31c>岩层参数</strong>转化为 RSI / BRI / ASI 三个子指标， 通过权重融合得到综合指数，并映射为<strong data-v-45fda31c>空间风险等级</strong>热力图。 </p></div><div class="overview-badges" data-v-45fda31c><span class="badge" data-v-45fda31c>可解释</span><span class="badge" data-v-45fda31c>可追踪</span><span class="badge" data-v-45fda31c>可验证</span></div></section>',1)),t("section",Et,[t("div",Vt,[s[12]||(s[12]=t("div",null,[t("h2",null,"总体流程图"),t("p",null,"悬停查看每一步数据含义与输出说明")],-1)),t("div",Dt,[t("button",{class:S(["mode-tab",{active:!r.value}]),onClick:s[4]||(s[4]=e=>r.value=!1)},"彩色",2),t("button",{class:S(["mode-tab",{active:r.value}]),onClick:s[5]||(s[5]=e=>r.value=!0)},"黑白",2)])]),t("div",Ot,[t("img",{src:r.value?"/mpi-algorithm/flow_overview_bw.svg":"/mpi-algorithm/flow_overview.svg",alt:"MPI流程图",class:"flow-image"},null,8,Ut),s[13]||(s[13]=t("p",{class:"figure-caption"},"图1 | MPI 计算流程示意",-1))]),t("div",Nt,[(h(),p(L,null,F(K,(e,i)=>t("div",{key:e.key,class:S(["flow-step",{active:P.value===i}]),onMouseenter:c=>P.value=i},[t("div",jt,n(i+1),1),t("div",Zt,[t("h3",null,n(e.title),1),t("p",null,n(e.subtitle),1)])],42,zt)),64))])]),t("section",Gt,[s[33]||(s[33]=t("div",{class:"section-header"},[t("h2",null,"子指标模块"),t("p",null,"每个子指标都对应明确的输入参数与物理含义")],-1)),t("div",Kt,[t("div",Jt,[s[16]||(s[16]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"RSI"),t("h3",null,"顶板稳定性")],-1)),s[17]||(s[17]=t("ul",null,[t("li",null,"输入：抗拉强度、关键层数量、岩层结构"),t("li",null,"含义：描述顶板破坏敏感性")],-1)),t("div",Xt,[t("img",{src:r.value?"/mpi-algorithm/rsi_stability_bw.svg":"/mpi-algorithm/rsi_stability.svg",alt:"RSI顶板稳定性示意"},null,8,Wt),s[14]||(s[14]=t("span",null,"图2 | 顶板稳定性构成",-1))]),t("div",qt,[s[15]||(s[15]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.main},null,8,Qt),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.norm},null,8,Yt),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.key},null,8,ts),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.struct},null,8,ss)]),s[18]||(s[18]=t("div",{class:"indicator-visual"},[t("div",{class:"visual-bar"},[t("span",null,"稳定性 ↑"),t("div",{class:"bar-track"},[t("div",{class:"bar-fill",style:{width:"72%"}})])])],-1))]),t("div",es,[s[23]||(s[23]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"BRI"),t("h3",null,"冲击地压风险")],-1)),s[24]||(s[24]=t("ul",null,[t("li",null,"输入：采深、硬厚岩层、煤层厚度"),t("li",null,"含义：描述深度与硬层带来的能量积累")],-1)),t("div",as,[t("img",{src:r.value?"/mpi-algorithm/bri_depth_curve_bw.svg":"/mpi-algorithm/bri_depth_curve.svg",alt:"BRI采深影响曲线"},null,8,is),s[19]||(s[19]=t("span",null,"图3 | 采深影响曲线",-1))]),t("div",ls,[t("div",ns,[s[20]||(s[20]=t("span",{class:"control-label"},"采深模拟",-1)),t("span",{class:S(["control-value",it.value])},n(O.value)+"m ("+n(lt.value)+")",3)]),$(t("input",{type:"range",min:"0",max:"1200",step:"10","onUpdate:modelValue":s[6]||(s[6]=e=>O.value=e),class:"depth-slider"},null,512),[[et,O.value,void 0,{number:!0}]]),s[21]||(s[21]=t("div",{class:"depth-labels"},[t("span",null,"0m"),t("span",null,"400m"),t("span",null,"800m"),t("span",null,"1200m")],-1)),t("div",os,[t("div",rs,[t("div",ds,[t("div",{class:"bri-bar-fill",style:R({width:C.value+"%",background:nt.value})},null,4)]),t("span",cs,"BRI = "+n(C.value.toFixed(1)),1)])])]),t("div",us,[s[22]||(s[22]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.main},null,8,vs),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.depth},null,8,ps),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.hard},null,8,ms),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.thick},null,8,hs)]),s[25]||(s[25]=t("div",{class:"indicator-visual"},[t("div",{class:"visual-line"},[t("span",null,"深度 ↑ 风险 ↑"),t("div",{class:"line-track"})])],-1))]),t("div",fs,[s[31]||(s[31]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"ASI"),t("h3",null,"支承压力分布")],-1)),s[32]||(s[32]=t("ul",null,[t("li",null,"输入：综合刚度、内摩擦角"),t("li",null,"含义：描述应力传递与集中程度")],-1)),t("div",_s,[t("img",{src:r.value?"/mpi-algorithm/asi_stress_profile_bw.svg":"/mpi-algorithm/asi_stress_profile.svg",alt:"ASI应力传递示意"},null,8,bs),s[26]||(s[26]=t("span",null,"图4 | 应力传递剖面",-1))]),t("div",gs,[s[27]||(s[27]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.main},null,8,ks),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.stiff},null,8,xs),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.fric},null,8,ws)]),t("div",ys,[s[29]||(s[29]=t("div",{class:"asi-label"},"应力传递模拟",-1)),t("div",Ms,[(h(!0),p(L,null,F(ot.value,(e,i)=>(h(),p("div",{key:i,class:"stress-bar",style:R({height:e.height+"%",background:e.color,animationDelay:e.delay+"s"})},null,4))),128))]),s[30]||(s[30]=t("div",{class:"stress-labels"},[t("span",null,"采空区"),t("span",null,"煤壁"),t("span",null,"前方")],-1)),t("div",{class:"peak-indicator",style:R({left:rt.value+"%"})},[...s[28]||(s[28]=[t("div",{class:"peak-arrow"},"↑",-1),t("div",{class:"peak-label"},"峰值",-1)])],4)])])])]),t("section",Is,[s[36]||(s[36]=t("div",{class:"section-header"},[t("h2",null,"权重解释区"),t("p",null,"拖动滑块模拟权重变化对 MPI 的影响")],-1)),t("div",Ss,[t("div",Rs,[(h(),p(L,null,F(dt,e=>t("div",{class:"weight-item",key:e.key},[t("div",Ps,[t("span",null,n(e.label),1),t("span",Ts,n((k.value[e.key]*100).toFixed(1))+"%",1)]),$(t("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":i=>y[e.key]=i},null,8,$s),[[et,y[e.key],void 0,{number:!0}]]),t("div",Ls,"默认："+n(e.default),1)])),64))]),t("div",Fs,[t("div",Hs,[t("div",{class:"stack-segment rsi",style:R({width:k.value.rsi*100+"%"})},null,4),t("div",{class:"stack-segment bri",style:R({width:k.value.bri*100+"%"})},null,4),t("div",{class:"stack-segment asi",style:R({width:k.value.asi*100+"%"})},null,4)]),s[35]||(s[35]=j('<div class="stack-legend" data-v-45fda31c><span data-v-45fda31c><i class="dot rsi" data-v-45fda31c></i>RSI</span><span data-v-45fda31c><i class="dot bri" data-v-45fda31c></i>BRI</span><span data-v-45fda31c><i class="dot asi" data-v-45fda31c></i>ASI</span></div><div class="weight-note" data-v-45fda31c> 默认权重来源于专家经验与历史样本拟合，可在后续版本中开放自定义策略。 </div>',2)),t("div",Bs,[s[34]||(s[34]=t("div",{class:"formula-title"},"MPI融合公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:G(o.mpi)},null,8,As)])])])]),s[44]||(s[44]=j('<section class="card risk-card" data-v-45fda31c><div class="section-header" data-v-45fda31c><h2 data-v-45fda31c>风险等级与决策解释</h2><p data-v-45fda31c>MPI 值越高表示稳定性越好，风险越低</p></div><div class="risk-grid" data-v-45fda31c><div class="risk-level" data-v-45fda31c><span class="level high" data-v-45fda31c>高风险</span><p data-v-45fda31c>MPI &lt; 50，建议加强支护与监测</p></div><div class="risk-level" data-v-45fda31c><span class="level medium" data-v-45fda31c>中风险</span><p data-v-45fda31c>50 ≤ MPI &lt; 70，建议适度优化施工参数</p></div><div class="risk-level" data-v-45fda31c><span class="level low" data-v-45fda31c>低风险</span><p data-v-45fda31c>MPI ≥ 70，施工条件相对稳定</p></div></div></section>',1)),t("section",Cs,[s[40]||(s[40]=t("div",{class:"section-header"},[t("h2",null,"示例演算"),t("p",null,"选择真实样点做可追踪演算，增强可信度")],-1)),t("div",Es,[t("div",Vs,[t("div",Ds,[(h(),p(L,null,F(U,e=>t("button",{key:e.id,class:S(["sample-btn",{active:W.value===e.id}]),onClick:i=>W.value=e.id},n(e.name),11,Os)),64))]),s[37]||(s[37]=t("div",{class:"table-row header"},[t("span",null,"参数"),t("span",null,"示例值")],-1)),(h(!0),p(L,null,F(mt.value,e=>(h(),p("div",{class:"table-row",key:e.label},[t("span",null,n(e.label),1),t("span",null,n(e.value),1)]))),128))]),t("div",Us,[s[38]||(s[38]=t("div",{class:"result-title"},"综合 MPI",-1)),t("div",Ns,n(x.value.mpi.toFixed(2)),1),t("div",{class:S(["result-level",tt.value.class])},n(tt.value.label),3),t("div",zs,[t("span",null,"RSI: "+n(x.value.breakdown.rsi.toFixed(2)),1),t("span",null,"BRI: "+n(x.value.breakdown.bri.toFixed(2)),1),t("span",null,"ASI: "+n(x.value.breakdown.asi.toFixed(2)),1)]),s[39]||(s[39]=t("div",{class:"result-desc"},"基于 MPI 设计文档公式的实时演算",-1))])])]),t("section",js,[s[41]||(s[41]=t("div",{class:"section-header"},[t("h2",null,"图像生成逻辑"),t("p",null,"说明 MPI 网格与可视化映射流程")],-1)),t("div",Zs,[(h(),p(L,null,F(ht,e=>t("div",{class:"output-step",key:e.title},[t("h3",null,n(e.title),1),t("p",null,n(e.desc),1)])),64))]),s[42]||(s[42]=t("div",{class:"output-note"}," 颜色映射采用 ODI 色带标准，支持 SVG + PNG 高分辨率输出。 ",-1))])]))}},qs=wt(Gs,[["__scopeId","data-v-45fda31c"]]);export{qs as default};
