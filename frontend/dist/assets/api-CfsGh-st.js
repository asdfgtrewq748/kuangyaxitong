import{a as d}from"./network-T6nY3V_4.js";const l="http://localhost:8001",a=d.create({baseURL:l});class g{constructor(s=50){this.cache=new Map,this.pending=new Map,this.maxSize=s}normalizeParams(s){return Array.isArray(s)?s.map(t=>this.normalizeParams(t)):s&&typeof s=="object"?Object.keys(s).sort().reduce((t,r)=>(t[r]=this.normalizeParams(s[r]),t),{}):s}generateKey(s,t){const r=this.normalizeParams(t||{});return`${s}?${JSON.stringify(r)}`}get(s,t){const r=this.generateKey(s,t),n=this.cache.get(r);return n?(n.lastAccess=Date.now(),n.data):null}set(s,t,r){const n=this.generateKey(s,t);if(this.cache.size>=this.maxSize){let o=null,i=1/0;for(const[p,c]of this.cache.entries())c.lastAccess<i&&(i=c.lastAccess,o=p);o&&this.cache.delete(o)}this.cache.set(n,{data:r,lastAccess:Date.now()})}clear(){this.cache.clear(),this.pending.clear()}cachedGet(s,t={},r={}){const n=t.params||{},o=!!(r!=null&&r.bypassCache),i=this.generateKey(s,n);if(!o){const c=this.get(s,n);if(c)return Promise.resolve({data:c});const h=this.pending.get(i);if(h)return h}const p=a.get(s,t).then(c=>(o||this.set(s,n,c.data),c)).finally(()=>{this.pending.delete(i)});return o||this.pending.set(i,p),p}}const m=new g(100),y=()=>a.get("/boreholes/scan"),x=(e,s=20)=>a.get("/boreholes/preview",{params:{file:e,limit:s}}),_=e=>{const s=new FormData;return e.forEach(t=>s.append("files",t)),a.post("/boreholes/upload",s)},b=(e,s,t,r,n)=>a.get("/pressure/index/grid",{params:{method:e,grid_size:s,elastic_modulus:t,density:r,tensile_strength:n}}),w=(e,s,t,r,n)=>a.get("/pressure/steps",{params:{model:e,h:s,q:t,t:r,s:n}}),S=(e,s)=>a.get("/export/index",{params:{method:e,grid_size:s},responseType:"blob"}),v=e=>a.get("/pressure/index/workfaces",{params:e}),k=e=>a.get("/export/pressure-index-workfaces",{params:e,responseType:"blob"}),A=(e,s)=>a.get("/summary/index",{params:{method:e,grid_size:s}}),z=e=>a.get("/summary/index-workfaces",{params:e}),I=(e,s,t)=>a.get("/summary/steps",{params:{model:e,target:s,grid_size:t}}),P=e=>a.get("/summary/steps-workfaces",{params:e}),D=e=>a.get("/pressure/steps/boreholes",{params:{model:e}}),G=e=>a.get("/export/pressure-steps",{params:{model:e},responseType:"blob"}),E=(e,s,t,r,n,o)=>a.get("/pressure/steps/grid",{params:{model:e,target:s,h_mode:t,q_mode:r,grid_size:n,default_q:o}}),T=(e,s,t,r,n,o)=>a.get("/export/pressure-steps-grid",{params:{model:e,target:s,h_mode:t,q_mode:r,grid_size:n,default_q:o},responseType:"blob"}),R=()=>m.cachedGet("/seams/list"),$=e=>a.get("/seams/stats",{params:{seam_name:e}}),B=(e,s=null)=>a.get("/seams/overburden",{params:{seam_name:e,borehole:s}}),O=(e,s="kriging",t=80,r=12,n=150,o=1,i={})=>{const p={params:{seam_name:e,method:s,grid_size:t,num_levels:r,dpi:n,smooth_sigma:o}};return i!=null&&i.forceRefresh?a.get("/seams/contour-images",p):m.cachedGet("/seams/contour-images",p)},q=(e,s=null,t=null)=>a.post("/api/mpi/batch",{points:e,weights:s,config:t}),C=(e,s=50,t="idw",r=null,n=null)=>a.post("/api/mpi/interpolate",{points:e,resolution:s,method:t,weights:r,bounds:n}),L=()=>a.get("/api/mpi/weights"),K=e=>{const s=new FormData;return s.append("file",e),a.post("/api/mpi/workfaces/parse",s)},M=e=>a.post("/api/mpi/heatmap-image",e),W=(e,s=!0,t=!0)=>m.cachedGet("/api/rock-params/query",{params:{lithology:e,use_synonyms:s,include_default:t}}),j=e=>a.post("/api/algorithm-validation/evaluate",e),u="advanced_v2_asi_calibrated_v1",N=(e="16-3ç…¤",s=50,t="idw",r=null)=>{const n={seam_name:e,resolution:s,method:t,model_rev:u};return r&&typeof r=="object"&&(n.weights=JSON.stringify(r)),m.cachedGet("/api/algorithm-validation/spatial-overview",{params:n})},F=e=>a.post("/api/research/dataset/register",e),J=e=>a.get(`/api/research/dataset/${e}`),U=(e,s)=>a.post(`/api/research/dataset/${e}/split`,s),H=e=>a.post("/api/research/experiments/run",e),V=e=>a.get(`/api/research/experiments/${e}`),Q=e=>a.get(`/api/research/experiments/${e}/artifacts`),X=(e,s)=>a.get(`/api/research/experiments/${e}/artifacts/${encodeURIComponent(s)}`,{responseType:"blob"}),Y=()=>a.get("/api/research/experiments/templates"),Z=e=>a.post("/api/research/experiments/run-suite",e),ee=()=>a.get("/api/research/papers/overview"),se=(e,s)=>a.get(`/api/research/papers/${e}/download`,{params:{kind:s},responseType:"blob"}),ae=e=>a.get(`/api/research/papers/${e}/bundle`,{responseType:"blob"}),te=(e="auc",s=20)=>a.get("/api/research/leaderboard/experiments",{params:{metric:e,limit:s}});export{H as A,Z as B,V as C,Q as D,X as E,T as F,G,w as H,E as I,D as J,A as K,z as L,I as M,P as N,q as O,$ as a,B as b,O as c,L as d,b as e,S as f,R as g,v as h,k as i,K as j,M as k,W as l,C as m,j as n,te as o,x as p,ae as q,ee as r,y as s,se as t,_ as u,N as v,Y as w,F as x,J as y,U as z};
