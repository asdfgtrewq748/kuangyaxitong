const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataImport-8cpXCs1T.js","assets/vendor-BiQoUjbf.js","assets/api-BhRy5Rwk.js","assets/network-T6nY3V_4.js","assets/vue-router-Dfza_nYx.js","assets/DataImport-CD9hYBg3.css","assets/Interpolation-NNge5HXJ.js","assets/Interpolation-9EmHafUC.css","assets/PressureIndex-a_0M2fHU.js","assets/HeatmapCanvas-DXKpIatT.js","assets/HeatmapCanvas-iNhjtbDE.css","assets/PressureIndex-CnYwekIL.css","assets/MpiHeatmap-DzxcQkkP.js","assets/MpiHeatmap-nNwjnRiW.css","assets/MpiHeatmapPro-DRGblu0V.js","assets/MpiHeatmapPro-1e_QL_5h.css","assets/MpiAlgorithm-dNkRmDJa.js","assets/MpiAlgorithm-Ck0jR6kT.css","assets/AcademicAlgorithm-BwA8RCDX.js","assets/echarts-CkoSHfYc.js","assets/echarts-AB_YLQA7.js","assets/AcademicAlgorithm-DkJoMRYR.css","assets/AlgorithmValidation-CN2bmVoB.js","assets/AlgorithmValidation-Bd9mHDio.css","assets/Steps-C5zbiHlB.js","assets/Steps-BS8S8uzJ.css","assets/Report-CmLzQMVy.js","assets/Report-BQ7S_AM8.css"])))=>i.map(i=>d[i]);
var X=Object.defineProperty;var M=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var N=(o,e,s)=>e in o?X(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,k=(o,e)=>{for(var s in e||(e={}))Z.call(e,s)&&N(o,s,e[s]);if(M)for(var s of M(e))ee.call(e,s)&&N(o,s,e[s]);return o};import{b5 as g,b6 as C,b7 as u,b8 as b,b9 as L,ba as H,bb as w,bc as D,bd as te,b as F,w as oe,r as ne,c as A,be as K,bf as q,bg as se,u as R,bh as x,bi as j,i as re,bj as ae}from"./vendor-BiQoUjbf.js";import{u as ie,a as le,c as ce,b as ue}from"./vue-router-Dfza_nYx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&f(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const de={class:"toast-container"},pe=["aria-live"],me={class:"toast-icon"},fe={class:"toast-content"},_e={__name:"Toast",setup(o,{expose:e}){const s=F([]);let f=0;const i=d=>{const p={success:"✓",error:"✕",warning:"⚠",info:"ℹ"};return p[d]||p.info},c=(d,p="info",n=3e3)=>{const O=++f,_={id:O,message:d,type:p,isExiting:!1};s.value.push(_),setTimeout(()=>{a(O)},n)},a=d=>{const p=s.value.find(n=>n.id===d);p&&(p.isExiting=!0,setTimeout(()=>{s.value=s.value.filter(n=>n.id!==d)},200))};return e({add:c}),(d,p)=>(g(),C(te,{to:"body"},[u("div",de,[(g(!0),b(D,null,L(s.value,n=>(g(),b("div",{key:n.id,class:H(["toast",n.type,n.isExiting&&"toast-exit"]),role:"alert","aria-live":n.type==="error"?"assertive":"polite"},[u("span",me,w(i(n.type)),1),u("span",fe,w(n.message),1)],10,pe))),128))])]))}},U="kuangya_workspace_flow_v1",T=["DataImport","Interpolation","AcademicAlgorithm","AlgorithmValidation","Report"],W=()=>({selectedSeam:"",updatedAt:"",steps:{DataImport:!1,Interpolation:!1,AcademicAlgorithm:!1,MpiAlgorithm:!1,PressureIndex:!1,AlgorithmValidation:!1,Report:!1},metrics:{boreholes:0,interpolationPoints:0,pressureReady:!1,validationReady:!1,reportGeneratedAt:""}}),m=ne(W()),V=(o={})=>{const e=W();m.selectedSeam=typeof o.selectedSeam=="string"?o.selectedSeam:e.selectedSeam,m.updatedAt=typeof o.updatedAt=="string"?o.updatedAt:e.updatedAt,m.steps=k(k({},e.steps),o.steps||{}),m.metrics=k(k({},e.metrics),o.metrics||{})},ve=()=>{try{const o=localStorage.getItem(U);if(!o)return;V(JSON.parse(o))}catch(o){V()}},ge=()=>{localStorage.setItem(U,JSON.stringify(m))},he=(o,e=null)=>{Object.prototype.hasOwnProperty.call(m.steps,o)&&(m.steps[o]=!0,e&&typeof e=="object"&&(m.metrics=k(k({},m.metrics),e)),m.updatedAt=new Date().toISOString())},we=o=>{m.selectedSeam=typeof o=="string"?o:"",m.updatedAt=new Date().toISOString()},ye=()=>{V(),m.updatedAt=new Date().toISOString()};ve();oe(m,()=>{ge()},{deep:!0});const be=A(()=>{const o=T.filter(e=>m.steps[e]).length;return Number((o/T.length).toFixed(2))}),Oe=()=>({flowOrder:T,workspaceState:m,completionRate:be,markStepDone:he,setSelectedSeam:we,resetFlow:ye}),Se=(o,e)=>{const s=o.__vccOpts||o;for(const[f,i]of e)s[f]=i;return s},ke={class:"app-layout"},Ae={class:"sidebar"},Ee={class:"sidebar-nav"},Re={class:"nav-badge"},Pe={class:"nav-text"},Ie={class:"main-content"},xe={class:"content-wrapper"},Le={class:"workflow-strip"},De={class:"workflow-head"},Te={class:"workflow-track"},Ve=["onClick"],Ce={class:"step-index"},Fe={class:"step-title"},$e={class:"workflow-actions"},Be={key:0,class:"workflow-seam"},Me={key:0,class:"workflow-guard"},Ne={class:"workflow-guard-text"},qe={__name:"AppLayout",setup(o){const e=ie(),s=le(),f=F(null),{flowOrder:i,workspaceState:c,completionRate:a,resetFlow:d}=Oe(),p=A(()=>s.getRoutes().filter(r=>{var t,l;return((t=r.meta)==null?void 0:t.title)&&((l=r.meta)==null?void 0:l.nav)!==!1}).sort((r,t)=>{var l,h;return Number(((l=r.meta)==null?void 0:l.navOrder)||999)-Number(((h=t.meta)==null?void 0:h.navOrder)||999)})),n=A(()=>{const r=new Map(s.getRoutes().map(t=>[t.name,t]));return i.map(t=>r.get(t)).filter(Boolean)}),O=A(()=>String(e.name||"")),_=A(()=>c.selectedSeam?{seam:c.selectedSeam}:void 0),S=r=>{var t;return!!((t=c.steps)!=null&&t[r])},E=A(()=>{if(n.value.length===0)return null;const r=n.value.findIndex(t=>t.name===O.value);if(r>=0){const t=n.value[r];if(!S(t.name))return t;for(let l=r+1;l<n.value.length;l+=1)if(!S(n.value[l].name))return n.value[l]}return n.value.find(t=>!S(t.name))||n.value[n.value.length-1]}),$=r=>{const t=n.value.findIndex(l=>l.name===r);return t<=0?null:n.value.find((l,h)=>h<t&&!S(l.name))||null},P=A(()=>{const r=O.value;if(!r)return null;const t=$(r);if(!t)return null;const l=n.value.find(h=>h.name===r);return l?{blockedBy:t,current:l}:null}),B=r=>{var l,h;if(!(r!=null&&r.name))return;const t=$(r.name);t&&((l=f.value)!=null&&l.add)&&f.value.add(`Flow hint: finish ${((h=t.meta)==null?void 0:h.title)||t.name} first`,"warning",2600),s.push({name:r.name,query:_.value})},Y=()=>{var r;(r=E.value)!=null&&r.name&&s.push({name:E.value.name,query:_.value})},z=r=>{var l;return String(((l=r==null?void 0:r.meta)==null?void 0:l.title)||"").slice(0,1)||"•"};return K(()=>{window.toastRef=f}),(r,t)=>{const l=q("router-link"),h=q("router-view");return g(),b("div",ke,[u("aside",Ae,[t[2]||(t[2]=u("div",{class:"sidebar-logo"},"MPI",-1)),u("nav",Ee,[(g(!0),b(D,null,L(p.value,v=>(g(),C(l,{key:v.path,to:v.path,class:"nav-item","active-class":"active"},{default:se(()=>[u("span",Re,w(z(v)),1),u("span",Pe,w(v.meta.title),1)]),_:2},1032,["to"]))),128))])]),u("main",Ie,[u("div",xe,[u("section",Le,[u("div",De,[t[3]||(t[3]=u("strong",null,"Product Flow",-1)),u("span",null,w(Math.round(R(a)*100))+"%",1)]),u("div",Te,[(g(!0),b(D,null,L(n.value,(v,Q)=>(g(),b("button",{key:v.path,type:"button",class:H(["workflow-step",{active:v.name===O.value,done:S(v.name)}]),onClick:ze=>B(v)},[u("span",Ce,w(Q+1),1),u("span",Fe,w(v.meta.title),1)],10,Ve))),128))]),u("div",$e,[R(c).selectedSeam?(g(),b("span",Be,"Seam "+w(R(c).selectedSeam),1)):x("",!0),E.value?(g(),b("button",{key:1,type:"button",class:"workflow-btn",onClick:Y}," Next: "+w(E.value.meta.title),1)):x("",!0),u("button",{type:"button",class:"workflow-btn ghost",onClick:t[0]||(t[0]=(...v)=>R(d)&&R(d)(...v))},"Reset")]),P.value?(g(),b("div",Me,[u("div",Ne,[t[4]||(t[4]=u("strong",null,"Flow guard",-1)),u("span",null," Previous step "+w(P.value.blockedBy.meta.title)+" is not done. You can stay here, but completing it first is recommended. ",1)]),u("button",{type:"button",class:"workflow-btn guard",onClick:t[1]||(t[1]=v=>B(P.value.blockedBy))}," Go to "+w(P.value.blockedBy.meta.title),1)])):x("",!0)]),j(h)])]),j(_e,{ref_key:"toast",ref:f},null,512)])}}},je=Se(qe,[["__scopeId","data-v-4892fc50"]]),Ge={__name:"App",setup(o){return K(()=>{window.toastRef=null}),(e,s)=>(g(),C(je))}},He="modulepreload",Ke=function(o){return"/"+o},G={},y=function(e,s,f){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(s.map(p=>{if(p=Ke(p),p in G)return;G[p]=!0;const n=p.endsWith(".css"),O=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${O}`))return;const _=document.createElement("link");if(_.rel=n?"stylesheet":He,n||(_.as="script"),_.crossOrigin="",_.href=p,d&&_.setAttribute("nonce",d),document.head.appendChild(_),n)return new Promise((S,E)=>{_.addEventListener("load",S),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return i.then(a=>{for(const d of a||[])d.status==="rejected"&&c(d.reason);return e().catch(c)})},Ue=[{path:"/",redirect:"/algorithm-validation"},{path:"/data",name:"DataImport",component:()=>y(()=>import("./DataImport-8cpXCs1T.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{title:"数据导入",icon:"upload",navOrder:10,flowOrder:10}},{path:"/interpolation",name:"Interpolation",component:()=>y(()=>import("./Interpolation-NNge5HXJ.js"),__vite__mapDeps([6,1,4,2,3,7])),meta:{title:"插值分析",icon:"chart",navOrder:20,flowOrder:20}},{path:"/pressure",name:"PressureIndex",component:()=>y(()=>import("./PressureIndex-a_0M2fHU.js"),__vite__mapDeps([8,1,4,9,10,2,3,11])),meta:{title:"矿压指标",icon:"bar",nav:!1,legacy:!0}},{path:"/mpi-heatmap",name:"MpiHeatmap",component:()=>y(()=>import("./MpiHeatmap-DzxcQkkP.js"),__vite__mapDeps([12,1,2,3,4,13])),meta:{title:"MPI 热力图（旧版）",icon:"legacy",nav:!1,legacy:!0}},{path:"/mpi-heatmap-pro",name:"MpiHeatmapPro",component:()=>y(()=>import("./MpiHeatmapPro-DRGblu0V.js"),__vite__mapDeps([14,1,2,3,4,15])),meta:{title:"MPI 数值模拟",icon:"bolt",navOrder:40}},{path:"/mpi-algorithm",name:"MpiAlgorithm",component:()=>y(()=>import("./MpiAlgorithm-dNkRmDJa.js"),__vite__mapDeps([16,1,4,17])),meta:{title:"MPI 算法原理",icon:"box",nav:!1,legacy:!0}},{path:"/academic-algorithm",name:"AcademicAlgorithm",component:()=>y(()=>import("./AcademicAlgorithm-BwA8RCDX.js"),__vite__mapDeps([18,1,3,19,20,4,21])),meta:{title:"新算法原理",icon:"book",navOrder:30,flowOrder:30}},{path:"/algorithm-validation",name:"AlgorithmValidation",component:()=>y(()=>import("./AlgorithmValidation-CN2bmVoB.js"),__vite__mapDeps([22,1,4,2,3,19,20,23])),meta:{title:"新算法实证",icon:"flask",navOrder:50,flowOrder:40}},{path:"/steps",name:"Steps",component:()=>y(()=>import("./Steps-C5zbiHlB.js"),__vite__mapDeps([24,1,9,10,2,3,4,25])),meta:{title:"来压步距",icon:"grid",navOrder:60}},{path:"/report",name:"Report",component:()=>y(()=>import("./Report-CmLzQMVy.js"),__vite__mapDeps([26,1,4,2,3,27])),meta:{title:"结果报告",icon:"report",navOrder:70,flowOrder:50}}],We=ce({history:ue(),routes:Ue}),J=Symbol("toast");function Je(o){const e=F(null);return o.provide(J,e),e}function et(){const o=re(J),e=(a,d="info",p=3e3)=>{var n;(n=o.value)==null||n.add(a,d,p)};return{add:e,success:a=>e(a,"success"),error:a=>e(a,"error"),warning:a=>e(a,"warning"),info:a=>e(a,"info")}}const I=ae(Ge);I.use(We);const Ye=Je(I);I.config.globalProperties.$toast=Ye;I.mount("#app");export{Se as _,et as a,y as b,Oe as u};
