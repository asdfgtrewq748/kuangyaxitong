import{_ as Je,o as Ze,w as Ge,b as w,c as A,d as l,t as k,g as _e,e as Qe,f as O,F as Ae,k as Pe,n as Ue,r as M,i as ge,j as ke,m as He,v as Oe,p as et,h as Fe,q as qe,s as je,u as tt}from"./index-tY8q6Zf3.js";import{g as ot,a as lt,b as st,c as nt}from"./api-ChvzGBUD.js";const at={key:0,class:"error-placeholder"},it={class:"error-detail"},rt={key:1,class:"loading-placeholder"},ct=["src"],dt=["viewBox"],ut={key:0},ht=["x1","y1","x2","y2"],vt=["cx","cy"],ft=["x","y"],gt=["cx","cy"],mt=["x","y"],pt=["x","y"],yt=["x1","y1","x2","y2"],xt=["transform","onMouseenter"],bt=["fill"],kt={class:"map-controls"},_t={key:1,class:"legend"},St={class:"legend-title"},wt={class:"legend-range"},Mt={class:"legend-min"},Tt={class:"legend-bar"},Ct={class:"legend-max"},Ft={key:0,class:"tooltip-borehole"},At={class:"tooltip-name"},Pt={class:"tooltip-coords"},Bt={class:"tooltip-value"},$t={class:"tooltip-label"},Wt={class:"tooltip-number"},Rt={__name:"ContourMap",props:{imageUrl:{type:String,default:""},boreholes:{type:Array,default:()=>[]},bounds:{type:Object,default:()=>({})},property:{type:String,default:"thickness"},propertyLabel:{type:String,default:"åšåº¦"},valueRange:{type:Object,default:()=>({min:0,max:10})},colormap:{type:String,default:"YlOrBr"},crossSectionMode:{type:Boolean,default:!1}},emits:["crossSectionChange","crossSectionComplete"],setup(G,{expose:Be,emit:me}){const T=G,pe=me,oe=M(null),ie=M(800),J=M(600),le=M(!1),E=M(null),z=M(1),Q=M(0),se=M(0),ae=M(!1),L=M(!1),q=M({x:0,y:0}),j=M(null),ee=M({x:0,y:0}),ce=M(!0),p=M({start:null,end:null,distance:null}),re=M(null),ue=ge(()=>{if(T.bounds&&T.bounds.min_x!==void 0)return{minX:T.bounds.min_x,maxX:T.bounds.max_x,minY:T.bounds.min_y,maxY:T.bounds.max_y,rangeX:T.bounds.max_x-T.bounds.min_x,rangeY:T.bounds.max_y-T.bounds.min_y};if(T.boreholes.length===0)return null;let g=1/0,u=-1/0,t=1/0,e=-1/0;return T.boreholes.forEach(a=>{a.x<g&&(g=a.x),a.x>u&&(u=a.x),a.y<t&&(t=a.y),a.y>e&&(e=a.y)}),{minX:g,maxX:u,minY:t,maxY:e,rangeX:u-g,rangeY:e-t}}),Se=ge(()=>{if(!ue.value||T.boreholes.length===0)return[];if(!le.value||!T.imageUrl)return[];const g=ue.value,u=ie.value,t=J.value,e=u*.1,a=u*(1-.1-.85),n=t*.1,c=t*(1-.1-.8),o=u-e-a,s=t-n-c;return console.log("Image dimensions:",u,"x",t),console.log("Plot area:",{leftPadding:e.toFixed(1),rightPadding:a.toFixed(1),topPadding:c.toFixed(1),bottomPadding:n.toFixed(1),plotWidth:o.toFixed(1),plotHeight:s.toFixed(1)}),T.boreholes.map(i=>{const r=i.x??i.borehole_x,d=i.y??i.borehole_y;if(r==null||d==null)return null;const x=(r-g.minX)/g.rangeX,I=(d-g.minY)/g.rangeY,W=e+x*o,_=t-n-I*s;return(i.borehole==="ZK101"||i.borehole==="ZK102")&&console.log(`Borehole ${i.borehole}:`,{world:{x:r.toFixed(1),y:d.toFixed(1)},relative:{x:x.toFixed(3),y:I.toFixed(3)},canvas:{x:W.toFixed(1),y:_.toFixed(1)}}),{...i,x:r,y:d,canvasX:Math.round(W*10)/10,canvasY:Math.round(_*10)/10,color:$e(i[T.property]||i.thickness||i.burial_depth)}}).filter(i=>i!==null)}),$e=g=>{var a,n;if(g==null)return"#3b82f6";const u=((a=T.valueRange)==null?void 0:a.min)||0,t=((n=T.valueRange)==null?void 0:n.max)||1,e=Math.max(0,Math.min(1,(g-u)/(t-u||1)));return T.colormap==="YlOrBr"?we(e,[{t:0,r:255,g:255,b:204},{t:.25,r:255,g:230,b:153},{t:.5,r:255,g:190,b:121},{t:.75,r:230,g:140,b:80},{t:1,r:160,g:80,b:50}]):we(e,[{t:0,r:68,g:1,b:84},{t:.25,r:59,g:82,b:139},{t:.5,r:33,g:154,b:141},{t:.75,r:94,g:201,b:98},{t:1,r:253,g:231,b:37}])},we=(g,u)=>{let t=u[0],e=u[u.length-1];for(let s=0;s<u.length-1;s++)if(g>=u[s].t&&g<=u[s+1].t){t=u[s],e=u[s+1];break}const a=e.t!==t.t?(g-t.t)/(e.t-t.t):0,n=Math.round(t.r+(e.r-t.r)*a),c=Math.round(t.g+(e.g-t.g)*a),o=Math.round(t.b+(e.b-t.b)*a);return`rgb(${n}, ${c}, ${o})`},Me=ge(()=>({transform:`scale(${z.value}) translate(${Q.value/z.value}px, ${se.value/z.value}px)`,transformOrigin:"center center",transition:ae.value?"none":"transform 0.1s ease-out"})),ye=ge(()=>({position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${z.value}) translate(${Q.value/z.value}px, ${se.value/z.value}px)`,transformOrigin:"center center",pointerEvents:"none",transition:ae.value?"none":"transform 0.1s ease-out",maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"})),Te=ge(()=>({left:ee.value.x+15+"px",top:ee.value.y+15+"px"})),We=ge(()=>T.colormap==="YlOrBr"?"background: linear-gradient(to right, #fffacc, #ffe699, #ffbe79, #e68c50, #a05032)":"background: linear-gradient(to right, #440154, #3b528b, #21918c, #5ec962, #fde725)"),Ce=g=>{ie.value=g.target.naturalWidth,J.value=g.target.naturalHeight,le.value=!0,E.value=null,console.log("Image loaded successfully:",ie.value,"x",J.value),console.log("Bounds:",T.bounds),console.log("Boreholes count:",T.boreholes.length),T.boreholes.length>0&&console.log("First borehole:",{name:T.boreholes[0].borehole,x:T.boreholes[0].x,y:T.boreholes[0].y,thickness:T.boreholes[0].thickness})},Re=g=>{var u;E.value="å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®",le.value=!1,console.error("Image load error:",g),console.log("ImageUrl:",((u=T.imageUrl)==null?void 0:u.substring(0,50))+"...")},De=()=>{z.value=Math.min(z.value*1.2,3)},Ee=()=>{z.value=Math.max(z.value/1.2,.5)},he=()=>{z.value=1,Q.value=0,se.value=0},Ie=()=>{p.value={start:null,end:null,distance:null},re.value=null,pe("crossSectionChange",null)},xe=(g,u)=>{if(!oe.value)return null;const t=oe.value.getBoundingClientRect(),e=t.width/2,a=t.height/2,n=(g-e-Q.value)/z.value+e,c=(u-a-se.value)/z.value+a,o=(t.width-ie.value)/2,s=(t.height-J.value)/2;return{x:n-o,y:c-s}},ve=(g,u)=>{if(!ue.value)return null;const t=ie.value,e=J.value,a=t*.1,n=t*(1-.1-.85),c=e*.1,o=e*(1-.1-.8),s=t-a-n,i=e-c-o,r=ue.value,d=r.minX+(g-a)/s*r.rangeX,x=r.minY+(e-u-c)/i*r.rangeY;return{x:d,y:x}},Ye=g=>{if(T.crossSectionMode){const u=xe(g.clientX,g.clientY);if(!u)return;if(!p.value.start)p.value.start=u,L.value=!0;else if(p.value.end)p.value={start:u,end:null,distance:null},L.value=!0;else{p.value.end=u,L.value=!1;const t=ve(u.x,u.y),e=ve(p.value.start.x,p.value.start.y);if(t&&e){const a=Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2);p.value.distance=a}re.value=null,pe("crossSectionComplete",{start:ve(p.value.start.x,p.value.start.y),end:ve(p.value.end.x,p.value.end.y),startCanvas:p.value.start,endCanvas:p.value.end,distance:p.value.distance})}pe("crossSectionChange",p.value)}else ae.value=!0,q.value={x:g.clientX-Q.value,y:g.clientY-se.value}},be=()=>{ae.value=!1},Xe=g=>{if(!oe.value)return;const u=oe.value.getBoundingClientRect();if(g.clientX-u.left,g.clientY-u.top,T.crossSectionMode&&L.value){const t=xe(g.clientX,g.clientY);t&&(re.value=t),ee.value={x:g.clientX,y:g.clientY};return}if(ae.value){Q.value=g.clientX-q.value.x,se.value=g.clientY-q.value.y;return}ee.value={x:g.clientX,y:g.clientY}},Le=g=>{g.preventDefault();const u=g.deltaY>0?.9:1.1;z.value=Math.max(.5,Math.min(3,z.value*u))};return Ze(()=>{}),Ge(()=>T.imageUrl,g=>{he(),le.value=!1,E.value=null,console.log("ImageUrl changed:",g?g.substring(0,50)+"...":"null")}),Be({resetView:he,resetCrossSection:Ie,boreholes:Se,crossSectionLine:p}),(g,u)=>{var t,e,a,n,c,o;return w(),A("div",{class:Ue(["contour-map-wrapper",{"cross-section-mode":G.crossSectionMode}])},[l("div",{ref_key:"imageContainer",ref:oe,class:"image-container",onMousedown:Ye,onMousemove:Xe,onMouseup:be,onMouseleave:be,onWheel:Qe(Le,["prevent"])},[E.value?(w(),A("div",at,[u[2]||(u[2]=l("p",null,"âš ï¸ å›¾ç‰‡åŠ è½½å¤±è´¥",-1)),l("p",it,k(E.value),1),u[3]||(u[3]=l("p",{class:"error-hint"},"è¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ",-1))])):G.imageUrl?(w(),A("img",{key:2,src:G.imageUrl,class:"contour-image",style:_e(Me.value),alt:"Contour Map",onLoad:Ce,onError:Re},null,44,ct)):(w(),A("div",rt,[...u[4]||(u[4]=[l("div",{class:"spinner"},null,-1),l("p",null,"æ­£åœ¨ç”Ÿæˆç­‰å€¼çº¿å›¾...",-1)])]))],544),G.imageUrl?(w(),A("svg",{key:0,class:"borehole-overlay",viewBox:`0 0 ${ie.value} ${J.value}`,style:_e(ye.value),preserveAspectRatio:"xMidYMid meet"},[u[6]||(u[6]=l("defs",null,[l("filter",{id:"shadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},[l("feDropShadow",{dx:"0",dy:"1",stdDeviation:"2","flood-opacity":"0.3"})]),l("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto"},[l("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#f59e0b"})])],-1)),p.value.start&&p.value.end?(w(),A("g",ut,[l("line",{x1:p.value.start.x,y1:p.value.start.y,x2:p.value.end.x,y2:p.value.end.y,stroke:"#f59e0b","stroke-width":"3","stroke-dasharray":"8,4","marker-end":"url(#arrowhead)",class:"cross-section-line"},null,8,ht),l("circle",{cx:p.value.start.x,cy:p.value.start.y,r:"8",fill:"#f59e0b",stroke:"white","stroke-width":"2",class:"cross-section-marker"},null,8,vt),l("text",{x:p.value.start.x,y:p.value.start.y-15,fill:"#f59e0b","font-size":"14","font-weight":"bold","text-anchor":"middle"},"A",8,ft),l("circle",{cx:p.value.end.x,cy:p.value.end.y,r:"8",fill:"#f59e0b",stroke:"white","stroke-width":"2",class:"cross-section-marker"},null,8,gt),l("text",{x:p.value.end.x,y:p.value.end.y-15,fill:"#f59e0b","font-size":"14","font-weight":"bold","text-anchor":"middle"},"A'",8,mt),l("text",{x:(p.value.start.x+p.value.end.x)/2,y:(p.value.start.y+p.value.end.y)/2-15,fill:"white","font-size":"12","text-anchor":"middle",class:"distance-label"},k((t=p.value.distance)==null?void 0:t.toFixed(0))+"m",9,pt)])):O("",!0),G.crossSectionMode&&p.value.start&&re.value?(w(),A("line",{key:1,x1:p.value.start.x,y1:p.value.start.y,x2:re.value.x,y2:re.value.y,stroke:"rgba(245, 158, 11, 0.5)","stroke-width":"2","stroke-dasharray":"4,4"},null,8,yt)):O("",!0),ce.value?(w(!0),A(Ae,{key:2},Pe(Se.value,(s,i)=>(w(),A("g",{key:i,transform:`translate(${s.canvasX}, ${s.canvasY})`,class:"borehole-marker",onMouseenter:r=>j.value={...s,isBorehole:!0},onMouseleave:u[0]||(u[0]=r=>j.value=null)},[u[5]||(u[5]=l("circle",{r:"9",fill:"rgba(255,255,255,0.95)",filter:"url(#shadow)"},null,-1)),l("circle",{r:"6",fill:s.color||"#3b82f6",stroke:"#1e3a8a","stroke-width":"1.5"},null,8,bt)],40,xt))),128)):O("",!0)],12,dt)):O("",!0),l("div",kt,[l("button",{class:"control-btn",onClick:De,title:"æ”¾å¤§"},[...u[7]||(u[7]=[l("span",null,"+",-1)])]),l("button",{class:"control-btn",onClick:Ee,title:"ç¼©å°"},[...u[8]||(u[8]=[l("span",null,"âˆ’",-1)])]),l("button",{class:"control-btn",onClick:he,title:"é‡ç½®"},[...u[9]||(u[9]=[l("span",null,"âŸ²",-1)])]),l("button",{class:Ue(["control-btn",{active:ce.value}]),onClick:u[1]||(u[1]=s=>ce.value=!ce.value),title:"é’»å­”ç‚¹"},[...u[10]||(u[10]=[l("span",null,"ğŸ“",-1)])],2)]),G.valueRange?(w(),A("div",_t,[l("div",St,k(G.propertyLabel),1),l("div",wt,[l("span",Mt,k((e=G.valueRange.min)==null?void 0:e.toFixed(2))+"m",1),l("div",Tt,[l("div",{class:"legend-gradient",style:_e(We.value)},null,4)]),l("span",Ct,k((a=G.valueRange.max)==null?void 0:a.toFixed(2))+"m",1)])])):O("",!0),j.value?(w(),A("div",{key:2,class:"hover-tooltip",style:_e(Te.value)},[j.value.isBorehole?(w(),A("div",Ft,[l("div",At,k(j.value.name||j.value.borehole),1),l("div",Pt,"("+k((n=j.value.x)==null?void 0:n.toFixed(1))+", "+k((c=j.value.y)==null?void 0:c.toFixed(1))+")",1),l("div",Bt,[l("span",$t,k(G.propertyLabel)+":",1),l("span",Wt,k((o=j.value.value)==null?void 0:o.toFixed(2))+" m",1)])])):O("",!0)],4)):O("",!0)],2)}}},Ke=Je(Rt,[["__scopeId","data-v-444e152a"]]),Dt={class:"page"},Et={class:"header"},It={class:"muted"},Yt={key:0,class:"header-stats"},Xt={class:"stat-badge"},Lt={class:"stat-badge primary"},zt={class:"stat-badge"},Ht={key:0,class:"card"},Ut={class:"seam-selection-grid"},Nt=["onClick"],Vt={class:"seam-card-header"},Ot={class:"seam-name"},qt={class:"seam-count"},jt={class:"seam-card-stats"},Kt={class:"mini-stat"},Jt={class:"mini-stat-value"},Zt={class:"mini-stat"},Gt={class:"mini-stat-value"},Qt={key:1,class:"grid"},eo={class:"card params-card compact-card"},to={class:"param-row"},oo={class:"tab-buttons"},lo=["onClick"],so={class:"param-row"},no={class:"param-header"},ao={class:"param-value"},io={class:"param-row"},ro={class:"param-header"},co={class:"param-value"},uo={key:0,class:"param-row"},ho={class:"toggle-btn",style:{width:"100%"}},vo={key:0,class:"hint-text"},fo={class:"action-buttons"},go=["disabled"],mo={key:0,class:"spinner sm"},po={class:"card compact-card"},yo={key:0,class:"histogram-wrapper"},xo={key:1,class:"empty-state"},bo={key:2,class:"stats-grid"},ko={class:"stat-item"},_o={class:"stat-value"},So={class:"stat-item"},wo={class:"stat-value"},Mo={class:"stat-item"},To={class:"stat-value"},Co={class:"stat-item"},Fo={class:"stat-value"},Ao={class:"stat-item"},Po={class:"stat-value"},Bo={class:"stat-item"},$o={class:"stat-value"},Wo={class:"card compact-card"},Ro={class:"stratigraphic-wrapper"},Do={class:"lithology-legend-compact"},Eo={class:"legend-name"},Io={key:0,class:"map-row"},Yo={key:0,class:"card map-card-large"},Xo={class:"map-header"},Lo={class:"section-desc"},zo={class:"map-wrapper"},Ho={key:1,class:"empty-state"},Uo={key:1,class:"card map-card-large"},No={class:"map-header"},Vo={class:"section-desc"},Oo={class:"map-wrapper"},qo={key:1,class:"empty-state"},jo={key:1,class:"card map-card-full"},Ko={class:"map-wrapper uncertainty-wrapper"},Jo={key:2,class:"card map-card-full"},Zo={class:"map-header"},Go={class:"section-title"},Qo={class:"section-badge"},el={class:"cross-section-wrapper"},tl={__name:"Interpolation",setup(G,{expose:Be}){const me=tt(),T=M(!1),pe=M(null),oe=M(!1),ie=M([]),J=M(null),le=M(null),E=M([]),z=M([]),Q=M("kriging"),se=M(80),ae=M(10),L=M(null),q=M(null),j=M(!1),ee=M({line:null,points:[],depthProfile:[],distance:null,hasData:!1}),ce=M(null),p=M(null),re=M(null),ue=M(null),Se=[{key:"kriging",label:"Kriging"},{key:"idw",label:"IDW"},{key:"linear",label:"Linear"},{key:"nearest",label:"Nearest"}],$e={ç»†ç ‚å²©:"#FCEBB6",ç²‰ç ‚å²©:"#E0FFFF",æ³¥å²©:"#D3D3D3",ä¸­ç ‚å²©:"#FCEBB6",ç²—ç ‚å²©:"#F5DEB3",ç ¾å²©:"#DEB887",ç‚­è´¨æ³¥å²©:"#8B8B8B",ç ‚è´¨æ³¥å²©:"#D8D8D8",æ³¥è´¨ç ‚å²©:"#E8E8E8",çŸ³ç°å²©:"#B0E0E6",ç…¤:"#2F4F4F"},we={ç»†ç ‚å²©:{facecolor:"#FCEBB6",hatch:"...",edgecolor:"#999999"},ç²‰ç ‚å²©:{facecolor:"#E0FFFF",hatch:"...",edgecolor:"#AAAAAA"},æ³¥å²©:{facecolor:"#D3D3D3",hatch:"---",edgecolor:"#666666"},ä¸­ç ‚å²©:{facecolor:"#FCEBB6",hatch:"...",edgecolor:"#999999"},ç²—ç ‚å²©:{facecolor:"#F5DEB3",hatch:"...",edgecolor:"#999999"},ç ¾å²©:{facecolor:"#DEB887",hatch:"ooo",edgecolor:"#8B4513"},ç‚­è´¨æ³¥å²©:{facecolor:"#8B8B8B",hatch:"---",edgecolor:"#444444"},ç ‚è´¨æ³¥å²©:{facecolor:"#D8D8D8",hatch:"-..",edgecolor:"#777777"},æ³¥è´¨ç ‚å²©:{facecolor:"#E8E8E8",hatch:".-.",edgecolor:"#888888"},çŸ³ç°å²©:{facecolor:"#B0E0E6",hatch:"+++",edgecolor:"#5F9EA0"},ç…¤:{facecolor:"#2F4F4F",hatch:"",edgecolor:"#1a1a1a"}},Me=t=>({kriging:"Kriging",idw:"IDW",linear:"Linear",nearest:"Nearest"})[t]||t,ye=()=>{const t=E.value.map(e=>e.thickness).filter(e=>e!=null);return t.length===0?0:t.reduce((e,a)=>e+a,0)/t.length},Te=()=>{const t=E.value.map(n=>n.thickness).filter(n=>n!=null);if(t.length===0)return 0;const e=ye(),a=t.reduce((n,c)=>n+(c-e)**2,0)/t.length;return Math.sqrt(a)},We=()=>{const t=ye();return t===0?0:Te()/t*100},Ce=()=>{const t=E.value.map(e=>e.thickness).filter(e=>e!=null);return t.length===0?{min:0,max:0}:{min:Math.min(...t),max:Math.max(...t)}},Re=async()=>{T.value=!0;try{const{data:t}=await ot();ie.value=t.seams||[]}catch{pe.value="åŠ è½½ç…¤å±‚å¤±è´¥"}finally{T.value=!1}},De=(t=[])=>{let e=0;return t.map(a=>{const n=Number(a.thickness??0)||0;let c=Number(a.z_top),o=Number(a.z_bottom);if(Number.isFinite(c)||(c=e),Number.isFinite(o)||(o=c+n),!Number.isFinite(n)||n===0){const s=Math.max((o||0)-(c||0),0);s>0&&(a.thickness=s)}return e=o,{...a,thickness:Number(a.thickness??n)||0,z_top:c,z_bottom:o}})},Ee=async t=>{var e,a,n;J.value=t,L.value=null,q.value=null;try{const{data:c}=await st(t.name);le.value=c,E.value=c.points||[];try{const o=await nt(t.name),s=((e=o==null?void 0:o.data)==null?void 0:e.boreholes)||[],i=s.reduce((d,x)=>{var _,B;const I=((_=d==null?void 0:d.layers)==null?void 0:_.length)||0;return(((B=x==null?void 0:x.layers)==null?void 0:B.length)||0)>I?x:d},s[0]),r=De((i==null?void 0:i.layers)||[]);z.value=r.sort((d,x)=>(d.z_top||0)-(x.z_top||0))}catch{z.value=[]}await he(),await je(),xe(),ve()}catch(c){me.add("åŠ è½½ç…¤å±‚è¯¦æƒ…å¤±è´¥: "+(((n=(a=c.response)==null?void 0:a.data)==null?void 0:n.detail)||c.message),"error")}},he=async()=>{var t,e,a,n,c,o,s,i,r,d,x,I,W,_,B;if(J.value){oe.value=!0;try{const{data:f}=await lt(J.value.name,Q.value,se.value,ae.value);console.log("å®Œæ•´APIå“åº”:",f),console.log("data.thickness:",f.thickness),console.log("data.depth:",f.depth),f.thickness&&(console.log("thicknesså¯¹è±¡çš„keys:",Object.keys(f.thickness)),console.log("thickness.imageå­˜åœ¨å—?","image"in f.thickness),console.log("thicknessæ‰€æœ‰å±æ€§:",JSON.stringify(f.thickness,null,2))),f.depth&&(console.log("depthå¯¹è±¡çš„keys:",Object.keys(f.depth)),console.log("depth.imageå­˜åœ¨å—?","image"in f.depth)),console.log("API Response:",{hasThicknessImage:!!((t=f.thickness)!=null&&t.image),hasDepthImage:!!((e=f.depth)!=null&&e.image),thicknessImageLength:(n=(a=f.thickness)==null?void 0:a.image)==null?void 0:n.length,depthImageLength:(o=(c=f.depth)==null?void 0:c.image)==null?void 0:o.length,thicknessImagePrefix:(i=(s=f.thickness)==null?void 0:s.image)==null?void 0:i.substring(0,50),depthImagePrefix:(d=(r=f.depth)==null?void 0:r.image)==null?void 0:d.substring(0,50)}),E.value=f.boreholes||[],(x=f.thickness)!=null&&x.image?(L.value={imageUrl:`data:image/png;base64,${f.thickness.image}`,valueRange:f.thickness.value_range,bounds:f.bounds},console.log("Thickness imageUrl created:",L.value.imageUrl.substring(0,50)+"...")):console.error("âŒ åšåº¦å›¾ç‰‡æ•°æ®ç¼ºå¤±!"),(I=f.depth)!=null&&I.image?(q.value={imageUrl:`data:image/png;base64,${f.depth.image}`,valueRange:f.depth.value_range,bounds:f.bounds},console.log("Depth imageUrl created:",q.value.imageUrl.substring(0,50)+"...")):console.error("âŒ æ·±åº¦å›¾ç‰‡æ•°æ®ç¼ºå¤±!"),await je(),Ie(),xe(),console.log("âœ“ All chartsç»˜åˆ¶å®Œæˆ"),me.add("ç­‰å€¼çº¿å›¾ç”Ÿæˆå®Œæˆ","success")}catch(f){console.error("Interpolate error:",f),console.error("Error response:",(W=f.response)==null?void 0:W.data),me.add(((B=(_=f.response)==null?void 0:_.data)==null?void 0:B.detail)||"ç”Ÿæˆç­‰å€¼çº¿å›¾å¤±è´¥","error")}finally{oe.value=!1}}},Ie=()=>{if(console.log("calculateUncertainty called"),console.log("seamPoints.value.length:",E.value.length),console.log("thicknessResult.value:",L.value),!E.value.length||!L.value){console.log("âŒ Missing data for uncertainty map");return}const t=ue.value;if(console.log("uncertaintyCanvas.value:",t),!t){console.log("âŒ uncertaintyCanvas not found");return}console.log("âœ“ Starting uncertainty map calculation...");const e=t.getContext("2d"),a=t.width=900,n=t.height=550;console.log("Canvas size:",a,"x",n);const c=L.value.bounds,o=E.value.map(S=>({x:S.x,y:S.y}));console.log("Bounds:",c),console.log("Points count:",o.length),e.fillStyle="#ffffff",e.fillRect(0,0,a,n);const s={left:20,right:35,top:20,bottom:60},i=a-s.left-s.right-50,r=n-s.top-s.bottom,d=150,x=[],I=500;for(let S=0;S<d;S++){x[S]=[];for(let D=0;D<d;D++){const $=c.min_x+D/d*(c.max_x-c.min_x),ne=c.max_y-S/d*(c.max_y-c.min_y);let te=1/0;for(const de of o){const fe=Math.sqrt(($-de.x)**2+(ne-de.y)**2);fe<te&&(te=fe)}x[S][D]=Math.min(1.6,te/I*1.6)}}const W=[],_=3;for(let S=0;S<d;S++){W[S]=[];for(let D=0;D<d;D++){let $=0,ne=0;for(let te=-_;te<=_;te++)for(let de=-_;de<=_;de++){const fe=S+te,ze=D+de;if(fe>=0&&fe<d&&ze>=0&&ze<d){const Ne=Math.sqrt(de*de+te*te),Ve=Math.exp(-(Ne*Ne)/(2*_*_));$+=x[fe][ze]*Ve,ne+=Ve}}W[S][D]=$/ne}}const B=S=>{const D=Math.min(1.5,Math.max(0,S))/1.5;if(D<.5){const $=D*2;return{r:Math.floor(49+206*$),g:Math.floor(130+125*$),b:Math.floor(189+-189*$)}}else{const $=(D-.5)*2;return{r:Math.floor(255+-40*$),g:Math.floor(255+-207*$),b:Math.floor(0+48*$)}}},f=i/d,K=r/d;for(let S=0;S<d;S++)for(let D=0;D<d;D++){const $=W[S][D],ne=B($);e.fillStyle=`rgb(${ne.r}, ${ne.g}, ${ne.b})`,e.fillRect(s.left+D*f,s.top+(d-1-S)*K,f+1,K+1)}const H=6;for(const S of o){const D=s.left+(S.x-c.min_x)/(c.max_x-c.min_x)*i,$=s.top+(c.max_y-S.y)/(c.max_y-c.min_y)*r;e.beginPath(),e.arc(D,$,H,0,Math.PI*2),e.fillStyle="#000000",e.fill()}e.strokeStyle="#000000",e.lineWidth=2,e.strokeRect(s.left,s.top,i,r);const R=s.left+20,X=s.top+r-80,U=120,y=50;e.fillStyle="#ffffff",e.strokeStyle="#000000",e.lineWidth=1.5,e.fillRect(R,X,U,y),e.strokeRect(R,X,U,y),e.fillStyle="#d73027",e.fillRect(R+10,X+28,15,15),e.strokeStyle="#000000",e.lineWidth=1,e.strokeRect(R+10,X+28,15,15),e.fillStyle="#000000",e.font="12px Arial, sans-serif",e.textAlign="left",e.fillText("é«˜ä¸ç¡®å®šæ€§",R+32,X+40),e.beginPath(),e.arc(R+17,X+18,H,0,Math.PI*2),e.fillStyle="#000000",e.fill(),e.fillText("é’»å­”ä½ç½®",R+32,X+22);const Y=s.left+i-150,P=X,N=130,v=35;e.fillStyle="#ffffff",e.strokeStyle="#000000",e.lineWidth=1.5,e.fillRect(Y,P,N,v),e.strokeRect(Y,P,N,v),e.fillStyle="#000000",e.font="12px Arial, sans-serif",e.textAlign="left",e.fillText("0",Y+10,P+22),e.textAlign="center",e.fillText("500",Y+75,P+22),e.textAlign="right",e.fillText("1000 ç±³",Y+120,P+22);const h=P+12;e.strokeStyle="#000000",e.lineWidth=2,e.beginPath(),e.moveTo(Y+10,h),e.lineTo(Y+120,h),e.stroke(),e.lineWidth=4,e.beginPath(),e.moveTo(Y+10,h),e.lineTo(Y+75,h),e.stroke();const b=s.left+i+20,C=s.top,V=20,m=r;for(let S=0;S<m;S++){const D=(1-S/m)*1.5,$=B(D);e.fillStyle=`rgb(${$.r}, ${$.g}, ${$.b})`,e.fillRect(b,C+S,V,1)}e.strokeStyle="#000000",e.lineWidth=1.5,e.strokeRect(b,C,V,m),e.fillStyle="#000000",e.font="11px Arial, sans-serif",e.textAlign="left";const F=[0,.5,1,1.5],Z=["0","0.5","1.0","1.5+"];F.forEach((S,D)=>{const $=C+m-S/1.5*m;e.beginPath(),e.moveTo(b+V,$),e.lineTo(b+V+4,$),e.strokeStyle="#000000",e.lineWidth=1,e.stroke(),e.fillText(Z[D],b+V+8,$+4)}),e.save(),e.translate(b+V+35,C+m/2),e.rotate(-Math.PI/2),e.textAlign="center",e.font="12px Arial, sans-serif",e.fillText("æ–¹å·® (å½’ä¸€åŒ–)",0,0),e.restore(),e.fillStyle="#000000",e.font="bold 14px Arial, sans-serif",e.textAlign="center",e.fillText("æ’å€¼ä¸ç¡®å®šæ€§åˆ†å¸ƒå›¾",s.left+i/2,n-28),e.font="11px Arial, sans-serif",e.fillText("çº¢è‰²åŒºåŸŸè¡¨ç¤ºè¾ƒé«˜çš„ä¸ç¡®å®šæ€§ï¼›è“è‰²åŒºåŸŸæ›´åŠ å¯é ã€‚",s.left+i/2,n-12),console.log("âœ“ Uncertainty mapç»˜åˆ¶å®Œæˆ")},xe=()=>{console.log("drawHistogram called"),console.log("histogramCanvas.value:",ce.value),console.log("seamPoints.value.length:",E.value.length);const t=ce.value;if(!t){console.log("âŒ histogramCanvas not found");return}if(E.value.length===0){console.log("âŒ No seam points data");return}console.log("âœ“ Starting histogram drawing...");const e=t.getContext("2d"),a=window.devicePixelRatio||1,n=t.parentElement,c=(n==null?void 0:n.clientWidth)||t.clientWidth||500,o=(n==null?void 0:n.clientHeight)||t.clientHeight||350;t.width=Math.round(c*a),t.height=Math.round(o*a),t.style.width=`${c}px`,t.style.height=`${o}px`,e.setTransform(a,0,0,a,0,0);const s=c,i=o,r=E.value.map(m=>m.thickness).filter(m=>m!=null);if(r.length===0)return;const d=Math.min(...r),x=Math.max(...r),I=r.reduce((m,F)=>m+F,0)/r.length,W=r.reduce((m,F)=>m+(F-I)**2,0)/r.length,_=Math.sqrt(W),B=20,f=(x-d)/B,K=Array(B).fill(0);for(const m of r){const F=Math.min(Math.floor((m-d)/f),B-1);K[F]++}const H=Math.max(...K),R="#5D8AA8",X="#C8523C",U=.85;e.fillStyle="#ffffff",e.fillRect(0,0,s,i);const y={left:50,right:25,top:45,bottom:45},Y=s-y.left-y.right,P=i-y.top-y.bottom,N=Y/B,v=P/(H*1.1);e.fillStyle=R,e.globalAlpha=U;for(let m=0;m<B;m++){const F=K[m]*v,Z=y.left+m*N,S=i-y.bottom-F;F>0&&(e.fillRect(Z,S,N-1,F),e.strokeStyle="white",e.lineWidth=.8,e.strokeRect(Z,S,N-1,F))}e.globalAlpha=1,e.strokeStyle=X,e.lineWidth=2,e.beginPath();for(let m=0;m<=100;m++){const F=y.left+m/100*Y,Z=d+m/100*(x-d),D=1/(_*Math.sqrt(2*Math.PI))*Math.exp(-.5*((Z-I)/_)**2)*r.length*f,$=i-y.bottom-D*v;m===0?e.moveTo(F,$):e.lineTo(F,$)}e.stroke(),e.strokeStyle="#000000",e.lineWidth=1,e.beginPath(),e.moveTo(y.left,y.top),e.lineTo(y.left,i-y.bottom),e.stroke(),e.beginPath(),e.moveTo(y.left,i-y.bottom),e.lineTo(s-y.right,i-y.bottom),e.stroke();const h=4;e.strokeStyle="#000000",e.lineWidth=1;for(let m=0;m<=6;m++){const F=y.left+m/6*Y;e.beginPath(),e.moveTo(F,i-y.bottom),e.lineTo(F,i-y.bottom+h),e.stroke()}for(let m=0;m<=5;m++){const F=i-y.bottom-m/5*P;e.beginPath(),e.moveTo(y.left,F),e.lineTo(y.left-h,F),e.stroke()}e.fillStyle="#000000",e.font="10px Arial, sans-serif",e.textAlign="center";for(let m=0;m<=6;m++){const F=d+m/6*(x-d),Z=y.left+m/6*Y;e.fillText(F.toFixed(1),Z,i-y.bottom+15)}e.textAlign="right";for(let m=0;m<=5;m++){const F=Math.round(m/5*(H*1.1)),Z=i-y.bottom-m/5*P;e.fillText(F.toString(),y.left-6,Z+3)}e.fillStyle="#000000",e.font="11px Arial, sans-serif",e.textAlign="center",e.fillText("åšåº¦ (m)",y.left+Y/2,i-8),e.save(),e.translate(12,y.top+P/2),e.rotate(-Math.PI/2),e.fillText("é¢‘æ•°",0,0),e.restore(),e.fillStyle="#000000",e.font="bold 12px Arial, sans-serif",e.textAlign="left",e.fillText("Figure 1 | é’»å­”åšåº¦åˆ†å¸ƒ (n="+r.length+")",y.left,18),e.fillStyle="#000000",e.font="10px Arial, sans-serif",e.textAlign="left";const b=s-y.right-120,C=y.top+10;e.fillStyle=R,e.globalAlpha=U,e.fillRect(b,C-4,12,10),e.globalAlpha=1,e.strokeStyle="white",e.lineWidth=.8,e.strokeRect(b,C-4,12,10),e.fillText("è§‚æµ‹å€¼",b+16,C+4),e.strokeStyle=X,e.lineWidth=2,e.beginPath(),e.moveTo(b,C+20),e.lineTo(b+12,C+20),e.stroke(),e.fillStyle="#000000",e.fillText("å¯†åº¦æ‹Ÿåˆ",b+16,C+24),e.fillStyle="#666666",e.font="9px Arial, sans-serif",e.textAlign="left";const V=`Î¼=${I.toFixed(2)}  Ïƒ=${_.toFixed(2)}`;e.fillText(V,b,C+42),console.log("âœ“ Histogramç»˜åˆ¶å®Œæˆ")},ve=()=>{const t=re.value;if(!t||z.value.length===0)return;const e=t.getContext("2d"),a=window.devicePixelRatio||1,n=t.parentElement,c=(n==null?void 0:n.clientWidth)||t.clientWidth||280,o=(n==null?void 0:n.clientHeight)||t.clientHeight||500;t.width=Math.round(c*a),t.height=Math.round(o*a),t.style.width=`${c}px`,t.style.height=`${o}px`,e.setTransform(a,0,0,a,0,0);const s=c,i=o;e.fillStyle="#FFFFFF",e.fillRect(0,0,s,i);const r=z.value;let d=Math.max(...r.map(P=>P.z_bottom||0));if((!Number.isFinite(d)||d<=0)&&(d=r.reduce((P,N)=>P+(Number(N.thickness)||0),0)),!Number.isFinite(d)||d<=0)return;const x={top:24,bottom:22},I=(i-x.top-x.bottom)/d,W=x.top,_=14,B=Math.max(110,Math.min(160,s*.3)),f=Math.max(80,Math.min(140,s*.22)),K=_+f+16+B,R=Math.max(16,(s-K)/2),X=R+_,U=X+f+16;e.fillStyle="#0F172A",e.font="bold 12px Arial, sans-serif",e.textAlign="left",e.fillText("åœ°å±‚æŸ±çŠ¶å›¾",X,18);const y=4,Y=Math.max(5,Math.ceil(d/6/5)*5)||10;e.strokeStyle="#E2E8F0",e.lineWidth=1,e.fillStyle="#64748B",e.font="10px Arial, sans-serif",e.textAlign="right",e.beginPath(),e.moveTo(R,W),e.lineTo(R,i-x.bottom),e.stroke();for(let P=0;P<=d;P+=Y){const N=W+P*I;e.beginPath(),e.moveTo(R,N),e.lineTo(R+y,N),e.stroke(),e.fillText(`${Math.round(P)} m`,R-6,N+3)}e.save(),e.translate(R-28,W+(i-x.bottom-W)/2),e.rotate(-Math.PI/2),e.textAlign="center",e.fillStyle="#64748B",e.font="11px Arial, sans-serif",e.fillText("æ·±åº¦",0,0),e.restore(),r.forEach((P,N)=>{const v=W+(P.z_top||0)*I,h=P.thickness||0,b=Math.max(h*I,3),C=we[P.name]||{facecolor:"#D3D3D3",hatch:"---",edgecolor:"#666666"};e.fillStyle=C.facecolor,e.fillRect(X,v,f,b),b>6&&C.hatch&&Ye(e,C.hatch,X,v,f,b,C.edgecolor),e.strokeStyle="#1a1a1a",e.lineWidth=.5,e.strokeRect(X,v,f,b),b>10&&(e.fillStyle="#475569",e.font="10px Arial, sans-serif",e.textAlign="left",e.fillText(P.name,U,v+b/2+3),e.fillStyle="#2563EB",e.font="9px SF Mono, monospace",e.fillText(`${h.toFixed(1)}ç±³`,U,v+b/2+14))}),e.strokeStyle="#94A3B8",e.lineWidth=1,e.strokeRect(X,W,f,i-W-x.bottom)},Ye=(t,e,a,n,c,o,s)=>{t.save(),t.beginPath(),t.rect(a,n,c,o),t.clip(),t.strokeStyle=s,t.globalAlpha=.4,t.lineWidth=.5;const i=6;switch(e){case"...":case"ooo":t.fillStyle=s,t.globalAlpha=.3;for(let r=i/2;r<c;r+=i)for(let d=i/2;d<o;d+=i)t.beginPath(),e==="ooo"?t.arc(a+r,n+d,2.5,0,Math.PI*2):t.arc(a+r,n+d,1,0,Math.PI*2),t.fill();break;case"---":t.globalAlpha=.5;for(let r=4;r<o;r+=i)t.beginPath(),t.moveTo(a,n+r),t.lineTo(a+c,n+r),t.stroke();break;case"+++":case"xx":t.globalAlpha=.3;for(let r=i/2;r<c;r+=i)for(let d=i/2;d<o;d+=i)t.beginPath(),t.moveTo(a+r-3,n+d),t.lineTo(a+r+3,n+d),t.stroke(),t.beginPath(),t.moveTo(a+r,n+d-3),t.lineTo(a+r,n+d+3),t.stroke();break;case"-..":case".-.":t.globalAlpha=.5;for(let r=i;r<o;r+=i*1.5)t.beginPath(),t.moveTo(a,n+r),t.lineTo(a+c/2,n+r),t.stroke(),t.fillStyle=s,t.beginPath(),t.arc(a+c*.75,n+r,1.5,0,Math.PI*2),t.fill();break;case"//":case"\\\\":t.globalAlpha=.4;for(let r=-o;r<c;r+=i)t.beginPath(),t.moveTo(a+r,n),t.lineTo(a+r+o,n+o),t.stroke();break}t.restore()},be=t=>{ee.value={line:{start:t.startCanvas,end:t.endCanvas},worldLine:{start:t.start,end:t.end},points:t.points||[],depthProfile:[],distance:t.distance,hasData:!0},Xe(t.start,t.end,t.distance)},Xe=(t,e,a)=>{if(!E.value.length||a===null)return;const n=p.value;if(!n)return;n.getContext("2d");const c=n.width=n.offsetWidth||900,o=n.height=300,s=100,i=(e.x-t.x)/s,r=(e.y-t.y)/s,d=[];for(let x=0;x<=s;x++){const I=t.x+i*x,W=t.y+r*x,_=E.value.map(B=>{const f=Math.sqrt((I-B.x)**2+(W-B.y)**2);return{depth:B.burial_depth,distance:f}}).filter(B=>B.depth!=null&&B.distance<500);if(_.length>0){let B=0,f=0;for(const K of _){const H=1/(K.distance+1)**2;f+=K.depth*H,B+=H}d.push({distance:x/s*a,depth:f/B})}}ee.value.depthProfile=d,Le(d,a,c,o)},Le=(t,e,a,n)=>{var P,N;const c=p.value;if(!c)return;const o=c.getContext("2d");o.fillStyle="#FFFFFF",o.fillRect(0,0,a,n);const s={left:50,right:30,top:35,bottom:40},i=a-s.left-s.right,r=n-s.top-s.bottom,d=t.map(v=>v.depth),x=Math.min(...d),I=Math.max(...d),W=I-x||1,_={topSoil:"#8FBC8F",sandstone:"#F4A460",shale:"#778899",coal:"#2F2F2F",sandyShale:"#A9A9A9",limestone:"#B0C4DE"},f=r/6;[_.limestone,_.sandyShale,_.coal,_.shale,_.sandstone,_.topSoil].forEach((v,h)=>{const b=s.top+h*f;o.fillStyle=v,o.globalAlpha=.08,o.fillRect(s.left,b,i,f),o.globalAlpha=1}),o.strokeStyle="#E2E8F0",o.lineWidth=.8;const H=10;for(let v=0;v<=H;v++){const h=s.left+v/H*i;o.beginPath(),o.moveTo(h,s.top),o.lineTo(h,n-s.bottom),o.stroke()}const R=5;for(let v=0;v<=R;v++){const h=s.top+v/R*r;o.beginPath(),o.moveTo(s.left,h),o.lineTo(a-s.right,h),o.stroke()}o.strokeStyle="#94A3B8",o.lineWidth=1,o.beginPath(),o.moveTo(s.left,s.top),o.lineTo(s.left,n-s.bottom),o.stroke(),o.beginPath(),o.moveTo(s.left,n-s.bottom),o.lineTo(a-s.right,n-s.bottom),o.stroke();const X=4;o.strokeStyle="#CBD5E1",o.lineWidth=1;for(let v=0;v<=H;v++){const h=s.left+v/H*i;o.beginPath(),o.moveTo(h,n-s.bottom),o.lineTo(h,n-s.bottom+X),o.stroke()}for(let v=0;v<=R;v++){const h=n-s.bottom-v/R*r;o.beginPath(),o.moveTo(s.left,h),o.lineTo(s.left-X,h),o.stroke()}o.beginPath(),o.strokeStyle=_.sandstone,o.lineWidth=2.5,o.lineCap="round",o.lineJoin="round",t.forEach((v,h)=>{const b=s.left+v.distance/e*i,C=n-s.bottom-(v.depth-x)/W*r;h===0?o.moveTo(b,C):o.lineTo(b,C)}),o.stroke(),o.lineTo(s.left+i,n-s.bottom),o.lineTo(s.left,n-s.bottom),o.closePath(),o.fillStyle="rgba(244, 164, 96, 0.12)",o.fill();for(const v of E.value){if(v.burial_depth==null)continue;const h=v.x,b=v.y,C=((P=ee.value.worldLine)==null?void 0:P.start)||{x:0,y:0},V=((N=ee.value.worldLine)==null?void 0:N.end)||{x:0,y:0},m=Math.sqrt((V.x-C.x)**2+(V.y-C.y)**2);if(m===0)continue;const F=((h-C.x)*(V.x-C.x)+(b-C.y)*(V.y-C.y))/m**2,Z=C.x+F*(V.x-C.x),S=C.y+F*(V.y-C.y);if(Math.sqrt((h-Z)**2+(b-S)**2)<50&&F>=0&&F<=1){const $=s.left+F*i,ne=n-s.bottom-(v.burial_depth-x)/W*r;o.beginPath(),o.arc($,ne,4,0,Math.PI*2),o.fillStyle=_.coal,o.fill(),o.strokeStyle="#ffffff",o.lineWidth=1.5,o.stroke(),o.fillStyle="#64748B",o.font="10px Arial, sans-serif",o.textAlign="center";const te=v.borehole||v.name||"";te&&o.fillText(te,$,ne-10)}}o.fillStyle="#64748B",o.font="11px Arial, sans-serif",o.textAlign="center";for(let v=0;v<=H;v++){const h=s.left+v/H*i,b=v/H*e;o.fillText(`${b.toFixed(0)}`,h,n-15)}o.textAlign="right";for(let v=0;v<=R;v++){const h=n-s.bottom-v/R*r,b=x+v/R*W;o.fillText(`${b.toFixed(0)}`,s.left-8,h+4)}o.fillStyle="#475569",o.font="12px Arial, sans-serif",o.textAlign="center",o.fillText("å‰–é¢è·ç¦» (ç±³)",s.left+i/2,n-5),o.save(),o.translate(12,s.top+r/2),o.rotate(-Math.PI/2),o.fillText("åŸ‹è—æ·±åº¦ (ç±³)",0,0),o.restore(),o.fillStyle="#0F172A",o.font="bold 13px Arial, sans-serif",o.textAlign="left",o.fillText(`å‰–é¢ A-A' | æ·±åº¦: ${x.toFixed(1)} - ${I.toFixed(1)} ç±³`,s.left,18);const U=a-s.right-80,y=n-s.bottom+12,Y=60;o.strokeStyle="#475569",o.lineWidth=2,o.beginPath(),o.moveTo(U,y),o.lineTo(U+Y,y),o.stroke(),o.beginPath(),o.moveTo(U,y-3),o.lineTo(U,y+3),o.stroke(),o.beginPath(),o.moveTo(U+Y,y-3),o.lineTo(U+Y,y+3),o.stroke(),o.fillStyle="#64748B",o.font="10px Arial, sans-serif",o.textAlign="center",o.fillText("æ¯”ä¾‹å°º: 60ç±³",U+Y/2,y+12)},g=()=>{j.value=!1,ee.value={line:null,points:[],depthProfile:[],distance:null,hasData:!1},p.value&&p.value.getContext("2d").clearRect(0,0,p.value.width,p.value.height)};return Ze(()=>{Re()}),Be({resetView:()=>{g()}}),(t,e)=>{var a,n,c,o,s,i,r,d,x,I,W,_,B,f,K,H,R,X,U,y,Y,P,N,v;return w(),A("div",Dt,[l("div",Et,[l("div",null,[e[4]||(e[4]=l("h2",null,"æ’å€¼åˆ†æ",-1)),l("div",It,k(((a=J.value)==null?void 0:a.name)||"é€‰æ‹©ç…¤å±‚è¿›è¡Œç©ºé—´æ’å€¼åˆ†æ"),1)]),J.value&&le.value?(w(),A("div",Yt,[l("div",Xt,[e[5]||(e[5]=l("span",{class:"stat-label"},"åšåº¦èŒƒå›´",-1)),l("strong",null,k(((o=(c=(n=le.value)==null?void 0:n.thickness)==null?void 0:c.min)==null?void 0:o.toFixed(2))||"-")+" - "+k(((r=(i=(s=le.value)==null?void 0:s.thickness)==null?void 0:i.max)==null?void 0:r.toFixed(2))||"-")+" m",1)]),l("div",Lt,[e[6]||(e[6]=l("span",{class:"stat-label"},"å¹³å‡åšåº¦",-1)),l("strong",null,k(((I=(x=(d=le.value)==null?void 0:d.thickness)==null?void 0:x.mean)==null?void 0:I.toFixed(2))||"-")+" m",1)]),l("div",zt,[e[7]||(e[7]=l("span",{class:"stat-label"},"é’»å­”æ•°é‡",-1)),l("strong",null,k(((W=le.value)==null?void 0:W.borehole_count)||E.value.length||"-"),1)])])):O("",!0)]),J.value?(w(),A("div",Qt,[l("div",eo,[e[17]||(e[17]=ke('<h3 class="section-title" data-v-1d2ef65a><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1d2ef65a><circle cx="12" cy="12" r="3" data-v-1d2ef65a></circle><path d="M12 1v6m0 6v6" data-v-1d2ef65a></path><path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24" data-v-1d2ef65a></path><path d="m4.93 19.07 4.24-4.24m5.66-5.66 4.24-4.24" data-v-1d2ef65a></path></svg> æ’å€¼å‚æ•° </h3>',1)),l("div",to,[e[11]||(e[11]=l("label",{class:"param-label"},"æ’å€¼æ–¹æ³•",-1)),l("div",oo,[(w(),A(Ae,null,Pe(Se,h=>l("button",{key:h.key,class:Ue(["tab-btn",{active:Q.value===h.key}]),onClick:b=>Q.value=h.key},k(h.label),11,lo)),64))])]),l("div",so,[l("div",no,[e[12]||(e[12]=l("label",{class:"param-label"},"ç½‘æ ¼å¯†åº¦",-1)),l("span",ao,k(se.value),1)]),He(l("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>se.value=h),type:"range",min:"30",max:"150",step:"10",class:"slider"},null,512),[[Oe,se.value,void 0,{number:!0}]]),e[13]||(e[13]=l("div",{class:"slider-labels"},[l("span",null,"ç²—"),l("span",null,"ç»†")],-1))]),l("div",io,[l("div",ro,[e[14]||(e[14]=l("label",{class:"param-label"},"ç­‰å€¼çº¿çº§åˆ«",-1)),l("span",co,k(ae.value),1)]),He(l("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>ae.value=h),type:"range",min:"5",max:"20",step:"1",class:"slider"},null,512),[[Oe,ae.value,void 0,{number:!0}]]),e[15]||(e[15]=l("div",{class:"slider-labels"},[l("span",null,"å°‘"),l("span",null,"å¤š")],-1))]),L.value?(w(),A("div",uo,[l("label",ho,[He(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=h=>j.value=h)},null,512),[[et,j.value]]),e[16]||(e[16]=l("span",null,"ç»˜åˆ¶å‰–é¢çº¿",-1))]),j.value?(w(),A("p",vo,"åœ¨åœ°å›¾ä¸Šç‚¹å‡»ä¸¤ç‚¹ç»˜åˆ¶å‰–é¢çº¿")):O("",!0)])):O("",!0),l("div",fo,[l("button",{class:"btn primary",onClick:he,disabled:oe.value},[oe.value?(w(),A("span",mo)):O("",!0),Fe(" "+k(oe.value?"è®¡ç®—ä¸­...":"ç”Ÿæˆç­‰å€¼çº¿å›¾"),1)],8,go),l("button",{class:"btn outline",onClick:e[3]||(e[3]=h=>{J.value=null,L.value=null,q.value=null})}," æ›´æ¢ç…¤å±‚ ")])]),l("div",po,[e[25]||(e[25]=ke('<h3 class="section-title" data-v-1d2ef65a><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1d2ef65a><line x1="18" y1="20" x2="18" y2="10" data-v-1d2ef65a></line><line x1="12" y1="20" x2="12" y2="4" data-v-1d2ef65a></line><line x1="6" y1="20" x2="6" y2="14" data-v-1d2ef65a></line></svg> æ•°æ®åˆ†å¸ƒ </h3>',1)),E.value.length>0?(w(),A("div",yo,[l("canvas",{ref_key:"histogramCanvas",ref:ce,class:"histogram-canvas"},null,512)])):(w(),A("div",xo,[...e[18]||(e[18]=[l("p",null,"æš‚æ— æ•°æ®åˆ†å¸ƒ",-1)])])),E.value.length>0?(w(),A("div",bo,[l("div",ko,[e[19]||(e[19]=l("span",{class:"stat-label"},"æ ·æœ¬æ•°",-1)),l("span",_o,k(E.value.length),1)]),l("div",So,[e[20]||(e[20]=l("span",{class:"stat-label"},"å‡å€¼",-1)),l("span",wo,k(ye().toFixed(2))+"m",1)]),l("div",Mo,[e[21]||(e[21]=l("span",{class:"stat-label"},"æ ‡å‡†å·®",-1)),l("span",To,k(Te().toFixed(2))+"m",1)]),l("div",Co,[e[22]||(e[22]=l("span",{class:"stat-label"},"å˜å¼‚ç³»æ•°",-1)),l("span",Fo,k(We().toFixed(2)),1)]),l("div",Ao,[e[23]||(e[23]=l("span",{class:"stat-label"},"æœ€å°å€¼",-1)),l("span",Po,k(Ce().min.toFixed(2))+"m",1)]),l("div",Bo,[e[24]||(e[24]=l("span",{class:"stat-label"},"æœ€å¤§å€¼",-1)),l("span",$o,k(Ce().max.toFixed(2))+"m",1)])])):O("",!0)]),l("div",Wo,[e[26]||(e[26]=ke('<h3 class="section-title" data-v-1d2ef65a><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1d2ef65a><path d="M12 2L2 7l10 5 10-5-10-5z" data-v-1d2ef65a></path><path d="m2 17 10 5 10-5" data-v-1d2ef65a></path><path d="m2 12 10 5 10-5" data-v-1d2ef65a></path></svg> åœ°å±‚æŸ±çŠ¶å›¾ </h3>',1)),l("div",Ro,[l("canvas",{ref_key:"stratigraphicCanvas",ref:re,class:"stratigraphic-canvas"},null,512)]),l("div",Do,[(w(),A(Ae,null,Pe($e,(h,b)=>l("div",{key:b,class:"legend-item-compact"},[l("div",{class:"legend-color",style:_e({background:h})},null,4),l("span",Eo,k(b),1)])),64))])]),L.value||q.value?(w(),A("div",Io,[L.value?(w(),A("div",Yo,[l("div",Xo,[l("div",null,[e[27]||(e[27]=l("h3",{class:"section-title"},[l("svg",{class:"section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"})]),Fe(" ç…¤å±‚åšåº¦åˆ†å¸ƒ ")],-1)),l("p",Lo,k(Me(Q.value))+" Â· "+k((f=(B=(_=L.value)==null?void 0:_.valueRange)==null?void 0:B.min)==null?void 0:f.toFixed(1))+" - "+k((R=(H=(K=L.value)==null?void 0:K.valueRange)==null?void 0:H.max)==null?void 0:R.toFixed(1))+" m",1)])]),l("div",zo,[L.value?(w(),qe(Ke,{key:0,"image-url":L.value.imageUrl,boreholes:E.value,bounds:L.value.bounds,property:"thickness","property-label":"åšåº¦","value-range":L.value.valueRange,colormap:"YlOrBr","cross-section-mode":j.value,onCrossSectionComplete:be},null,8,["image-url","boreholes","bounds","value-range","cross-section-mode"])):(w(),A("div",Ho,[...e[28]||(e[28]=[l("p",null,'è®¾ç½®å‚æ•°åç‚¹å‡»"ç”Ÿæˆç­‰å€¼çº¿å›¾"',-1)])]))])])):O("",!0),q.value?(w(),A("div",Uo,[l("div",No,[l("div",null,[e[29]||(e[29]=l("h3",{class:"section-title"},[l("svg",{class:"section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),l("path",{d:"m2 17 10 5 10-5"})]),Fe(" ç…¤å±‚åŸ‹æ·±åˆ†å¸ƒ ")],-1)),l("p",Vo,k(Me(Q.value))+" Â· "+k((y=(U=(X=q.value)==null?void 0:X.valueRange)==null?void 0:U.min)==null?void 0:y.toFixed(1))+" - "+k((N=(P=(Y=q.value)==null?void 0:Y.valueRange)==null?void 0:P.max)==null?void 0:N.toFixed(1))+" m",1)])]),l("div",Oo,[q.value?(w(),qe(Ke,{key:0,"image-url":q.value.imageUrl,boreholes:E.value,bounds:q.value.bounds,property:"burial_depth","property-label":"åŸ‹æ·±","value-range":q.value.valueRange,colormap:"viridis","cross-section-mode":j.value,onCrossSectionComplete:be},null,8,["image-url","boreholes","bounds","value-range","cross-section-mode"])):(w(),A("div",qo,[...e[30]||(e[30]=[l("p",null,'è®¾ç½®å‚æ•°åç‚¹å‡»"ç”Ÿæˆç­‰å€¼çº¿å›¾"',-1)])]))])])):O("",!0)])):O("",!0),L.value?(w(),A("div",jo,[e[31]||(e[31]=ke('<div class="map-header" data-v-1d2ef65a><div data-v-1d2ef65a><h3 class="section-title" data-v-1d2ef65a><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1d2ef65a><circle cx="12" cy="12" r="10" data-v-1d2ef65a></circle><line x1="12" y1="8" x2="12" y2="12" data-v-1d2ef65a></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-1d2ef65a></line></svg> æ’å€¼ä¸ç¡®å®šæ€§åˆ†å¸ƒ </h3><p class="section-desc" data-v-1d2ef65a>çº¢è‰²åŒºåŸŸè¡¨ç¤ºé«˜ä¸ç¡®å®šæ€§ï¼Œè“è‰²åŒºåŸŸæ›´å¯é </p></div></div>',1)),l("div",Ko,[l("canvas",{ref_key:"uncertaintyCanvas",ref:ue,class:"uncertainty-canvas"},null,512)])])):O("",!0),ee.value.hasData?(w(),A("div",Jo,[l("div",Zo,[l("div",null,[l("h3",Go,[e[32]||(e[32]=l("svg",{class:"section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M3 3v18h18"}),l("path",{d:"m19 9-5 5-4-4-3 3"})],-1)),e[33]||(e[33]=Fe(" å‰–é¢åˆ‡ç‰‡ (A-A') ",-1)),l("span",Qo,k((v=ee.value.distance)==null?void 0:v.toFixed(0))+"m",1)])]),l("button",{class:"btn outline small",onClick:g},"é‡ç½®")]),l("div",el,[l("canvas",{ref_key:"crossSectionCanvas",ref:p,class:"cross-section-canvas"},null,512)])])):O("",!0)])):(w(),A("div",Ht,[e[10]||(e[10]=ke('<h3 class="section-title" data-v-1d2ef65a><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1d2ef65a><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-1d2ef65a></rect><line x1="3" y1="9" x2="21" y2="9" data-v-1d2ef65a></line><line x1="9" y1="21" x2="9" y2="9" data-v-1d2ef65a></line></svg> é€‰æ‹©åˆ†æç…¤å±‚ </h3><p class="section-desc" data-v-1d2ef65a>ä»ä»¥ä¸‹å¯ç”¨ç…¤å±‚ä¸­é€‰æ‹©ä¸€ä¸ªè¿›è¡Œæ’å€¼åˆ†æ</p>',2)),l("div",Ut,[(w(!0),A(Ae,null,Pe(ie.value,h=>{var b,C,V,m,F;return w(),A("div",{key:h.name,class:"seam-selection-card",onClick:Z=>Ee(h)},[l("div",Vt,[l("span",Ot,k(h.name),1),l("span",qt,k(h.borehole_count)+" ä¸ªé’»å­”",1)]),l("div",jt,[l("div",Kt,[e[8]||(e[8]=l("span",{class:"mini-stat-label"},"å¹³å‡åšåº¦",-1)),l("span",Jt,k((b=h.avg_thickness)==null?void 0:b.toFixed(2))+" m",1)]),l("div",Zt,[e[9]||(e[9]=l("span",{class:"mini-stat-label"},"åšåº¦èŒƒå›´",-1)),l("span",Gt,k((V=(C=h.thickness_range)==null?void 0:C.min)==null?void 0:V.toFixed(1))+"-"+k((F=(m=h.thickness_range)==null?void 0:m.max)==null?void 0:F.toFixed(1))+" m",1)])])],8,Nt)}),128))])]))])}}},sl=Je(tl,[["__scopeId","data-v-1d2ef65a"]]);export{sl as default};
