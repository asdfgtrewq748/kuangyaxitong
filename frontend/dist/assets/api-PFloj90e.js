import{a as d}from"./network-T6nY3V_4.js";const h="http://localhost:8001",a=d.create({baseURL:h});class g{constructor(s=50){this.cache=new Map,this.pending=new Map,this.maxSize=s}normalizeParams(s){return Array.isArray(s)?s.map(t=>this.normalizeParams(t)):s&&typeof s=="object"?Object.keys(s).sort().reduce((t,r)=>(t[r]=this.normalizeParams(s[r]),t),{}):s}generateKey(s,t){const r=this.normalizeParams(t||{});return`${s}?${JSON.stringify(r)}`}get(s,t){const r=this.generateKey(s,t),o=this.cache.get(r);return o?(o.lastAccess=Date.now(),o.data):null}set(s,t,r){const o=this.generateKey(s,t);if(this.cache.size>=this.maxSize){let n=null,i=1/0;for(const[p,c]of this.cache.entries())c.lastAccess<i&&(i=c.lastAccess,n=p);n&&this.cache.delete(n)}this.cache.set(o,{data:r,lastAccess:Date.now()})}clear(){this.cache.clear(),this.pending.clear()}cachedGet(s,t={},r={}){const o=t.params||{},n=!!(r!=null&&r.bypassCache),i=this.generateKey(s,o);if(!n){const c=this.get(s,o);if(c)return Promise.resolve({data:c});const l=this.pending.get(i);if(l)return l}const p=a.get(s,t).then(c=>(n||this.set(s,o,c.data),c)).finally(()=>{this.pending.delete(i)});return n||this.pending.set(i,p),p}}const m=new g(100),b=()=>a.get("/boreholes/scan"),y=(e,s=20)=>a.get("/boreholes/preview",{params:{file:e,limit:s}}),x=e=>{const s=new FormData;return e.forEach(t=>s.append("files",t)),a.post("/boreholes/upload",s)},_=(e,s,t,r,o)=>a.get("/pressure/index/grid",{params:{method:e,grid_size:s,elastic_modulus:t,density:r,tensile_strength:o}}),w=(e,s,t,r,o)=>a.get("/pressure/steps",{params:{model:e,h:s,q:t,t:r,s:o}}),S=(e,s)=>a.get("/export/index",{params:{method:e,grid_size:s},responseType:"blob"}),v=e=>a.get("/pressure/index/workfaces",{params:e}),A=e=>a.get("/export/pressure-index-workfaces",{params:e,responseType:"blob"}),k=(e,s)=>a.get("/summary/index",{params:{method:e,grid_size:s}}),G=e=>a.get("/summary/index-workfaces",{params:e}),I=(e,s,t)=>a.get("/summary/steps",{params:{model:e,target:s,grid_size:t}}),P=e=>a.get("/summary/steps-workfaces",{params:e}),z=e=>a.get("/pressure/steps/boreholes",{params:{model:e}}),$=e=>a.get("/export/pressure-steps",{params:{model:e},responseType:"blob"}),D=(e,s,t,r,o,n)=>a.get("/pressure/steps/grid",{params:{model:e,target:s,h_mode:t,q_mode:r,grid_size:o,default_q:n}}),T=(e,s,t,r,o,n)=>a.get("/export/pressure-steps-grid",{params:{model:e,target:s,h_mode:t,q_mode:r,grid_size:o,default_q:n},responseType:"blob"}),R=()=>m.cachedGet("/seams/list"),E=e=>a.get("/seams/stats",{params:{seam_name:e}}),C=(e,s=null)=>a.get("/seams/overburden",{params:{seam_name:e,borehole:s}}),B=(e,s="kriging",t=80,r=12,o=150,n=1,i={})=>{const p={params:{seam_name:e,method:s,grid_size:t,num_levels:r,dpi:o,smooth_sigma:n}};return i!=null&&i.forceRefresh?a.get("/seams/contour-images",p):m.cachedGet("/seams/contour-images",p)},O=e=>a.post("/api/geomodel/jobs",e),j=e=>a.get(`/api/geomodel/jobs/${e}`),q=e=>a.get(`/api/geomodel/jobs/${e}/artifacts`),L=(e,s)=>a.get(`/api/geomodel/jobs/${e}/artifacts/${encodeURIComponent(s)}`,{responseType:"blob"}),K=e=>a.post("/api/mpi/calculate-geo",e),M=e=>a.post("/api/mpi/interpolate-geo",e),W=(e,s=null,t=null)=>a.post("/api/mpi/batch",{points:e,weights:s,config:t}),J=(e,s=50,t="idw",r=null,o=null)=>a.post("/api/mpi/interpolate",{points:e,resolution:s,method:t,weights:r,bounds:o}),U=()=>a.get("/api/mpi/weights"),N=e=>{const s=new FormData;return s.append("file",e),a.post("/api/mpi/workfaces/parse",s)},F=e=>a.post("/api/mpi/heatmap-image",e),H=(e,s=!0,t=!0)=>m.cachedGet("/api/rock-params/query",{params:{lithology:e,use_synonyms:s,include_default:t}}),V=e=>a.post("/api/algorithm-validation/evaluate",e),u="advanced_v2_asi_calibrated_v1",Q=(e="16-3ç…¤",s=50,t="idw",r=null)=>{const o={seam_name:e,resolution:s,method:t,model_rev:u};return r&&typeof r=="object"&&(o.weights=JSON.stringify(r)),m.cachedGet("/api/algorithm-validation/spatial-overview",{params:o})},X=e=>a.post("/api/research/dataset/register",e),Y=e=>a.get(`/api/research/dataset/${e}`),Z=(e,s)=>a.post(`/api/research/dataset/${e}/split`,s),ee=e=>a.post("/api/research/experiments/run",e),se=e=>a.get(`/api/research/experiments/${e}`),ae=e=>a.get(`/api/research/experiments/${e}/artifacts`),te=(e,s)=>a.get(`/api/research/experiments/${e}/artifacts/${encodeURIComponent(s)}`,{responseType:"blob"}),re=()=>a.get("/api/research/experiments/templates"),oe=e=>a.post("/api/research/experiments/run-suite",e),ne=()=>a.get("/api/research/papers/overview"),ie=(e,s)=>a.get(`/api/research/papers/${e}/download`,{params:{kind:s},responseType:"blob"}),ce=e=>a.get(`/api/research/papers/${e}/bundle`,{responseType:"blob"}),pe=(e="auc",s=20)=>a.get("/api/research/leaderboard/experiments",{params:{metric:e,limit:s}});export{ce as A,ie as B,re as C,X as D,Y as E,Z as F,ee as G,oe as H,se as I,ae as J,te as K,T as L,$ as M,w as N,D as O,z as P,k as Q,G as R,I as S,P as T,W as U,R as a,E as b,O as c,C as d,B as e,L as f,j as g,U as h,_ as i,S as j,v as k,q as l,A as m,N as n,J as o,y as p,F as q,H as r,b as s,M as t,x as u,Q as v,V as w,K as x,ne as y,pe as z};
