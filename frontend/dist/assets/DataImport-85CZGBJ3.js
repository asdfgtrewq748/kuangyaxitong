import{_ as be,o as ke,a as Ye,w as pe,b as k,c as C,d as t,n as E,e as H,f as P,g as Xe,h as K,t as x,r as _,i as D,j as A,F as ve,k as fe,l as Be,m as le,v as oe,u as Me}from"./index-tY8q6Zf3.js";import{u as $e,s as ge,p as Fe}from"./api-ChvzGBUD.js";const Te={class:"borehole-map-container"},Ne={class:"map-controls"},Ie=["width","height"],Le={key:0,class:"map-empty"},Pe={class:"tooltip-header"},Ve={class:"tooltip-row"},Re={class:"tooltip-value"},ze={class:"tooltip-row"},De={class:"tooltip-value"},Oe={key:1,class:"selection-info"},We={class:"selection-coords"},Ue={key:2,class:"map-stats"},Ae={class:"stat-item"},je={key:0,class:"stat-item"},j=40,He={__name:"BoreholeMap",props:{boreholes:{type:Array,default:()=>[]},size:{type:Number,default:350}},emits:["select"],setup(O,{emit:$}){const L=O,Q=$,p=_(null),F=_(null),Y=_(null),V=_({x:0,y:0}),T=_(!0),S=_(1),I=_(0),v=_(0),B=_(!1),G=_({x:0,y:0}),M=D(()=>L.size),R=D(()=>{if(L.boreholes.length===0)return null;let e=1/0,n=-1/0,r=1/0,g=-1/0;return L.boreholes.forEach(h=>{h.x<e&&(e=h.x),h.x>n&&(n=h.x),h.y<r&&(r=h.y),h.y>g&&(g=h.y)}),{minX:e,maxX:n,minY:r,maxY:g,rangeX:n-e,rangeY:g-r}}),se=D(()=>({left:V.value.x+12+"px",top:V.value.y+12+"px"})),Z=e=>{if(e.length<3)return e;const n=[...e].sort((m,w)=>m.y-w.y||m.x-w.x),r=n[0],g=m=>Math.atan2(m.y-r.y,m.x-r.x),h=n.slice(1).sort((m,w)=>{const s=g(m),l=g(w);if(s!==l)return s-l;const i=Math.hypot(m.x-r.x,m.y-r.y),u=Math.hypot(w.x-r.x,w.y-r.y);return i-u}),X=(m,w,s)=>(w.x-m.x)*(s.y-m.y)-(w.y-m.y)*(s.x-m.x),f=[r];for(const m of h){for(;f.length>1&&X(f[f.length-2],f[f.length-1],m)<=0;)f.pop();f.push(m)}return f},U=(e,n)=>{const r=R.value;if(!r)return{x:0,y:0};const g=M.value/2,h=M.value/2,f=Math.min((M.value-j*2)/(r.rangeX||1),(M.value-j*2)/(r.rangeY||1))*S.value,m=(r.minX+r.maxX)/2,w=(r.minY+r.maxY)/2;return{x:g+(e-m)*f+I.value,y:h+(w-n)*f+v.value}},N=()=>{if(!p.value)return;const e=p.value.getContext("2d"),{width:n,height:r}=p.value;e.clearRect(0,0,n,r);const g=e.createLinearGradient(0,0,n,r);if(g.addColorStop(0,"#f8fafc"),g.addColorStop(1,"#f1f5f9"),e.fillStyle=g,e.fillRect(0,0,n,r),L.boreholes.length===0)return;const h=R.value,X=50*S.value,f=Math.min(.3,X/100);e.strokeStyle=`rgba(148, 163, 184, ${f})`,e.lineWidth=1;const m=ee(0,0),w=ee(n,r),s=Math.floor(m.x/50)*50,l=Math.floor(w.y/50)*50;for(let o=s;o<=w.x;o+=50){const c=U(o,0);e.beginPath(),e.moveTo(c.x,0),e.lineTo(c.x,r),e.stroke()}for(let o=l;o<=m.y;o+=50){const c=U(0,o);e.beginPath(),e.moveTo(0,c.y),e.lineTo(n,c.y),e.stroke()}e.strokeStyle="#cbd5e1",e.lineWidth=1.5;const i=U(0,0);if(i.y>=0&&i.y<=r&&(e.beginPath(),e.moveTo(0,i.y),e.lineTo(n,i.y),e.stroke()),i.x>=0&&i.x<=n&&(e.beginPath(),e.moveTo(i.x,0),e.lineTo(i.x,r),e.stroke()),p.value.scaledBoreholes=L.boreholes.map((o,c)=>{const y=U(o.x,o.y);return{index:c,name:o.name,x:o.x,y:o.y,canvasX:y.x,canvasY:y.y}}),T.value&&p.value.scaledBoreholes.length>=3){const o=Z(p.value.scaledBoreholes);e.beginPath(),o.forEach((a,d)=>{d===0?e.moveTo(a.canvasX,a.canvasY):e.lineTo(a.canvasX,a.canvasY)}),e.closePath();const c=o.reduce((a,d)=>({minX:Math.min(a.minX,d.canvasX),maxX:Math.max(a.maxX,d.canvasX),minY:Math.min(a.minY,d.canvasY),maxY:Math.max(a.maxY,d.canvasY)}),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),y=e.createRadialGradient((c.minX+c.maxX)/2,(c.minY+c.maxY)/2,0,(c.minX+c.maxX)/2,(c.minY+c.maxY)/2,Math.max(c.maxX-c.minX,c.maxY-c.minY)/2);y.addColorStop(0,"rgba(59, 130, 246, 0.15)"),y.addColorStop(1,"rgba(59, 130, 246, 0.05)"),e.fillStyle=y,e.fill(),e.strokeStyle="rgba(59, 130, 246, 0.5)",e.lineWidth=2,e.setLineDash([8,4]),e.stroke(),e.setLineDash([]),o.forEach((a,d)=>{e.beginPath(),e.arc(a.canvasX,a.canvasY,5,0,Math.PI*2),e.fillStyle="rgba(59, 130, 246, 0.3)",e.fill(),e.strokeStyle="rgba(59, 130, 246, 0.6)",e.lineWidth=1.5,e.stroke()})}e.strokeStyle="rgba(99, 102, 241, 0.2)",e.lineWidth=1.5,e.setLineDash([4,4]),e.beginPath(),p.value.scaledBoreholes.forEach((o,c)=>{c===0?e.moveTo(o.canvasX,o.canvasY):e.lineTo(o.canvasX,o.canvasY)}),e.stroke(),e.setLineDash([]),p.value.scaledBoreholes.forEach((o,c)=>{var ye;const y=Y.value===c,a=((ye=F.value)==null?void 0:ye.index)===c;if(y||a){const xe=y?20:16,W=e.createRadialGradient(o.canvasX,o.canvasY,0,o.canvasX,o.canvasY,xe);y?(W.addColorStop(0,"rgba(245, 158, 11, 0.4)"),W.addColorStop(.5,"rgba(245, 158, 11, 0.15)"),W.addColorStop(1,"rgba(245, 158, 11, 0)")):(W.addColorStop(0,"rgba(59, 130, 246, 0.3)"),W.addColorStop(.5,"rgba(59, 130, 246, 0.1)"),W.addColorStop(1,"rgba(59, 130, 246, 0)")),e.beginPath(),e.arc(o.canvasX,o.canvasY,xe,0,Math.PI*2),e.fillStyle=W,e.fill()}const d=y?8:6;e.beginPath(),e.arc(o.canvasX,o.canvasY,d,0,Math.PI*2);const b=e.createRadialGradient(o.canvasX-d*.3,o.canvasY-d*.3,0,o.canvasX,o.canvasY,d);y?(b.addColorStop(0,"#fcd34d"),b.addColorStop(.5,"#f59e0b"),b.addColorStop(1,"#d97706")):(b.addColorStop(0,"#93c5fd"),b.addColorStop(.5,"#3b82f6"),b.addColorStop(1,"#2563eb")),e.fillStyle=b,e.fill(),e.strokeStyle=y?"#b45309":"#1d4ed8",e.lineWidth=y?2.5:2,e.stroke(),e.shadowColor=y?"rgba(245, 158, 11, 0.4)":"rgba(59, 130, 246, 0.3)",e.shadowBlur=6,e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;const z=o.name||`#${c+1}`,q=o.canvasY-d-6;e.font=y?"bold 11px sans-serif":"10px sans-serif";const he=e.measureText(z),me=4,Ce=o.canvasX-he.width/2-me,we=q-10,_e=he.width+me*2,Se=14;y?e.fillStyle="rgba(245, 158, 11, 0.9)":e.fillStyle="rgba(255, 255, 255, 0.85)",e.beginPath(),e.roundRect(Ce,we,_e,Se,4),e.fill(),e.fillStyle=y?"#fff":"#1e40af",e.textAlign="center",e.textBaseline="middle",e.fillText(z,o.canvasX,q-3)});const u=60*S.value;if(u>30&&u<180){const o=r-18,c=16;e.fillStyle="rgba(255, 255, 255, 0.9)",e.beginPath(),e.roundRect(c-4,o-10,u+8,20,4),e.fill(),e.strokeStyle="#475569",e.lineWidth=2,e.beginPath(),e.moveTo(c,o),e.lineTo(c+u,o),e.stroke(),e.beginPath(),e.moveTo(c,o-5),e.lineTo(c,o+5),e.stroke(),e.beginPath(),e.moveTo(c+u,o-5),e.lineTo(c+u,o+5),e.stroke();const y=Math.min((M.value-j*2)/(h.rangeX||1),(M.value-j*2)/(h.rangeY||1)),a=Math.round(60/S.value/y);e.fillStyle="#475569",e.font="10px sans-serif",e.textAlign="center",e.fillText(`${a}m`,c+u/2,o-10)}},ee=(e,n)=>{const r=R.value;if(!r)return{x:0,y:0};const g=M.value/2,h=M.value/2,f=Math.min((M.value-j*2)/(r.rangeX||1),(M.value-j*2)/(r.rangeY||1))*S.value,m=(r.minX+r.maxX)/2,w=(r.minY+r.maxY)/2;return{x:m+(e-g-I.value)/f,y:w-(n-h-v.value)/f}},ae=()=>{S.value=Math.min(S.value*1.3,5),N()},ne=()=>{S.value=Math.max(S.value/1.3,.2),N()},te=()=>{S.value=1,I.value=0,v.value=0,N()},ie=()=>{T.value=!T.value,N()},ce=e=>{B.value=!0,G.value={x:e.clientX-I.value,y:e.clientY-v.value}},J=()=>{B.value=!1},re=e=>{var X;if(!((X=p.value)!=null&&X.scaledBoreholes))return;const n=p.value.getBoundingClientRect(),r=e.clientX-n.left,g=e.clientY-n.top;if(B.value){I.value=e.clientX-G.value.x,v.value=e.clientY-G.value.y,N();return}let h=null;for(const f of p.value.scaledBoreholes)if(Math.sqrt((r-f.canvasX)**2+(g-f.canvasY)**2)<12){h=f;break}F.value=h,V.value={x:e.clientX,y:e.clientY},p.value.style.cursor=h?"pointer":B.value?"grabbing":"grab"},de=e=>{const n=e.deltaY>0?.9:1.1;S.value=Math.max(.2,Math.min(5,S.value*n)),N()},ue=e=>{var X;if(!((X=p.value)!=null&&X.scaledBoreholes))return;const n=p.value.getBoundingClientRect(),r=e.clientX-n.left,g=e.clientY-n.top;let h=null;for(const f of p.value.scaledBoreholes)if(Math.sqrt((r-f.canvasX)**2+(g-f.canvasY)**2)<12){h=f.index;break}h!==null?(Y.value=h,Q("select",h)):Y.value=null,N()};return ke(()=>{N(),p.value&&(p.value.style.cursor="grab")}),Ye(()=>{}),pe(()=>L.boreholes,()=>{te()},{deep:!0}),pe(T,N),(e,n)=>{var r,g,h,X,f,m,w;return k(),C("div",Te,[t("div",Ne,[t("button",{class:"control-btn",onClick:ae,title:"æ”¾å¤§"},[...n[1]||(n[1]=[t("span",null,"+",-1)])]),t("button",{class:"control-btn",onClick:ne,title:"ç¼©å°"},[...n[2]||(n[2]=[t("span",null,"âˆ’",-1)])]),t("button",{class:"control-btn",onClick:te,title:"é‡ç½®"},[...n[3]||(n[3]=[t("span",null,"âŸ²",-1)])]),t("button",{class:E(["control-btn",{active:T.value}]),onClick:ie,title:"è¾¹ç•Œ"},[...n[4]||(n[4]=[t("span",null,"â¬¡",-1)])],2)]),t("div",{class:E(["map-wrapper",{dragging:B.value}])},[t("canvas",{ref_key:"canvas",ref:p,width:M.value,height:M.value,onMousedown:ce,onMousemove:re,onMouseup:J,onMouseleave:J,onWheel:H(de,["prevent"]),onClick:ue},null,40,Ie),O.boreholes.length===0?(k(),C("div",Le,[...n[5]||(n[5]=[t("div",{class:"empty-icon"},"ğŸ“",-1),t("p",null,"æš‚æ— é’»å­”æ•°æ®",-1)])])):P("",!0)],2),F.value?(k(),C("div",{key:0,class:"tooltip",style:Xe(se.value)},[t("div",Pe,[n[6]||(n[6]=t("span",{class:"tooltip-icon"},"ğŸ“",-1)),K(" "+x(F.value.name||`é’»å­” #${F.value.index+1}`),1)]),t("div",Ve,[n[7]||(n[7]=t("span",{class:"tooltip-label"},"X åæ ‡:",-1)),t("span",Re,x(F.value.x.toFixed(2))+" m",1)]),t("div",ze,[n[8]||(n[8]=t("span",{class:"tooltip-label"},"Y åæ ‡:",-1)),t("span",De,x(F.value.y.toFixed(2))+" m",1)])],4)):P("",!0),Y.value!==null?(k(),C("div",Oe,[n[9]||(n[9]=t("span",{class:"selection-icon"},"ğŸ¯",-1)),t("strong",null,x(((r=O.boreholes[Y.value])==null?void 0:r.name)||`é’»å­” #${Y.value+1}`),1),t("span",We,"("+x((h=(g=O.boreholes[Y.value])==null?void 0:g.x)==null?void 0:h.toFixed(1))+", "+x((f=(X=O.boreholes[Y.value])==null?void 0:X.y)==null?void 0:f.toFixed(1))+")",1),t("button",{class:"clear-btn",onClick:n[0]||(n[0]=s=>Y.value=null),title:"å–æ¶ˆé€‰æ‹©"},"Ã—")])):(k(),C("div",Ue,[t("span",Ae,"ğŸ“ "+x(O.boreholes.length)+" ä¸ªé’»å­”",1),R.value?(k(),C("span",je," ğŸ“ "+x((m=R.value.rangeX)==null?void 0:m.toFixed(0))+"m Ã— "+x((w=R.value.rangeY)==null?void 0:w.toFixed(0))+"m ",1)):P("",!0)]))])}}},Ee=be(He,[["__scopeId","data-v-8b1ba160"]]),Ge={class:"page"},Je={class:"grid grid-2"},qe={class:"card upload-card"},Ke={key:0,class:"file-list"},Qe={class:"file-list-header"},Ze={class:"file-items"},et={class:"file-name"},tt={class:"file-size"},lt=["onClick"],ot={class:"action-buttons"},st=["disabled"],at={key:0,class:"spinner sm"},nt=["disabled"],it={key:1,class:"result-box success"},ct={class:"result-content"},rt={class:"result-desc"},dt={key:2,class:"extracted-coords"},ut={class:"subsection-desc"},vt={class:"card upload-card"},ft={class:"tab-buttons"},pt={key:0,class:"coord-input"},ht={class:"coord-list"},mt={class:"coord-num"},yt=["onUpdate:modelValue"],xt=["onUpdate:modelValue"],gt=["onUpdate:modelValue"],bt=["onClick"],kt={class:"coord-actions"},Ct=["disabled"],wt={key:1,class:"coord-file"},_t={key:2,class:"coord-stats"},St={class:"stat-badge"},Yt={class:"stat-range"},Xt={key:0,class:"card preview-card"},Bt={class:"preview-header"},Mt={class:"section-desc"},$t={class:"preview-grid"},Ft={class:"map-section"},Tt={class:"table-section"},Nt={class:"table-header"},It={class:"table-wrapper"},Lt={class:"table compact"},Pt=["onClick"],Vt=["onClick"],Rt=["onClick"],zt={key:0,class:"table-empty"},Dt={key:1,class:"card"},Ot={__name:"DataImport",setup(O){const $=Me(),L=_(null),Q=_(null),p=_([]),F=_(!1),Y=_(!1),V=_(null),T=_("manual"),S=_(null),I=_(""),v=_([]),B=_([]),G=D(()=>v.value.length?Math.min(...v.value.map(s=>s.x)):null),M=D(()=>v.value.length?Math.max(...v.value.map(s=>s.x)):null),R=D(()=>v.value.length?Math.min(...v.value.map(s=>s.y)):null),se=D(()=>v.value.length?Math.max(...v.value.map(s=>s.y)):null),Z=D(()=>{if(!I.value)return v.value;const s=I.value.toLowerCase();return v.value.filter(l=>{var i,u;return l.name&&l.name.toLowerCase().includes(s)||((i=l.x)==null?void 0:i.toString().includes(s))||((u=l.y)==null?void 0:u.toString().includes(s))})});pe(S,s=>{});const U=()=>{try{const s=localStorage.getItem("borehole_coordinates");s&&(v.value=JSON.parse(s))}catch(s){console.error("Failed to load coordinates:",s)}},N=()=>{var s;(s=L.value)==null||s.click()},ee=()=>{var s;(s=Q.value)==null||s.click()},ae=s=>{const l=Array.from(s.target.files||[]).filter(i=>i.name.endsWith(".csv"));p.value=[...p.value,...l]},ne=s=>{F.value=!1;const l=Array.from(s.dataTransfer.files||[]).filter(i=>i.name.endsWith(".csv"));p.value=[...p.value,...l]},te=s=>{p.value.splice(s,1)},ie=()=>{p.value=[]},ce=s=>s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB",J=async()=>{B.value=[];const s=[];for(const l of p.value)try{const{data:i}=await Fe(l.name,100);if(i.data&&i.data.length>0){const u=Object.keys(i.data[0]).map(a=>a.toLowerCase()),o=Object.keys(i.data[0]).find(a=>a.toLowerCase().includes("x")||a==="åæ ‡x"||a==="xåæ ‡"),c=Object.keys(i.data[0]).find(a=>a.toLowerCase().includes("y")||a==="åæ ‡y"||a==="yåæ ‡"),y=Object.keys(i.data[0]).find(a=>a.toLowerCase().includes("name")||a.toLowerCase().includes("é’»å­”")||a==="é’»å­”å·"||a==="å­”å·");if(o&&c){const a=i.data[0],d=parseFloat(a[o]),b=parseFloat(a[c]);!isNaN(d)&&!isNaN(b)&&s.push({name:y?a[y]:l.name.replace(".csv",""),x:d,y:b,file:l.name})}}}catch(i){console.log("æ— æ³•ä»",l.name,"æå–åæ ‡:",i.message)}B.value=s},re=async()=>{var s,l;Y.value=!0;try{await $e(p.value);const{data:i}=await ge();V.value=i,$.add(`å·²ä¸Šä¼  ${p.value.length} ä¸ªæ–‡ä»¶`,"success"),await J()}catch(i){$.add(((l=(s=i.response)==null?void 0:s.data)==null?void 0:l.detail)||"ä¸Šä¼ å¤±è´¥","error")}finally{Y.value=!1}},de=async()=>{var s,l;Y.value=!0;try{const{data:i}=await ge();V.value=i,$.add("æ‰«æå®Œæˆ","success"),await J()}catch(i){$.add(((l=(s=i.response)==null?void 0:s.data)==null?void 0:l.detail)||"æ‰«æå¤±è´¥","error")}finally{Y.value=!1}},ue=()=>{B.value.length>0&&(v.value=[...B.value],f(),$.add(`å·²å¯¼å…¥ ${B.value.length} ä¸ªé’»å­”åæ ‡`,"success"),B.value=[])},e=s=>{var u;const l=(u=s.target.files)==null?void 0:u[0];if(!l)return;const i=new FileReader;i.onload=o=>{const c=o.target.result;n(c,l.name)},i.readAsText(l)},n=(s,l)=>{var i;try{let u=[];if(l.endsWith(".json"))u=JSON.parse(s);else{const o=s.split(`
`),c=o[0].toLowerCase().includes("name")||o[0].toLowerCase().includes("åç§°")?1:0;for(let y=c;y<o.length;y++){const a=o[y].trim();if(!a)continue;const d=a.split(/[,\t\s]+/);if(d.length>=3){const b=parseFloat(d[1]),z=parseFloat(d[2]);!isNaN(b)&&!isNaN(z)&&u.push({name:(i=d[0])==null?void 0:i.trim(),x:b,y:z})}}}u=u.filter(o=>!isNaN(o.x)&&!isNaN(o.y)),u.length>0?(v.value=u,f(),$.add(`å·²å¯¼å…¥ ${u.length} ä¸ªé’»å­”åæ ‡`,"success")):$.add("æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®","error")}catch{$.add("æ–‡ä»¶è§£æå¤±è´¥","error")}},r=()=>{v.value.push({name:`BH-${v.value.length+1}`,x:0,y:0})},g=s=>{v.value.splice(s,1),f(),S.value===s&&(S.value=null)},h=s=>{const l=v.value[s],i=prompt("é’»å­”åç§°:",l.name||""),u=prompt("X åæ ‡:",l.x),o=prompt("Y åæ ‡:",l.y);i!==null&&(l.name=i),u!==null&&!isNaN(parseFloat(u))&&(l.x=parseFloat(u)),o!==null&&!isNaN(parseFloat(o))&&(l.y=parseFloat(o)),f()},X=s=>{S.value=s},f=()=>{localStorage.setItem("borehole_coordinates",JSON.stringify(v.value)),$.add("åæ ‡å·²ä¿å­˜","success")},m=()=>{const l=`name,x,y
`+v.value.map(c=>`${c.name||""},${c.x},${c.y}`).join(`
`),i=new Blob([l],{type:"text/csv"}),u=URL.createObjectURL(i),o=document.createElement("a");o.href=u,o.download="borehole_coordinates.csv",o.click(),URL.revokeObjectURL(u),$.add("åæ ‡å·²å¯¼å‡º","success")},w=()=>{confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰åæ ‡å—ï¼Ÿ")&&(v.value=[],S.value=null,localStorage.removeItem("borehole_coordinates"),$.add("åæ ‡å·²æ¸…ç©º","success"))};return ke(()=>{U()}),(s,l)=>{var i,u,o,c,y;return k(),C("div",Ge,[t("div",Je,[t("div",qe,[l[11]||(l[11]=t("h3",{class:"section-title"},[t("svg",{class:"section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})]),K(" ä¸Šä¼ é’»å­”æ•°æ®æ–‡ä»¶ ")],-1)),l[12]||(l[12]=t("p",{class:"section-desc"},"ä¸Šä¼ åŒ…å«å²©æ€§å‚æ•°ï¼ˆå¼¹æ€§æ¨¡é‡ã€å®¹é‡ã€æŠ—æ‹‰å¼ºåº¦ã€åšåº¦ï¼‰çš„ CSV æ–‡ä»¶",-1)),t("div",{class:E(["upload-area",{"drag-over":F.value}]),onDrop:H(ne,["prevent"]),onDragover:l[0]||(l[0]=H(a=>F.value=!0,["prevent"])),onDragleave:l[1]||(l[1]=H(a=>F.value=!1,["prevent"])),onClick:N},[t("input",{ref_key:"fileInput",ref:L,type:"file",multiple:"",accept:".csv",onChange:ae,style:{display:"none"}},null,544),l[5]||(l[5]=A('<div class="upload-icon" data-v-f0dc7829><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-f0dc7829><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-f0dc7829></path><polyline points="14 2 14 8 20 8" data-v-f0dc7829></polyline><line x1="12" y1="18" x2="12" y2="12" data-v-f0dc7829></line><line x1="9" y1="15" x2="15" y2="15" data-v-f0dc7829></line></svg></div><p class="upload-text" data-v-f0dc7829>ç‚¹å‡»é€‰æ‹©æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p><p class="upload-hint" data-v-f0dc7829>æ”¯æŒ .csv æ ¼å¼ï¼Œå¯å¤šé€‰</p>',3))],34),p.value.length>0?(k(),C("div",Ke,[t("div",Qe,[t("span",null,"å·²é€‰æ‹© "+x(p.value.length)+" ä¸ªæ–‡ä»¶",1),t("button",{class:"text-btn",onClick:ie},"æ¸…ç©º")]),t("div",Ze,[(k(!0),C(ve,null,fe(p.value,(a,d)=>(k(),C("div",{key:d,class:"file-item"},[l[7]||(l[7]=t("svg",{class:"file-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),t("line",{x1:"9",y1:"21",x2:"9",y2:"9"})],-1)),t("span",et,x(a.name),1),t("span",tt,x(ce(a.size)),1),t("button",{class:"file-remove",onClick:b=>te(d)},[...l[6]||(l[6]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,lt)]))),128))])])):P("",!0),t("div",ot,[t("button",{class:"btn primary",onClick:re,disabled:Y.value||p.value.length===0},[Y.value?(k(),C("span",at)):P("",!0),K(" "+x(Y.value?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ æ•°æ®"),1)],8,st),t("button",{class:"btn secondary",onClick:de,disabled:Y.value}," æ‰«ææ–‡ä»¶ ",8,nt)]),V.value?(k(),C("div",it,[l[9]||(l[9]=t("div",{class:"result-icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"20 6 9 17 4 12"})])],-1)),t("div",ct,[l[8]||(l[8]=t("div",{class:"result-title"},"æ‰«æå®Œæˆ",-1)),t("div",rt,"æ£€æµ‹åˆ° "+x(((i=V.value.files)==null?void 0:i.length)||0)+" ä¸ª CSV æ–‡ä»¶",1)])])):P("",!0),B.value.length>0?(k(),C("div",dt,[l[10]||(l[10]=t("h4",{class:"subsection-title"},"ä»æ–‡ä»¶ä¸­æå–çš„åæ ‡",-1)),t("p",ut,"å‘ç° "+x(B.value.length)+" ä¸ªé’»å­”åŒ…å«åæ ‡ä¿¡æ¯",1),t("button",{class:"btn outline small",onClick:ue}," ä½¿ç”¨è¿™äº›åæ ‡ ")])):P("",!0)]),t("div",vt,[l[18]||(l[18]=A('<h3 class="section-title" data-v-f0dc7829><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f0dc7829><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" data-v-f0dc7829></path><circle cx="12" cy="10" r="3" data-v-f0dc7829></circle></svg> é’»å­”åæ ‡ </h3><p class="section-desc" data-v-f0dc7829>è®¾ç½®é’»å­”çš„å¹³é¢ä½ç½®åæ ‡ï¼ˆX, Yï¼‰</p>',2)),t("div",ft,[t("button",{class:E(["tab-btn",{active:T.value==="manual"}]),onClick:l[2]||(l[2]=a=>T.value="manual")}," æ‰‹åŠ¨è¾“å…¥ ",2),t("button",{class:E(["tab-btn",{active:T.value==="file"}]),onClick:l[3]||(l[3]=a=>T.value="file")}," æ–‡ä»¶ä¸Šä¼  ",2)]),T.value==="manual"?(k(),C("div",pt,[t("div",ht,[(k(!0),C(ve,null,fe(v.value,(a,d)=>(k(),C("div",{key:d,class:"coord-item"},[t("span",mt,"#"+x(d+1),1),le(t("input",{type:"text","onUpdate:modelValue":b=>a.name=b,placeholder:"åç§°",class:"coord-name-input"},null,8,yt),[[oe,a.name]]),le(t("input",{type:"number","onUpdate:modelValue":b=>a.x=b,placeholder:"X (m)",class:"coord-value-input"},null,8,xt),[[oe,a.x,void 0,{number:!0}]]),le(t("input",{type:"number","onUpdate:modelValue":b=>a.y=b,placeholder:"Y (m)",class:"coord-value-input"},null,8,gt),[[oe,a.y,void 0,{number:!0}]]),t("button",{class:"coord-remove",onClick:b=>g(d),title:"åˆ é™¤"},[...l[13]||(l[13]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,bt)]))),128))]),t("div",kt,[t("button",{class:"btn outline small",onClick:r}," + æ·»åŠ  "),t("button",{class:"btn primary small",onClick:f,disabled:Y.value||v.value.length===0}," ä¿å­˜åæ ‡ ",8,Ct)])])):(k(),C("div",wt,[t("div",{class:"upload-area compact",onClick:ee},[t("input",{ref_key:"coordInput",ref:Q,type:"file",accept:".csv,.json,.txt",onChange:e,style:{display:"none"}},null,544),l[14]||(l[14]=A('<div class="upload-icon" data-v-f0dc7829><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-f0dc7829><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" data-v-f0dc7829></path><circle cx="12" cy="10" r="3" data-v-f0dc7829></circle></svg></div><p class="upload-text" data-v-f0dc7829>ä¸Šä¼ åæ ‡æ–‡ä»¶</p><p class="upload-hint" data-v-f0dc7829>æ”¯æŒ CSV/JSON/TXT æ ¼å¼</p>',3))]),l[15]||(l[15]=t("div",{class:"coord-format-hint"},[t("strong",null,"CSV æ ¼å¼ç¤ºä¾‹ï¼š"),t("br"),t("code",null,"name,x,y"),t("br"),t("code",null,"ZK01,100,200")],-1))])),v.value.length>0?(k(),C("div",_t,[t("div",St,[l[16]||(l[16]=K(" å·²è®¾ç½® ",-1)),t("strong",null,x(v.value.length),1),l[17]||(l[17]=K(" ä¸ªé’»å­”åæ ‡ ",-1))]),t("div",Yt," èŒƒå›´: X "+x((u=G.value)==null?void 0:u.toFixed(0))+"~"+x((o=M.value)==null?void 0:o.toFixed(0))+"m, Y "+x((c=R.value)==null?void 0:c.toFixed(0))+"~"+x((y=se.value)==null?void 0:y.toFixed(0))+"m ",1)])):P("",!0)])]),v.value.length>0?(k(),C("div",Xt,[t("div",Bt,[t("div",null,[l[19]||(l[19]=A('<h3 class="section-title" data-v-f0dc7829><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f0dc7829><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6" data-v-f0dc7829></polygon><line x1="8" y1="2" x2="8" y2="18" data-v-f0dc7829></line><line x1="16" y1="6" x2="16" y2="22" data-v-f0dc7829></line></svg> é’»å­”ä½ç½®é¢„è§ˆ </h3>',1)),t("p",Mt,x(v.value.length)+" ä¸ªé’»å­” Â· å¯æ‹–æ‹½å¹³ç§» Â· æ»šè½®ç¼©æ”¾ Â· ç‚¹å‡»é€‰æ‹©",1)]),t("div",{class:"preview-actions"},[t("button",{class:"icon-btn",onClick:m,title:"å¯¼å‡ºåæ ‡"},[...l[20]||(l[20]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])]),t("button",{class:"icon-btn danger",onClick:w,title:"æ¸…ç©ºåæ ‡"},[...l[21]||(l[21]=[A('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f0dc7829><polyline points="3 6 5 6 21 6" data-v-f0dc7829></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-f0dc7829></path><line x1="10" y1="11" x2="10" y2="17" data-v-f0dc7829></line><line x1="14" y1="11" x2="14" y2="17" data-v-f0dc7829></line></svg>',1)])])])]),t("div",$t,[t("div",Ft,[Be(Ee,{boreholes:v.value,size:320,onSelect:X},null,8,["boreholes"])]),t("div",Tt,[t("div",Nt,[l[22]||(l[22]=t("h4",null,"åæ ‡åˆ—è¡¨",-1)),le(t("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>I.value=a),placeholder:"æœç´¢...",class:"search-input"},null,512),[[oe,I.value]])]),t("div",It,[t("table",Lt,[l[23]||(l[23]=t("thead",null,[t("tr",null,[t("th",null,"åºå·"),t("th",null,"åç§°"),t("th",null,"X (m)"),t("th",null,"Y (m)"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[(k(!0),C(ve,null,fe(Z.value,(a,d)=>{var b,z;return k(),C("tr",{key:d,class:E({selected:S.value===d}),onClick:q=>S.value=d},[t("td",null,x(d+1),1),t("td",null,x(a.name||`BH-${d+1}`),1),t("td",null,x(((b=a.x)==null?void 0:b.toFixed(1))||"-"),1),t("td",null,x(((z=a.y)==null?void 0:z.toFixed(1))||"-"),1),t("td",null,[t("button",{class:"table-btn",onClick:H(q=>h(d),["stop"])},"ç¼–è¾‘",8,Vt),t("button",{class:"table-btn danger",onClick:H(q=>g(d),["stop"])},"åˆ é™¤",8,Rt)])],10,Pt)}),128))])]),Z.value.length===0?(k(),C("div",zt," æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é’»å­” ")):P("",!0)])])])])):(k(),C("div",Dt,[...l[24]||(l[24]=[A('<div class="empty-state" data-v-f0dc7829><div class="empty-icon" data-v-f0dc7829><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-f0dc7829><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6" data-v-f0dc7829></polygon><line x1="8" y1="2" x2="8" y2="18" data-v-f0dc7829></line><line x1="16" y1="6" x2="16" y2="22" data-v-f0dc7829></line></svg></div><p data-v-f0dc7829>æš‚æ— é’»å­”ä½ç½®æ•°æ®</p><p class="empty-hint" data-v-f0dc7829>è¯·å…ˆä¸Šä¼ æ•°æ®æ–‡ä»¶æˆ–æ‰‹åŠ¨è¾“å…¥åæ ‡</p></div>',1)])]))])}}},At=be(Ot,[["__scopeId","data-v-f0dc7829"]]);export{At as default};
