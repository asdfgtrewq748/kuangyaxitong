const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataImport-KR5jEIW4.js","assets/vendor-CA5Q5CdR.js","assets/api-CfsGh-st.js","assets/network-T6nY3V_4.js","assets/vue-router-D9BXaJFq.js","assets/DataImport-DoPIg_lL.css","assets/Interpolation-BPiUgzA-.js","assets/Interpolation-CVvWzOrZ.css","assets/PressureIndex-CkyLv6aI.js","assets/HeatmapCanvas-Dck_bO8A.js","assets/HeatmapCanvas-G0XigWI_.css","assets/PressureIndex-B2MrqkgP.css","assets/MpiHeatmap-e8TkzuY4.js","assets/MpiHeatmap-Cu4RHxhn.css","assets/MpiHeatmapPro-DToZpC4r.js","assets/MpiHeatmapPro-CKjj8KPx.css","assets/MpiAlgorithm-DdjkyF9i.js","assets/MpiAlgorithm-Cw_NgX_8.css","assets/AcademicAlgorithm-DDvlCRnK.js","assets/echarts-CG3_94Cz.js","assets/echarts-Dy-VGqd_.js","assets/AcademicAlgorithm-BSForOJu.css","assets/AlgorithmValidation-BrBMZ74q.js","assets/AlgorithmValidation-CQw4HQlM.css","assets/ResearchPortal-CzmNvny5.js","assets/ResearchPortal-D-emC4Z2.css","assets/ResearchWorkbench-DRjZ-pFP.js","assets/ResearchWorkbench-CQmXZLk3.css","assets/Steps-gE2oztrV.js","assets/Steps-njgt18ve.css","assets/Report-BtNAwKL3.js","assets/Report-BKa8mOuT.css"])))=>i.map(i=>d[i]);
var ce=Object.defineProperty;var Q=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var Y=(n,t,a)=>t in n?ce(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,A=(n,t)=>{for(var a in t||(t={}))ue.call(t,a)&&Y(n,a,t[a]);if(Q)for(var a of Q(t))de.call(t,a)&&Y(n,a,t[a]);return n};import{b4 as te,b5 as _,b6 as H,b7 as r,b8 as h,b9 as T,ba as oe,bb as R,bc as x,bd as pe,b as B,w as me,r as fe,c as O,be as _e,bf as ve,bg as X,bh as he,u as S,bi as C,bj as Z,i as ge,bk as we}from"./vendor-CA5Q5CdR.js";import{u as be,a as ye,c as ke,b as Se}from"./vue-router-D9BXaJFq.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))w(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&w(s)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function w(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}})();const Oe={class:"toast-container"},Ee=["aria-live"],Me={class:"toast-icon"},Ae={class:"toast-content"},Re={__name:"Toast",setup(n,{expose:t}){const a=B([]);let w=0;const l=new Map,i=new Map,s=c=>{const d={success:"✓",error:"✕",warning:"⚠",info:"ℹ"};return d[c]||d.info},v=(c,d="info",p=3e3)=>{const b=++w,E={id:b,message:c,type:d,isExiting:!1};a.value=[...a.value,E].slice(-5);const M=setTimeout(()=>{m(b)},p);l.set(b,M)},m=c=>{const d=l.get(c);d&&(clearTimeout(d),l.delete(c));const p=a.value.find(b=>b.id===c);if(p){p.isExiting=!0;const b=setTimeout(()=>{a.value=a.value.filter(E=>E.id!==c),i.delete(c)},200);i.set(c,b)}};return te(()=>{for(const c of l.values())clearTimeout(c);for(const c of i.values())clearTimeout(c);l.clear(),i.clear()}),t({add:v}),(c,d)=>(_(),H(pe,{to:"body"},[r("div",Oe,[(_(!0),h(x,null,T(a.value,p=>(_(),h("div",{key:p.id,class:oe(["toast",p.type,p.isExiting&&"toast-exit"]),role:"alert","aria-live":p.type==="error"?"assertive":"polite"},[r("span",Me,R(s(p.type)),1),r("span",Ae,R(p.message),1)],10,Ee))),128))])]))}},ne="kuangya_workspace_flow_v1",Pe=120,N=["DataImport","Interpolation","AcademicAlgorithm","AlgorithmValidation","Report"],re=()=>({selectedSeam:"",updatedAt:"",steps:{DataImport:!1,Interpolation:!1,AcademicAlgorithm:!1,MpiAlgorithm:!1,PressureIndex:!1,AlgorithmValidation:!1,Report:!1},metrics:{boreholes:0,interpolationPoints:0,pressureReady:!1,validationReady:!1,reportGeneratedAt:""}}),g=fe(re());let I=null;const F=(n={})=>{const t=re();g.selectedSeam=typeof n.selectedSeam=="string"?n.selectedSeam:t.selectedSeam,g.updatedAt=typeof n.updatedAt=="string"?n.updatedAt:t.updatedAt,g.steps=A(A({},t.steps),n.steps||{}),g.metrics=A(A({},t.metrics),n.metrics||{})},Te=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{const n=localStorage.getItem(ne);if(!n)return;F(JSON.parse(n))}catch(n){F()}},xe=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{localStorage.setItem(ne,JSON.stringify(g))}catch(n){}},$e=()=>{I&&clearTimeout(I),I=setTimeout(()=>{I=null,xe()},Pe)},Le=(n,t=null)=>{Object.prototype.hasOwnProperty.call(g.steps,n)&&(g.steps[n]=!0,t&&typeof t=="object"&&(g.metrics=A(A({},g.metrics),t)),g.updatedAt=new Date().toISOString())},Ve=n=>{g.selectedSeam=typeof n=="string"?n:"",g.updatedAt=new Date().toISOString()},De=()=>{F(),g.updatedAt=new Date().toISOString()};Te();me(g,()=>{$e()},{deep:!0,flush:"post"});const Ce=O(()=>{const n=N.filter(t=>g.steps[t]).length;return Number((n/N.length).toFixed(2))}),Ie=()=>({flowOrder:N,workspaceState:g,completionRate:Ce,markStepDone:Le,setSelectedSeam:Ve,resetFlow:De}),Be=(n,t)=>{const a=n.__vccOpts||n;for(const[w,l]of t)a[w]=l;return a},je={class:"app-layout"},Ne={class:"sidebar"},Fe={class:"sidebar-nav"},He={class:"nav-icon","aria-hidden":"true"},ze={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},qe=["d"],Ue={class:"sr-only"},We={class:"main-content"},Ge={class:"content-wrapper"},Ke={key:0,class:"workflow-strip"},Je={class:"workflow-head"},Qe=["title","aria-label"],Ye={class:"workflow-rate"},Xe={class:"workflow-actions"},Ze=["title"],et=["title","aria-label"],tt={class:"workflow-track"},ot=["title","aria-label","onClick"],nt={class:"step-icon","aria-hidden":"true"},rt={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},at=["d"],st={class:"sr-only"},lt={key:0,class:"workflow-guard"},it=["title","aria-label"],ct={__name:"AppLayout",setup(n){var W,G,K,J;const t=be(),a=ye(),w=B(null),{flowOrder:l,workspaceState:i,completionRate:s,resetFlow:v}=Ie(),m=(J=(K=(G=(W=_e())==null?void 0:W.appContext)==null?void 0:G.config)==null?void 0:K.globalProperties)==null?void 0:J.$toast,c=O(()=>a.getRoutes().filter(o=>{var e,u;return((e=o.meta)==null?void 0:e.title)&&((u=o.meta)==null?void 0:u.nav)!==!1}).sort((o,e)=>{var u,k;return Number(((u=o.meta)==null?void 0:u.navOrder)||999)-Number(((k=e.meta)==null?void 0:k.navOrder)||999)})),d=O(()=>{const o=new Map(a.getRoutes().map(e=>[e.name,e]));return l.map(e=>o.get(e)).filter(Boolean)}),p=O(()=>String(t.name||"")),b=O(()=>i.selectedSeam?{seam:i.selectedSeam}:void 0),E=O(()=>{var o;return((o=t.meta)==null?void 0:o.workflow)!==!1}),M=o=>{var e;return!!((e=i.steps)!=null&&e[o])},P=O(()=>{if(d.value.length===0)return null;const o=d.value.findIndex(e=>e.name===p.value);if(o>=0){const e=d.value[o];if(!M(e.name))return e;for(let u=o+1;u<d.value.length;u+=1)if(!M(d.value[u].name))return d.value[u]}return d.value.find(e=>!M(e.name))||d.value[d.value.length-1]}),z=o=>{const e=d.value.findIndex(u=>u.name===o);return e<=0?null:d.value.find((u,k)=>k<e&&!M(u.name))||null},$=O(()=>{const o=p.value;if(!o)return null;const e=z(o);if(!e)return null;const u=d.value.find(k=>k.name===o);return u?{blockedBy:e,current:u}:null}),q=o=>{var u,k;if(!(o!=null&&o.name))return;const e=z(o.name);e&&((u=w.value)!=null&&u.add)&&w.value.add(`建议先完成：${((k=e.meta)==null?void 0:k.title)||e.name}`,"warning",2600),a.push({name:o.name,query:b.value})},se=()=>{var o;(o=P.value)!=null&&o.name&&a.push({name:P.value.name,query:b.value})},L=o=>{var e;return String(((e=o==null?void 0:o.meta)==null?void 0:e.title)||(o==null?void 0:o.name)||"导航")},le={upload:["M12 3v10","m8 9 4 4 4-4","M5 20h14"],chart:["M4 19h16","M7 15V9","M12 15V6","M17 15v-3"],bolt:["M13 2 4 14h6l-1 8 9-12h-6l1-8"],book:["M4 5a2 2 0 0 1 2-2h13v17H6a2 2 0 0 0-2 2V5z","M6 3v17"],flask:["M10 2v5l-5 8a4 4 0 0 0 3.4 6h7.2A4 4 0 0 0 19 15l-5-8V2","M9 11h6"],grid:["M4 4h7v7H4z","M13 4h7v7h-7z","M4 13h7v7H4z","M13 13h7v7h-7z"],report:["M7 3h8l4 4v14H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z","M15 3v5h5","M9 13h6","M9 17h4"]},U=o=>{var u;const e=String(((u=o==null?void 0:o.meta)==null?void 0:u.icon)||"").trim();return le[e]||["M5 12h14","M12 5v14"]};return ve(()=>{m&&typeof m=="object"&&(m.value=w.value)}),te(()=>{m&&typeof m=="object"&&(m.value=null)}),(o,e)=>{const u=X("router-link"),k=X("router-view");return _(),h("div",je,[r("aside",Ne,[e[2]||(e[2]=r("div",{class:"sidebar-logo"},"MPI",-1)),r("nav",Fe,[(_(!0),h(x,null,T(c.value,f=>(_(),H(u,{key:f.path,to:f.path,class:"nav-item",title:L(f),"aria-label":L(f),"data-title":L(f),"active-class":"active"},{default:he(()=>[r("span",He,[(_(),h("svg",ze,[(_(!0),h(x,null,T(U(f),(V,D)=>(_(),h("path",{key:D,d:V},null,8,qe))),128))]))]),r("span",Ue,R(L(f)),1)]),_:2},1032,["to","title","aria-label","data-title"]))),128))])]),r("main",We,[r("div",Ge,[E.value?(_(),h("section",Ke,[r("div",Je,[r("div",{class:"workflow-progress",title:`娴佺▼杩涘害 ${Math.round(S(s)*100)}%`,"aria-label":`娴佺▼杩涘害 ${Math.round(S(s)*100)}%`},[e[3]||(e[3]=r("span",{class:"progress-dot","aria-hidden":"true"},null,-1)),r("span",Ye,R(Math.round(S(s)*100))+"%",1)],8,Qe),r("div",Xe,[S(i).selectedSeam?(_(),h("span",{key:0,class:"workflow-seam",title:`褰撳墠鐓ゅ眰 ${S(i).selectedSeam}`},R(S(i).selectedSeam),9,Ze)):C("",!0),P.value?(_(),h("button",{key:1,type:"button",class:"workflow-btn icon",title:`鍓嶅線 ${P.value.meta.title}`,"aria-label":`鍓嶅線 ${P.value.meta.title}`,onClick:se},[...e[4]||(e[4]=[r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[r("path",{d:"M5 12h14"}),r("path",{d:"m13 5 7 7-7 7"})],-1),r("span",{class:"sr-only"},"鍓嶅線鎺ㄨ崘姝ラ",-1)])],8,et)):C("",!0),r("button",{type:"button",class:"workflow-btn icon ghost",title:"閲嶇疆娴佺▼","aria-label":"閲嶇疆娴佺▼",onClick:e[0]||(e[0]=(...f)=>S(v)&&S(v)(...f))},[...e[5]||(e[5]=[r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[r("path",{d:"M21 12a9 9 0 1 1-2.64-6.36"}),r("path",{d:"M21 3v6h-6"})],-1),r("span",{class:"sr-only"},"閲嶇疆娴佺▼",-1)])])])]),r("div",tt,[(_(!0),h(x,null,T(d.value,(f,V)=>(_(),h("button",{key:f.path,type:"button",class:oe(["workflow-step",{active:f.name===p.value,done:M(f.name)}]),title:`姝ラ ${V+1} 路 ${f.meta.title}`,"aria-label":`姝ラ ${V+1} 路 ${f.meta.title}`,onClick:D=>q(f)},[r("span",nt,[(_(),h("svg",rt,[(_(!0),h(x,null,T(U(f),(D,ie)=>(_(),h("path",{key:ie,d:D},null,8,at))),128))]))]),r("span",st,R(f.meta.title),1)],10,ot))),128))]),$.value?(_(),h("div",lt,[e[7]||(e[7]=r("div",{class:"workflow-guard-text"},[r("span",{class:"guard-dot","aria-hidden":"true"}),r("span",{class:"workflow-guard-label"},"流程保护已启用")],-1)),r("button",{type:"button",class:"workflow-btn guard icon",title:`鍓嶅線鍓嶇疆姝ラ ${$.value.blockedBy.meta.title}`,"aria-label":`鍓嶅線鍓嶇疆姝ラ ${$.value.blockedBy.meta.title}`,onClick:e[1]||(e[1]=f=>q($.value.blockedBy))},[...e[6]||(e[6]=[r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[r("path",{d:"M10 14 4 8l6-6"}),r("path",{d:"M20 20v-3a9 9 0 0 0-9-9H4"})],-1),r("span",{class:"sr-only"},"鍓嶅線鍓嶇疆姝ラ",-1)])],8,it)])):C("",!0)])):C("",!0),Z(k)])]),Z(Re,{ref_key:"toast",ref:w},null,512)])}}},ut=Be(ct,[["__scopeId","data-v-39fdefbc"]]),dt={__name:"App",setup(n){return(t,a)=>(_(),H(ut))}},pt="modulepreload",mt=function(n){return"/"+n},ee={},y=function(t,a,w){let l=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),v=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));l=Promise.allSettled(a.map(m=>{if(m=mt(m),m in ee)return;ee[m]=!0;const c=m.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":pt,c||(p.as="script"),p.crossOrigin="",p.href=m,v&&p.setAttribute("nonce",v),document.head.appendChild(p),c)return new Promise((b,E)=>{p.addEventListener("load",b),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(s){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=s,window.dispatchEvent(v),!v.defaultPrevented)throw s}return l.then(s=>{for(const v of s||[])v.status==="rejected"&&i(v.reason);return t().catch(i)})},ft=[{path:"/",redirect:"/algorithm-validation"},{path:"/data",name:"DataImport",component:()=>y(()=>import("./DataImport-KR5jEIW4.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{title:"数据导入",icon:"upload",navOrder:10,flowOrder:10}},{path:"/interpolation",name:"Interpolation",component:()=>y(()=>import("./Interpolation-BPiUgzA-.js"),__vite__mapDeps([6,1,4,2,3,7])),meta:{title:"插值分析",icon:"chart",navOrder:20,flowOrder:20}},{path:"/pressure",name:"PressureIndex",component:()=>y(()=>import("./PressureIndex-CkyLv6aI.js"),__vite__mapDeps([8,1,4,9,10,2,3,11])),meta:{title:"矿压指标",icon:"bar",nav:!1,legacy:!0}},{path:"/mpi-heatmap",name:"MpiHeatmap",component:()=>y(()=>import("./MpiHeatmap-e8TkzuY4.js"),__vite__mapDeps([12,1,2,3,4,13])),meta:{title:"MPI 热力图(旧版)",icon:"legacy",nav:!1,legacy:!0}},{path:"/mpi-heatmap-pro",name:"MpiHeatmapPro",component:()=>y(()=>import("./MpiHeatmapPro-DToZpC4r.js"),__vite__mapDeps([14,1,2,3,4,15])),meta:{title:"MPI 数值模拟",icon:"bolt",navOrder:40}},{path:"/mpi-algorithm",name:"MpiAlgorithm",component:()=>y(()=>import("./MpiAlgorithm-DdjkyF9i.js"),__vite__mapDeps([16,1,4,17])),meta:{title:"MPI 算法原理",icon:"box",nav:!1,legacy:!0}},{path:"/academic-algorithm",name:"AcademicAlgorithm",component:()=>y(()=>import("./AcademicAlgorithm-DDvlCRnK.js"),__vite__mapDeps([18,1,3,19,20,4,21])),meta:{title:"新算法原理",icon:"book",navOrder:30,flowOrder:30}},{path:"/algorithm-validation",name:"AlgorithmValidation",component:()=>y(()=>import("./AlgorithmValidation-BrBMZ74q.js"),__vite__mapDeps([22,1,4,2,3,19,20,23])),meta:{title:"新算法实证",icon:"flask",navOrder:50,flowOrder:40}},{path:"/research-portal",name:"ResearchPortal",component:()=>y(()=>import("./ResearchPortal-CzmNvny5.js"),__vite__mapDeps([24,1,4,2,3,25])),meta:{title:"Research Portal",icon:"book",navOrder:54,workflow:!1}},{path:"/research-workbench",name:"ResearchWorkbench",component:()=>y(()=>import("./ResearchWorkbench-DRjZ-pFP.js"),__vite__mapDeps([26,1,4,2,3,27])),meta:{title:"科研工作台",icon:"book",navOrder:55}},{path:"/steps",name:"Steps",component:()=>y(()=>import("./Steps-gE2oztrV.js"),__vite__mapDeps([28,1,9,10,2,3,4,29])),meta:{title:"来压步距",icon:"grid",navOrder:60}},{path:"/report",name:"Report",component:()=>y(()=>import("./Report-BtNAwKL3.js"),__vite__mapDeps([30,1,4,2,3,31])),meta:{title:"结果报告",icon:"report",navOrder:70,flowOrder:50}}],_t=ke({history:Se(),routes:ft}),ae=Symbol("toast");function vt(n){const t=B(null);return n.provide(ae,t),t}function yt(){const n=ge(ae,B(null)),t=(s,v="info",m=3e3)=>{var c;(c=n.value)==null||c.add(s,v,m)};return{add:t,success:s=>t(s,"success"),error:s=>t(s,"error"),warning:s=>t(s,"warning"),info:s=>t(s,"info")}}const j=we(dt);j.use(_t);const ht=vt(j);j.config.globalProperties.$toast=ht;j.mount("#app");export{Be as _,yt as a,y as b,Ie as u};
