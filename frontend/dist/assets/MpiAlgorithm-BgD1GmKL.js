const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/katex-XYJMzQOF.js","assets/katex-CBmFCdgC.css"])))=>i.map(i=>d[i]);
var D=(st,S,f)=>new Promise((W,O)=>{var u=k=>{try{l(f.next(k))}catch(B){O(B)}},o=k=>{try{l(f.throw(k))}catch(B){O(B)}},l=k=>k.done?W(k.value):Promise.resolve(k.value).then(u,o);l((f=f.apply(st,S)).next())});import{_ as It,b as Y,u as St}from"./index-DAAno9XI.js";import{bf as Rt,b8 as v,b7 as t,bq as G,br as $,bu as tt,bt as Pt,bo as Tt,bb as n,ba as P,bi as K,bn as T,bc as F,b9 as H,bs as lt,r as nt,b,c as h,b5 as p}from"./vendor-CcQzWQKD.js";import"./vue-router-4_hPxHr_.js";const Lt={class:"page mpi-algorithm-page"},$t={class:"page-header"},Ft={class:"header-actions"},Ht={class:"export-controls"},Bt={class:"export-toggle"},At=["disabled"],Ct={key:0,class:"export-status"},Et={key:1,class:"export-done"},Vt={key:2,class:"export-error"},Dt={key:3,class:"export-progress"},Ot={class:"card flow-card"},zt={class:"section-header flow-header"},Ut={class:"mode-tabs"},Zt={class:"flow-figure"},Nt=["src"],jt={class:"flow-steps"},Jt=["onMouseenter"],Gt={class:"step-index"},Kt={class:"step-content"},Wt={class:"card indicators-card"},Xt={class:"indicator-grid"},qt={class:"indicator-card"},Qt={class:"figure-block"},Yt=["src"],ts={class:"formula"},ss=["innerHTML"],es=["innerHTML"],as=["innerHTML"],is=["innerHTML"],ls={class:"indicator-card"},ns={class:"figure-block"},os=["src"],rs={class:"interactive-control"},ds={class:"control-header"},cs={class:"bri-sim-result"},us={class:"bri-value-bar"},vs={class:"bri-bar-track"},bs={class:"bri-value"},ps={class:"formula"},ms=["innerHTML"],hs=["innerHTML"],fs=["innerHTML"],_s=["innerHTML"],gs={class:"indicator-card"},ks={class:"figure-block"},xs=["src"],ys={class:"formula"},ws=["innerHTML"],Ms=["innerHTML"],Is=["innerHTML"],Ss={class:"asi-animation-container"},Rs={class:"stress-bars"},Ps={class:"card weight-card"},Ts={class:"weight-grid"},Ls={class:"weight-controls"},$s={class:"weight-label"},Fs={class:"weight-value"},Hs=["onUpdate:modelValue"],Bs={class:"weight-hint"},As={class:"weight-preview"},Cs={class:"stack-bar"},Es={class:"formula formula-inline"},Vs=["innerHTML"],Ds={class:"card example-card"},Os={class:"example-grid"},zs={class:"example-table"},Us={class:"sample-selector"},Zs=["onClick"],Ns={class:"example-result"},js={class:"result-value"},Js={class:"result-breakdown"},Gs={class:"card output-card"},Ks={class:"output-steps"},Ws={__name:"MpiAlgorithm",setup(st){let S=null,f=null;const{markStepDone:W}=St(),O=()=>D(this,null,function*(){if(f)return f;const e=yield Y(()=>import("./jszip-CsMIhXuR.js").then(s=>s.j),[]);if(f=(e==null?void 0:e.default)||(e==null?void 0:e.JSZip)||window.JSZip||null,!f)throw new Error("JSZip 加载失败");return f}),u=e=>{if(!S)return e;try{return S.renderToString(e,{throwOnError:!1,displayMode:!0,output:"html",strict:!1})}catch(s){return console.error("KaTeX render error:",s),e}},o={rsi:{main:"\\text{RSI} = \\min(\\text{RSI}_{\\text{norm}} + \\text{RSI}_{\\text{key}} + \\text{RSI}_{\\text{struct}}, 0, 100)",norm:"\\text{RSI}_{\\text{norm}} = \\min\\left(\\frac{\\bar{\\sigma_t}}{10}, 1\\right) \\times 40",key:"\\text{RSI}_{\\text{key}} = \\min(n_{\\text{key}} \\times 15, 30)",struct:"\\text{RSI}_{\\text{struct}} = (1 - r_{\\text{soft}}) \\times 40"},bri:{main:"\\text{BRI} = \\max(100 - P_{\\text{depth}} - P_{\\text{hard}} - P_{\\text{thick}}, 0)",depth:"P_{\\text{depth}} = \\min\\left(\\frac{H - H_{\\text{crit}}}{200}, 1\\right) \\times 40",hard:"P_{\\text{hard}} = \\min\\left(\\frac{E_{\\text{hard}}}{500}, 1\\right) \\times 30",thick:"P_{\\text{thick}} = \\min\\left(\\frac{h_{\\text{coal}}}{10}, 1\\right) \\times 30"},asi:{main:"\\text{ASI} = S_{\\text{stiff}} + S_{\\text{fric}}",stiff:"S_{\\text{stiff}} = \\min\\left(\\frac{\\bar{E}}{35} \\times 50, 50\\right)",fric:"S_{\\text{fric}} = \\max\\left(\\frac{\\bar{\\varphi} - 20}{25} \\times 50, 0\\right)"},mpi:"\\text{MPI} = w_r \\cdot \\text{RSI} + w_b \\cdot \\text{BRI} + w_a \\cdot \\text{ASI}"},l=nt({rsi:{main:"",norm:"",key:"",struct:""},bri:{main:"",depth:"",hard:"",thick:""},asi:{main:"",stiff:"",fric:""}});Rt(()=>D(this,null,function*(){W("MpiAlgorithm");try{const e=yield Y(()=>import("./katex-XYJMzQOF.js").then(s=>s.k),__vite__mapDeps([0,1]));S=e.default||e,yield Y(()=>import("./katex-XYJMzQOF.js").then(s=>s.a),__vite__mapDeps([0,1])),l.rsi.main=u(o.rsi.main),l.rsi.norm=u(o.rsi.norm),l.rsi.key=u(o.rsi.key),l.rsi.struct=u(o.rsi.struct),l.bri.main=u(o.bri.main),l.bri.depth=u(o.bri.depth),l.bri.hard=u(o.bri.hard),l.bri.thick=u(o.bri.thick),l.asi.main=u(o.asi.main),l.asi.stiff=u(o.asi.stiff),l.asi.fric=u(o.asi.fric)}catch(e){console.error("Failed to load KaTeX:",e),Object.keys(o).forEach(s=>{typeof o[s]=="string"||typeof o[s]=="object"&&Object.keys(o[s]).forEach(a=>{l[s][a]=o[s][a]})})}}));const k=e=>{if(!S)return e;try{return S.renderToString(e,{throwOnError:!1,displayMode:!1,output:"html",strict:!1})}catch(s){return console.error("KaTeX render error:",s),e}},B=[{key:"input",title:"数据输入",subtitle:"岩层参数 / 地质信息",detailTitle:"输入数据来源",detail:"包括钻孔岩性、煤层厚度、抗拉强度、采深等，所有参数可追踪到原始表格。"},{key:"sub",title:"子指标计算",subtitle:"RSI / BRI / ASI",detailTitle:"子指标输出",detail:"分别描述顶板稳定性、冲击风险与支承压力分布，便于解释与诊断。"},{key:"fusion",title:"权重融合",subtitle:"默认 0.4 / 0.35 / 0.25",detailTitle:"权重融合逻辑",detail:"通过权重加权得到综合 MPI，可根据矿区经验进行微调并记录。"},{key:"risk",title:"风险等级",subtitle:"低 / 中 / 高",detailTitle:"风险映射",detail:"将 MPI 数值划分为风险等级，支撑施工决策与预警。"},{key:"output",title:"图像输出",subtitle:"热力图 / 等值线",detailTitle:"可视化输出",detail:"生成高分辨率热力图与等值线，支持报告级导出。"}],et=b(0),x=b(!1),z=b("sub"),U=b("svg"),X=b("current"),q=b(!1),A=b(!1),L=b(0),_=b(""),C=b(""),E=b(!1),w=nt({rsi:.4,bri:.35,asi:.25}),Z=b(600),V=h(()=>{const e=Z.value,s=400,a=e>s?Math.min((e-s)/200,1)*40:0;return Math.min(Math.max(100-a-15-15,0),100)}),ot=h(()=>{const e=V.value;return e>=70?"low":e>=50?"medium":"high"}),rt=h(()=>{const e=V.value;return e>=70?"低风险":e>=50?"中风险":"高风险"}),dt=h(()=>{const e=V.value;return e>=70?"linear-gradient(90deg, #22c55e, #16a34a)":e>=50?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #ef4444, #dc2626)"}),ct=h(()=>{const e=[];for(let s=0;s<20;s++){const a=s/19;let i;a<.4?i=30+Math.random()*10:a<.6?i=30+(1-Math.abs(a-.5)/.1)*60+Math.random()*5:i=30+Math.exp(-(a-.6)*3)*30+Math.random()*10,e.push({height:Math.min(Math.max(i,10),95),color:i>70?"linear-gradient(180deg, #ef4444, #dc2626)":i>50?"linear-gradient(180deg, #f59e0b, #d97706)":"linear-gradient(180deg, #22c55e, #16a34a)",delay:s*.05})}return e}),ut=h(()=>50),vt=[{key:"rsi",label:"RSI 权重",default:"0.40"},{key:"bri",label:"BRI 权重",default:"0.35"},{key:"asi",label:"ASI 权重",default:"0.25"}],bt=h(()=>w.rsi+w.bri+w.asi),g=h(()=>{const e=bt.value||1;return{rsi:w.rsi/e,bri:w.bri/e,asi:w.asi/e}}),N=[{id:"a",name:"样例点 A（汇总表浅埋）",point:{burial_depth:86,thickness:6},strata:[{name:"岩层1",thickness:6,tensile_strength:2.3,compressive_strength:20.51,elastic_modulus:3,friction_angle:28},{name:"岩层2",thickness:1.5,tensile_strength:1.2,compressive_strength:14.32,elastic_modulus:9.8,friction_angle:17.5},{name:"岩层3",thickness:8,tensile_strength:4.5,compressive_strength:26.93,elastic_modulus:17,friction_angle:22.3},{name:"岩层4",thickness:12.5,tensile_strength:10.5,compressive_strength:35.36,elastic_modulus:28,friction_angle:20},{name:"岩层5",thickness:7,tensile_strength:3.6,compressive_strength:33.93,elastic_modulus:25,friction_angle:28}]},{id:"b",name:"样例点 B（汇总表深埋）",point:{burial_depth:967.7,thickness:5.9},strata:[{name:"岩层1",thickness:5.9,tensile_strength:2.4,compressive_strength:27,elastic_modulus:.5,friction_angle:42.6},{name:"岩层2",thickness:1.5,tensile_strength:4.7,compressive_strength:38.3,elastic_modulus:10.8,friction_angle:36},{name:"岩层3",thickness:15.7,tensile_strength:3.1,compressive_strength:32.8,elastic_modulus:9.3,friction_angle:38.8},{name:"岩层4",thickness:20,tensile_strength:2.1,compressive_strength:27,elastic_modulus:8.34,friction_angle:37.8},{name:"岩层5",thickness:46,tensile_strength:3.1,compressive_strength:27,elastic_modulus:9.3,friction_angle:38.8}]}],Q=b(N[0].id),j=h(()=>N.find(e=>e.id===Q.value)||N[0]),at=e=>e.filter(a=>a.compressive_strength>60&&a.thickness>5&&a.elastic_modulus/35>.8),pt=e=>{const s=e.slice(0,2),a=s.reduce((m,I)=>m+I.thickness,0),i=a>0?s.reduce((m,I)=>m+I.thickness*I.tensile_strength,0)/a:0,r=at(e),M=Math.min(r.length*15,30),d=e.reduce((m,I)=>m+I.thickness,0),J=(1-(d>0?e.filter(m=>m.compressive_strength<30).reduce((m,I)=>m+I.thickness,0)/d:0))*40,R=Math.min(i/10,1)*40;return Math.min(Math.max(R+M+J,0),100)},mt=(e,s)=>{const a=e.burial_depth||0,i=e.thickness||0,r=400,M=a>r?Math.min((a-r)/200,1)*40:0,d=s.filter(R=>R.compressive_strength>60).reduce((R,m)=>R+m.thickness*m.elastic_modulus,0),c=Math.min(d/500,1)*30,J=Math.min(i/10,1)*30;return Math.min(Math.max(100-M-c-J,0),100)},ht=e=>{const s=e.reduce((d,c)=>d+c.thickness,0);if(s===0)return 50;const a=e.reduce((d,c)=>d+c.elastic_modulus*c.thickness,0)/s,i=Math.min(a/35*50,50),r=e.reduce((d,c)=>d+c.friction_angle*c.thickness,0)/s,M=Math.max(Math.min((r-20)/25*50,50),0);return Math.min(Math.max(i+M,0),100)},y=h(()=>{const{point:e,strata:s}=j.value,a=pt(s),i=mt(e,s),r=ht(s);return{mpi:g.value.rsi*a+g.value.bri*i+g.value.asi*r,breakdown:{rsi:a,bri:i,asi:r}}}),it=h(()=>{const e=y.value.mpi;return e>=70?{label:"低风险",class:"low"}:e>=50?{label:"中风险",class:"medium"}:{label:"高风险",class:"high"}}),ft=h(()=>[{label:"埋深 (m)",value:j.value.point.burial_depth.toFixed(1)},{label:"煤层厚度 (m)",value:j.value.point.thickness.toFixed(1)},{label:"关键层数量",value:at(j.value.strata).length},{label:"RSI",value:y.value.breakdown.rsi.toFixed(2)},{label:"BRI",value:y.value.breakdown.bri.toFixed(2)},{label:"ASI",value:y.value.breakdown.asi.toFixed(2)},{label:"权重 (RSI/BRI/ASI)",value:`${g.value.rsi.toFixed(2)} / ${g.value.bri.toFixed(2)} / ${g.value.asi.toFixed(2)}`},{label:"MPI",value:y.value.mpi.toFixed(2)}]),_t=[{title:"1. 网格化",desc:"将采集点转换为规则网格，保障空间分辨率一致。"},{title:"2. 插值",desc:"采用 IDW/Linear/Nearest 等方法填补空缺区域。"},{title:"3. 颜色映射",desc:"按照风险等级与 ODI 色带映射颜色。"},{title:"4. 叠加标注",desc:"叠加等值线、坐标轴与关键点注记。"}],gt=e=>{e.forEach((s,a)=>{setTimeout(()=>{const i=document.createElement("a");i.href=`/mpi-algorithm/${s}`,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i)},a*200)})},kt=e=>{const s=U.value,i=e==="bw"?"_bw":"";return z.value==="sub"?[`flow_overview${i}.${s}`,`rsi_stability${i}.${s}`,`bri_depth_curve${i}.${s}`,`asi_stress_profile${i}.${s}`,`mpi_colorbar${i}.${s}`]:[`flow_overview${i}.${s}`,`rsi_stability${i}.${s}`,`bri_depth_curve${i}.${s}`,`asi_stress_profile${i}.${s}`,`mpi_colorbar${i}.${s}`]},xt=()=>{const s=new Date().toISOString().slice(0,10).replace(/-/g,"");return`kuangyaxitong-mpi-${z.value}-${U.value}-${s}.zip`},yt=e=>D(this,null,function*(){const s=yield O(),a=new s,i=a.folder("mpi-figures");let r=0;for(const c of e){const R=yield(yield fetch(`/mpi-algorithm/${c}`)).blob();i.file(c,R),r+=1,L.value=Math.round(r/e.length*80),_.value=`正在打包：${r}/${e.length}`}_.value="正在生成ZIP...";const M=yield a.generateAsync({type:"blob"},c=>{L.value=80+Math.round(c.percent*.2)}),d=document.createElement("a");d.href=URL.createObjectURL(M),d.download=xt(),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(d.href)}),wt=()=>D(this,null,function*(){A.value=!0,L.value=0,_.value="准备导出...",C.value="",E.value=!1;try{const s=(X.value==="both"?["color","bw"]:[x.value?"bw":"color"]).flatMap(a=>kt(a));q.value?yield yt(s):(_.value=`准备下载 ${s.length} 个文件...`,gt(s),L.value=100),_.value="导出完成",E.value=!0}catch(e){_.value="导出失败",C.value=`错误原因：${(e==null?void 0:e.message)||"未知错误"}`}finally{setTimeout(()=>{A.value=!1,_.value="",C.value="",L.value=0,E.value=!1},1200)}}),Mt=()=>{const e=["chrome://downloads/","edge://downloads/all","about:downloads"];let s=!1;for(const a of e)if(window.open(a,"_blank")){s=!0;break}s||(_.value="浏览器限制打开下载页，可用快捷键 Ctrl+J 查看下载记录。")};return(e,s)=>(p(),v("div",Lt,[t("div",$t,[s[11]||(s[11]=G('<div class="page-header-content" data-v-b6b53af5><div class="page-header-icon" data-v-b6b53af5><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b6b53af5><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" data-v-b6b53af5></path><path d="M8 12h8" data-v-b6b53af5></path><path d="M12 8v8" data-v-b6b53af5></path></svg></div><div data-v-b6b53af5><h1 class="page-title" data-v-b6b53af5>MPI 矿压影响指标算法原理</h1><p class="page-subtitle" data-v-b6b53af5>从岩层参数到空间分布的可解释指数，3-5 分钟快速理解</p></div></div>',1)),t("div",Ft,[t("div",Ht,[$(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>z.value=a),class:"param-select export-select"},[...s[7]||(s[7]=[t("option",{value:"sub"},"导出当前子图",-1),t("option",{value:"all"},"导出全部图（批量）",-1)])],512),[[tt,z.value]]),$(t("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>U.value=a),class:"param-select export-select"},[...s[8]||(s[8]=[t("option",{value:"svg"},"SVG",-1),t("option",{value:"png"},"PNG",-1)])],512),[[tt,U.value]]),$(t("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>X.value=a),class:"param-select export-select"},[...s[9]||(s[9]=[t("option",{value:"current"},"当前配色",-1),t("option",{value:"both"},"彩色+黑白",-1)])],512),[[tt,X.value]]),t("label",Bt,[$(t("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=a=>q.value=a)},null,512),[[Pt,q.value]]),s[10]||(s[10]=Tt(" 打包ZIP ",-1))]),t("button",{class:"btn ghost",disabled:A.value,onClick:wt},n(A.value?"导出中...":"开始导出"),9,At),t("button",{class:P(["btn ghost",{highlight:E.value}]),onClick:Mt},"打开下载记录",2)]),_.value?(p(),v("div",Ct,n(_.value),1)):K("",!0),E.value?(p(),v("div",Et,"导出完成，可查看下载记录。")):K("",!0),C.value?(p(),v("div",Vt,n(C.value),1)):K("",!0),A.value?(p(),v("div",Dt,[t("div",{class:"export-progress-bar",style:T({width:`${L.value}%`})},null,4)])):K("",!0)])]),s[43]||(s[43]=G('<section class="card overview-card" data-v-b6b53af5><div class="overview-text" data-v-b6b53af5><h2 data-v-b6b53af5>一句话总览</h2><p data-v-b6b53af5> MPI 将<strong data-v-b6b53af5>岩层参数</strong>转化为 RSI / BRI / ASI 三个子指标， 通过权重融合得到综合指数，并映射为<strong data-v-b6b53af5>空间风险等级</strong>热力图。 </p></div><div class="overview-badges" data-v-b6b53af5><span class="badge" data-v-b6b53af5>可解释</span><span class="badge" data-v-b6b53af5>可追踪</span><span class="badge" data-v-b6b53af5>可验证</span></div></section>',1)),t("section",Ot,[t("div",zt,[s[12]||(s[12]=t("div",null,[t("h2",null,"总体流程图"),t("p",null,"悬停查看每一步数据含义与输出说明")],-1)),t("div",Ut,[t("button",{class:P(["mode-tab",{active:!x.value}]),onClick:s[4]||(s[4]=a=>x.value=!1)},"彩色",2),t("button",{class:P(["mode-tab",{active:x.value}]),onClick:s[5]||(s[5]=a=>x.value=!0)},"黑白",2)])]),t("div",Zt,[t("img",{src:x.value?"/mpi-algorithm/flow_overview_bw.svg":"/mpi-algorithm/flow_overview.svg",alt:"MPI流程图",class:"flow-image",loading:"lazy",decoding:"async"},null,8,Nt),s[13]||(s[13]=t("p",{class:"figure-caption"},"图1 | MPI 计算流程示意",-1))]),t("div",jt,[(p(),v(F,null,H(B,(a,i)=>t("div",{key:a.key,class:P(["flow-step",{active:et.value===i}]),onMouseenter:r=>et.value=i},[t("div",Gt,n(i+1),1),t("div",Kt,[t("h3",null,n(a.title),1),t("p",null,n(a.subtitle),1)])],42,Jt)),64))])]),t("section",Wt,[s[33]||(s[33]=t("div",{class:"section-header"},[t("h2",null,"子指标模块"),t("p",null,"每个子指标都对应明确的输入参数与物理含义")],-1)),t("div",Xt,[t("div",qt,[s[16]||(s[16]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"RSI"),t("h3",null,"顶板稳定性")],-1)),s[17]||(s[17]=t("ul",null,[t("li",null,"输入：抗拉强度、关键层数量、岩层结构"),t("li",null,"含义：描述顶板破坏敏感性")],-1)),t("div",Qt,[t("img",{src:x.value?"/mpi-algorithm/rsi_stability_bw.svg":"/mpi-algorithm/rsi_stability.svg",alt:"RSI顶板稳定性示意",loading:"lazy",decoding:"async"},null,8,Yt),s[14]||(s[14]=t("span",null,"图2 | 顶板稳定性构成",-1))]),t("div",ts,[s[15]||(s[15]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.main},null,8,ss),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.norm},null,8,es),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.key},null,8,as),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.struct},null,8,is)]),s[18]||(s[18]=t("div",{class:"indicator-visual"},[t("div",{class:"visual-bar"},[t("span",null,"稳定性 ↑"),t("div",{class:"bar-track"},[t("div",{class:"bar-fill",style:{width:"72%"}})])])],-1))]),t("div",ls,[s[23]||(s[23]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"BRI"),t("h3",null,"冲击地压风险")],-1)),s[24]||(s[24]=t("ul",null,[t("li",null,"输入：采深、硬厚岩层、煤层厚度"),t("li",null,"含义：描述深度与硬层带来的能量积累")],-1)),t("div",ns,[t("img",{src:x.value?"/mpi-algorithm/bri_depth_curve_bw.svg":"/mpi-algorithm/bri_depth_curve.svg",alt:"BRI采深影响曲线",loading:"lazy",decoding:"async"},null,8,os),s[19]||(s[19]=t("span",null,"图3 | 采深影响曲线",-1))]),t("div",rs,[t("div",ds,[s[20]||(s[20]=t("span",{class:"control-label"},"采深模拟",-1)),t("span",{class:P(["control-value",ot.value])},n(Z.value)+"m ("+n(rt.value)+")",3)]),$(t("input",{type:"range",min:"0",max:"1200",step:"10","onUpdate:modelValue":s[6]||(s[6]=a=>Z.value=a),class:"depth-slider"},null,512),[[lt,Z.value,void 0,{number:!0}]]),s[21]||(s[21]=t("div",{class:"depth-labels"},[t("span",null,"0m"),t("span",null,"400m"),t("span",null,"800m"),t("span",null,"1200m")],-1)),t("div",cs,[t("div",us,[t("div",vs,[t("div",{class:"bri-bar-fill",style:T({width:V.value+"%",background:dt.value})},null,4)]),t("span",bs,"BRI = "+n(V.value.toFixed(1)),1)])])]),t("div",ps,[s[22]||(s[22]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.main},null,8,ms),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.depth},null,8,hs),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.hard},null,8,fs),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.thick},null,8,_s)]),s[25]||(s[25]=t("div",{class:"indicator-visual"},[t("div",{class:"visual-line"},[t("span",null,"深度 ↑ 风险 ↑"),t("div",{class:"line-track"})])],-1))]),t("div",gs,[s[31]||(s[31]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"ASI"),t("h3",null,"支承压力分布")],-1)),s[32]||(s[32]=t("ul",null,[t("li",null,"输入：综合刚度、内摩擦角"),t("li",null,"含义：描述应力传递与集中程度")],-1)),t("div",ks,[t("img",{src:x.value?"/mpi-algorithm/asi_stress_profile_bw.svg":"/mpi-algorithm/asi_stress_profile.svg",alt:"ASI应力传递示意",loading:"lazy",decoding:"async"},null,8,xs),s[26]||(s[26]=t("span",null,"图4 | 应力传递剖面",-1))]),t("div",ys,[s[27]||(s[27]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.main},null,8,ws),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.stiff},null,8,Ms),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.fric},null,8,Is)]),t("div",Ss,[s[29]||(s[29]=t("div",{class:"asi-label"},"应力传递模拟",-1)),t("div",Rs,[(p(!0),v(F,null,H(ct.value,(a,i)=>(p(),v("div",{key:i,class:"stress-bar",style:T({height:a.height+"%",background:a.color,animationDelay:a.delay+"s"})},null,4))),128))]),s[30]||(s[30]=t("div",{class:"stress-labels"},[t("span",null,"采空区"),t("span",null,"煤壁"),t("span",null,"前方")],-1)),t("div",{class:"peak-indicator",style:T({left:ut.value+"%"})},[...s[28]||(s[28]=[t("div",{class:"peak-arrow"},"↑",-1),t("div",{class:"peak-label"},"峰值",-1)])],4)])])])]),t("section",Ps,[s[36]||(s[36]=t("div",{class:"section-header"},[t("h2",null,"权重解释区"),t("p",null,"拖动滑块模拟权重变化对 MPI 的影响")],-1)),t("div",Ts,[t("div",Ls,[(p(),v(F,null,H(vt,a=>t("div",{class:"weight-item",key:a.key},[t("div",$s,[t("span",null,n(a.label),1),t("span",Fs,n((g.value[a.key]*100).toFixed(1))+"%",1)]),$(t("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":i=>w[a.key]=i},null,8,Hs),[[lt,w[a.key],void 0,{number:!0}]]),t("div",Bs,"默认："+n(a.default),1)])),64))]),t("div",As,[t("div",Cs,[t("div",{class:"stack-segment rsi",style:T({width:g.value.rsi*100+"%"})},null,4),t("div",{class:"stack-segment bri",style:T({width:g.value.bri*100+"%"})},null,4),t("div",{class:"stack-segment asi",style:T({width:g.value.asi*100+"%"})},null,4)]),s[35]||(s[35]=G('<div class="stack-legend" data-v-b6b53af5><span data-v-b6b53af5><i class="dot rsi" data-v-b6b53af5></i>RSI</span><span data-v-b6b53af5><i class="dot bri" data-v-b6b53af5></i>BRI</span><span data-v-b6b53af5><i class="dot asi" data-v-b6b53af5></i>ASI</span></div><div class="weight-note" data-v-b6b53af5> 默认权重来源于专家经验与历史样本拟合，可在后续版本中开放自定义策略。 </div>',2)),t("div",Es,[s[34]||(s[34]=t("div",{class:"formula-title"},"MPI融合公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:k(o.mpi)},null,8,Vs)])])])]),s[44]||(s[44]=G('<section class="card risk-card" data-v-b6b53af5><div class="section-header" data-v-b6b53af5><h2 data-v-b6b53af5>风险等级与决策解释</h2><p data-v-b6b53af5>MPI 值越高表示稳定性越好，风险越低</p></div><div class="risk-grid" data-v-b6b53af5><div class="risk-level" data-v-b6b53af5><span class="level high" data-v-b6b53af5>高风险</span><p data-v-b6b53af5>MPI &lt; 50，建议加强支护与监测</p></div><div class="risk-level" data-v-b6b53af5><span class="level medium" data-v-b6b53af5>中风险</span><p data-v-b6b53af5>50 ≤ MPI &lt; 70，建议适度优化施工参数</p></div><div class="risk-level" data-v-b6b53af5><span class="level low" data-v-b6b53af5>低风险</span><p data-v-b6b53af5>MPI ≥ 70，施工条件相对稳定</p></div></div></section>',1)),t("section",Ds,[s[40]||(s[40]=t("div",{class:"section-header"},[t("h2",null,"示例演算"),t("p",null,"选择真实样点做可追踪演算，增强可信度")],-1)),t("div",Os,[t("div",zs,[t("div",Us,[(p(),v(F,null,H(N,a=>t("button",{key:a.id,class:P(["sample-btn",{active:Q.value===a.id}]),onClick:i=>Q.value=a.id},n(a.name),11,Zs)),64))]),s[37]||(s[37]=t("div",{class:"table-row header"},[t("span",null,"参数"),t("span",null,"示例值")],-1)),(p(!0),v(F,null,H(ft.value,a=>(p(),v("div",{class:"table-row",key:a.label},[t("span",null,n(a.label),1),t("span",null,n(a.value),1)]))),128))]),t("div",Ns,[s[38]||(s[38]=t("div",{class:"result-title"},"综合 MPI",-1)),t("div",js,n(y.value.mpi.toFixed(2)),1),t("div",{class:P(["result-level",it.value.class])},n(it.value.label),3),t("div",Js,[t("span",null,"RSI: "+n(y.value.breakdown.rsi.toFixed(2)),1),t("span",null,"BRI: "+n(y.value.breakdown.bri.toFixed(2)),1),t("span",null,"ASI: "+n(y.value.breakdown.asi.toFixed(2)),1)]),s[39]||(s[39]=t("div",{class:"result-desc"},"基于 MPI 设计文档公式的实时演算",-1))])])]),t("section",Gs,[s[41]||(s[41]=t("div",{class:"section-header"},[t("h2",null,"图像生成逻辑"),t("p",null,"说明 MPI 网格与可视化映射流程")],-1)),t("div",Ks,[(p(),v(F,null,H(_t,a=>t("div",{class:"output-step",key:a.title},[t("h3",null,n(a.title),1),t("p",null,n(a.desc),1)])),64))]),s[42]||(s[42]=t("div",{class:"output-note"}," 颜色映射采用 ODI 色带标准，支持 SVG + PNG 高分辨率输出。 ",-1))])]))}},te=It(Ws,[["__scopeId","data-v-b6b53af5"]]);export{te as default};
