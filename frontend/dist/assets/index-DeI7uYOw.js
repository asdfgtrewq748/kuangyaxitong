const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataImport-DNQcbDBD.js","assets/vendor-DlrH7ZQK.js","assets/api-C8NVcaPd.js","assets/network-T6nY3V_4.js","assets/vue-router-u9NpsLKd.js","assets/DataImport-DoPIg_lL.css","assets/Interpolation-Bvp54HD_.js","assets/Interpolation-BDIivew2.css","assets/PressureIndex-DJyX0W3v.js","assets/HeatmapCanvas-_7KIeDrv.js","assets/HeatmapCanvas-Dq-aWP-_.css","assets/PressureIndex-B2MrqkgP.css","assets/MpiHeatmap-CK1aABr0.js","assets/MpiHeatmap-Cu4RHxhn.css","assets/MpiHeatmapPro-WtyWBK24.js","assets/MpiHeatmapPro-DH4D6P5v.css","assets/MpiAlgorithm-D4vnNyBw.js","assets/MpiAlgorithm-Cw_NgX_8.css","assets/AcademicAlgorithm-V9P9lgEA.js","assets/echarts-CCVEhGZA.js","assets/echarts-MQkWDA8w.js","assets/AcademicAlgorithm-BSForOJu.css","assets/AlgorithmValidation-DZnmH4FT.js","assets/AlgorithmValidation-BrIIU1Hx.css","assets/ResearchPortal-DCUXPciW.js","assets/ResearchPortal-D-emC4Z2.css","assets/ResearchWorkbench-Bd-Uq71W.js","assets/ResearchWorkbench-BoEp7ty0.css","assets/GeoMpiStudio-B5TQ19d2.js","assets/GeoMpiStudio-B-SuIb2w.css","assets/Steps-DHkdA303.js","assets/Steps-Dh0CkD9K.css","assets/Report-D79rck0q.js","assets/Report-C7dtnixH.css","assets/GeomodelVisualization-IbMDmnSH.js","assets/AsyncState-D2kxFDYv.js","assets/AsyncState-CK2xAPOI.css","assets/GeomodelVisualization-DC9ETSQN.css","assets/Scene3DPage-riOC_bEL.js","assets/Scene3DPage-ZXlgX1pA.css"])))=>i.map(i=>d[i]);
var ce=Object.defineProperty;var Q=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var Y=(n,t,r)=>t in n?ce(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,M=(n,t)=>{for(var r in t||(t={}))ue.call(t,r)&&Y(n,r,t[r]);if(Q)for(var r of Q(t))de.call(t,r)&&Y(n,r,t[r]);return n};import{b4 as te,b5 as _,b6 as z,b7 as a,b8 as h,b9 as T,ba as oe,bb as R,bc as V,bd as pe,b as B,w as me,r as fe,c as S,be as _e,bf as ve,bg as X,bh as he,u as O,bi as I,bj as Z,i as ge,bk as we}from"./vendor-DlrH7ZQK.js";import{u as be,a as ye,c as ke,b as Oe}from"./vue-router-u9NpsLKd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))b(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&b(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function b(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();const Se={class:"toast-container"},Ee=["aria-live"],Ae={class:"toast-icon"},Me={class:"toast-content"},Re={__name:"Toast",setup(n,{expose:t}){const r=B([]);let b=0;const i=new Map,l=new Map,s=c=>{const d={success:"✓",error:"✕",warning:"⚠",info:"ℹ"};return d[c]||d.info},v=(c,d="info",p=3e3)=>{const y=++b,E={id:y,message:c,type:d,isExiting:!1};r.value=[...r.value,E].slice(-5);const A=setTimeout(()=>{m(y)},p);i.set(y,A)},m=c=>{const d=i.get(c);d&&(clearTimeout(d),i.delete(c));const p=r.value.find(y=>y.id===c);if(p){p.isExiting=!0;const y=setTimeout(()=>{r.value=r.value.filter(E=>E.id!==c),l.delete(c)},200);l.set(c,y)}};return te(()=>{for(const c of i.values())clearTimeout(c);for(const c of l.values())clearTimeout(c);i.clear(),l.clear()}),t({add:v}),(c,d)=>(_(),z(pe,{to:"body"},[a("div",Se,[(_(!0),h(V,null,T(r.value,p=>(_(),h("div",{key:p.id,class:oe(["toast",p.type,p.isExiting&&"toast-exit"]),role:"alert","aria-live":p.type==="error"?"assertive":"polite"},[a("span",Ae,R(s(p.type)),1),a("span",Me,R(p.message),1)],10,Ee))),128))])]))}},ne="kuangya_workspace_flow_v1",Pe=120,N=["DataImport","Interpolation","AcademicAlgorithm","AlgorithmValidation","Report"],ae=()=>({selectedSeam:"",updatedAt:"",steps:{DataImport:!1,Interpolation:!1,AcademicAlgorithm:!1,MpiAlgorithm:!1,PressureIndex:!1,AlgorithmValidation:!1,Report:!1},metrics:{boreholes:0,interpolationPoints:0,pressureReady:!1,validationReady:!1,reportGeneratedAt:""}}),g=fe(ae());let C=null;const F=(n={})=>{const t=ae();g.selectedSeam=typeof n.selectedSeam=="string"?n.selectedSeam:t.selectedSeam,g.updatedAt=typeof n.updatedAt=="string"?n.updatedAt:t.updatedAt,g.steps=M(M({},t.steps),n.steps||{}),g.metrics=M(M({},t.metrics),n.metrics||{})},Te=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{const n=localStorage.getItem(ne);if(!n)return;F(JSON.parse(n))}catch(n){F()}},Ve=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{localStorage.setItem(ne,JSON.stringify(g))}catch(n){}},xe=()=>{C&&clearTimeout(C),C=setTimeout(()=>{C=null,Ve()},Pe)},De=(n,t=null)=>{Object.prototype.hasOwnProperty.call(g.steps,n)&&(g.steps[n]=!0,t&&typeof t=="object"&&(g.metrics=M(M({},g.metrics),t)),g.updatedAt=new Date().toISOString())},Le=n=>{g.selectedSeam=typeof n=="string"?n:"",g.updatedAt=new Date().toISOString()},$e=()=>{F(),g.updatedAt=new Date().toISOString()};Te();me(g,()=>{xe()},{deep:!0,flush:"post"});const Ie=S(()=>{const n=N.filter(t=>g.steps[t]).length;return Number((n/N.length).toFixed(2))}),Ce=()=>({flowOrder:N,workspaceState:g,completionRate:Ie,markStepDone:De,setSelectedSeam:Le,resetFlow:$e}),Be=(n,t)=>{const r=n.__vccOpts||n;for(const[b,i]of t)r[b]=i;return r},je={class:"app-layout"},Ne={class:"sidebar"},Fe={class:"sidebar-nav"},ze={class:"nav-icon","aria-hidden":"true"},He={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},qe=["d"],Ge={class:"sr-only"},Ue={class:"main-content"},We={class:"content-wrapper"},Ke={key:0,class:"workflow-strip"},Je={class:"workflow-head"},Qe=["title","aria-label"],Ye={class:"workflow-rate"},Xe={class:"workflow-actions"},Ze=["title"],et=["title","aria-label"],tt={class:"workflow-track"},ot=["title","aria-label","onClick"],nt={class:"step-icon","aria-hidden":"true"},at={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},rt=["d"],st={class:"sr-only"},it={key:0,class:"workflow-guard"},lt=["title","aria-label"],ct={__name:"AppLayout",setup(n){var U,W,K,J;const t=be(),r=ye(),b=B(null),{flowOrder:i,workspaceState:l,completionRate:s,resetFlow:v}=Ce(),m=(J=(K=(W=(U=_e())==null?void 0:U.appContext)==null?void 0:W.config)==null?void 0:K.globalProperties)==null?void 0:J.$toast,c=S(()=>r.getRoutes().filter(o=>{var e,u;return((e=o.meta)==null?void 0:e.title)&&((u=o.meta)==null?void 0:u.nav)!==!1}).sort((o,e)=>{var u,k;return Number(((u=o.meta)==null?void 0:u.navOrder)||999)-Number(((k=e.meta)==null?void 0:k.navOrder)||999)})),d=S(()=>{const o=new Map(r.getRoutes().map(e=>[e.name,e]));return i.map(e=>o.get(e)).filter(Boolean)}),p=S(()=>String(t.name||"")),y=S(()=>l.selectedSeam?{seam:l.selectedSeam}:void 0),E=S(()=>{var o;return((o=t.meta)==null?void 0:o.workflow)!==!1}),A=o=>{var e;return!!((e=l.steps)!=null&&e[o])},P=S(()=>{if(d.value.length===0)return null;const o=d.value.findIndex(e=>e.name===p.value);if(o>=0){const e=d.value[o];if(!A(e.name))return e;for(let u=o+1;u<d.value.length;u+=1)if(!A(d.value[u].name))return d.value[u]}return d.value.find(e=>!A(e.name))||d.value[d.value.length-1]}),H=o=>{const e=d.value.findIndex(u=>u.name===o);return e<=0?null:d.value.find((u,k)=>k<e&&!A(u.name))||null},x=S(()=>{const o=p.value;if(!o)return null;const e=H(o);if(!e)return null;const u=d.value.find(k=>k.name===o);return u?{blockedBy:e,current:u}:null}),q=o=>{var u,k;if(!(o!=null&&o.name))return;const e=H(o.name);e&&((u=b.value)!=null&&u.add)&&b.value.add(`建议先完成：${((k=e.meta)==null?void 0:k.title)||e.name}`,"warning",2600),r.push({name:o.name,query:y.value})},se=()=>{var o;(o=P.value)!=null&&o.name&&r.push({name:P.value.name,query:y.value})},D=o=>{var e;return String(((e=o==null?void 0:o.meta)==null?void 0:e.title)||(o==null?void 0:o.name)||"导航")},ie={upload:["M12 3v10","m8 9 4 4 4-4","M5 20h14"],chart:["M4 19h16","M7 15V9","M12 15V6","M17 15v-3"],bolt:["M13 2 4 14h6l-1 8 9-12h-6l1-8"],book:["M4 5a2 2 0 0 1 2-2h13v17H6a2 2 0 0 0-2 2V5z","M6 3v17"],flask:["M10 2v5l-5 8a4 4 0 0 0 3.4 6h7.2A4 4 0 0 0 19 15l-5-8V2","M9 11h6"],grid:["M4 4h7v7H4z","M13 4h7v7h-7z","M4 13h7v7H4z","M13 13h7v7h-7z"],report:["M7 3h8l4 4v14H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z","M15 3v5h5","M9 13h6","M9 17h4"]},G=o=>{var u;const e=String(((u=o==null?void 0:o.meta)==null?void 0:u.icon)||"").trim();return ie[e]||["M5 12h14","M12 5v14"]};return ve(()=>{m&&typeof m=="object"&&(m.value=b.value)}),te(()=>{m&&typeof m=="object"&&(m.value=null)}),(o,e)=>{const u=X("router-link"),k=X("router-view");return _(),h("div",je,[a("aside",Ne,[e[2]||(e[2]=a("div",{class:"sidebar-logo"},"MPI",-1)),a("nav",Fe,[(_(!0),h(V,null,T(c.value,f=>(_(),z(u,{key:f.path,to:f.path,class:"nav-item",title:D(f),"aria-label":D(f),"data-title":D(f),"active-class":"active"},{default:he(()=>[a("span",ze,[(_(),h("svg",He,[(_(!0),h(V,null,T(G(f),(L,$)=>(_(),h("path",{key:$,d:L},null,8,qe))),128))]))]),a("span",Ge,R(D(f)),1)]),_:2},1032,["to","title","aria-label","data-title"]))),128))])]),a("main",Ue,[a("div",We,[E.value?(_(),h("section",Ke,[a("div",Je,[a("div",{class:"workflow-progress",title:`娴佺▼杩涘害 ${Math.round(O(s)*100)}%`,"aria-label":`娴佺▼杩涘害 ${Math.round(O(s)*100)}%`},[e[3]||(e[3]=a("span",{class:"progress-dot","aria-hidden":"true"},null,-1)),a("span",Ye,R(Math.round(O(s)*100))+"%",1)],8,Qe),a("div",Xe,[O(l).selectedSeam?(_(),h("span",{key:0,class:"workflow-seam",title:`褰撳墠鐓ゅ眰 ${O(l).selectedSeam}`},R(O(l).selectedSeam),9,Ze)):I("",!0),P.value?(_(),h("button",{key:1,type:"button",class:"workflow-btn icon",title:`鍓嶅線 ${P.value.meta.title}`,"aria-label":`鍓嶅線 ${P.value.meta.title}`,onClick:se},[...e[4]||(e[4]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M5 12h14"}),a("path",{d:"m13 5 7 7-7 7"})],-1),a("span",{class:"sr-only"},"鍓嶅線鎺ㄨ崘姝ラ",-1)])],8,et)):I("",!0),a("button",{type:"button",class:"workflow-btn icon ghost",title:"閲嶇疆娴佺▼","aria-label":"閲嶇疆娴佺▼",onClick:e[0]||(e[0]=(...f)=>O(v)&&O(v)(...f))},[...e[5]||(e[5]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M21 12a9 9 0 1 1-2.64-6.36"}),a("path",{d:"M21 3v6h-6"})],-1),a("span",{class:"sr-only"},"閲嶇疆娴佺▼",-1)])])])]),a("div",tt,[(_(!0),h(V,null,T(d.value,(f,L)=>(_(),h("button",{key:f.path,type:"button",class:oe(["workflow-step",{active:f.name===p.value,done:A(f.name)}]),title:`姝ラ ${L+1} 路 ${f.meta.title}`,"aria-label":`姝ラ ${L+1} 路 ${f.meta.title}`,onClick:$=>q(f)},[a("span",nt,[(_(),h("svg",at,[(_(!0),h(V,null,T(G(f),($,le)=>(_(),h("path",{key:le,d:$},null,8,rt))),128))]))]),a("span",st,R(f.meta.title),1)],10,ot))),128))]),x.value?(_(),h("div",it,[e[7]||(e[7]=a("div",{class:"workflow-guard-text"},[a("span",{class:"guard-dot","aria-hidden":"true"}),a("span",{class:"workflow-guard-label"},"流程保护已启用")],-1)),a("button",{type:"button",class:"workflow-btn guard icon",title:`鍓嶅線鍓嶇疆姝ラ ${x.value.blockedBy.meta.title}`,"aria-label":`鍓嶅線鍓嶇疆姝ラ ${x.value.blockedBy.meta.title}`,onClick:e[1]||(e[1]=f=>q(x.value.blockedBy))},[...e[6]||(e[6]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M10 14 4 8l6-6"}),a("path",{d:"M20 20v-3a9 9 0 0 0-9-9H4"})],-1),a("span",{class:"sr-only"},"鍓嶅線鍓嶇疆姝ラ",-1)])],8,lt)])):I("",!0)])):I("",!0),Z(k)])]),Z(Re,{ref_key:"toast",ref:b},null,512)])}}},ut=Be(ct,[["__scopeId","data-v-39fdefbc"]]),dt={__name:"App",setup(n){return(t,r)=>(_(),z(ut))}},pt="modulepreload",mt=function(n){return"/"+n},ee={},w=function(t,r,b){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),v=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(m=>{if(m=mt(m),m in ee)return;ee[m]=!0;const c=m.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":pt,c||(p.as="script"),p.crossOrigin="",p.href=m,v&&p.setAttribute("nonce",v),document.head.appendChild(p),c)return new Promise((y,E)=>{p.addEventListener("load",y),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(s){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=s,window.dispatchEvent(v),!v.defaultPrevented)throw s}return i.then(s=>{for(const v of s||[])v.status==="rejected"&&l(v.reason);return t().catch(l)})},ft=[{path:"/",redirect:"/algorithm-validation"},{path:"/data",name:"DataImport",component:()=>w(()=>import("./DataImport-DNQcbDBD.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{title:"数据导入",icon:"upload",navOrder:10,flowOrder:10}},{path:"/interpolation",name:"Interpolation",component:()=>w(()=>import("./Interpolation-Bvp54HD_.js"),__vite__mapDeps([6,1,4,2,3,7])),meta:{title:"插值分析",icon:"chart",navOrder:20,flowOrder:20}},{path:"/pressure",name:"PressureIndex",component:()=>w(()=>import("./PressureIndex-DJyX0W3v.js"),__vite__mapDeps([8,1,4,9,10,2,3,11])),meta:{title:"矿压指标",icon:"bar",nav:!1,legacy:!0}},{path:"/mpi-heatmap",name:"MpiHeatmap",component:()=>w(()=>import("./MpiHeatmap-CK1aABr0.js"),__vite__mapDeps([12,1,2,3,4,13])),meta:{title:"MPI 热力图(旧版)",icon:"legacy",nav:!1,legacy:!0}},{path:"/mpi-heatmap-pro",name:"MpiHeatmapPro",component:()=>w(()=>import("./MpiHeatmapPro-WtyWBK24.js"),__vite__mapDeps([14,1,4,2,3,15])),meta:{title:"MPI 数值模拟",icon:"bolt",navOrder:40}},{path:"/mpi-algorithm",name:"MpiAlgorithm",component:()=>w(()=>import("./MpiAlgorithm-D4vnNyBw.js"),__vite__mapDeps([16,1,4,17])),meta:{title:"MPI 算法原理",icon:"box",nav:!1,legacy:!0}},{path:"/academic-algorithm",name:"AcademicAlgorithm",component:()=>w(()=>import("./AcademicAlgorithm-V9P9lgEA.js"),__vite__mapDeps([18,1,3,19,20,4,21])),meta:{title:"新算法原理",icon:"book",navOrder:30,flowOrder:30}},{path:"/algorithm-validation",name:"AlgorithmValidation",component:()=>w(()=>import("./AlgorithmValidation-DZnmH4FT.js"),__vite__mapDeps([22,1,4,2,3,19,20,23])),meta:{title:"新算法实证",icon:"flask",navOrder:50,flowOrder:40}},{path:"/research-portal",name:"ResearchPortal",component:()=>w(()=>import("./ResearchPortal-DCUXPciW.js"),__vite__mapDeps([24,1,4,2,3,25])),meta:{title:"Research Portal",icon:"book",navOrder:54,workflow:!1}},{path:"/research-workbench",name:"ResearchWorkbench",component:()=>w(()=>import("./ResearchWorkbench-Bd-Uq71W.js"),__vite__mapDeps([26,1,4,2,3,27])),meta:{title:"科研工作台",icon:"book",navOrder:55}},{path:"/geo-mpi-studio",name:"GeoMpiStudio",component:()=>w(()=>import("./GeoMpiStudio-B5TQ19d2.js"),__vite__mapDeps([28,1,9,10,2,3,4,29])),meta:{title:"空间实验室",icon:"chart",navOrder:56,workflow:!1}},{path:"/steps",name:"Steps",component:()=>w(()=>import("./Steps-DHkdA303.js"),__vite__mapDeps([30,1,9,10,2,3,4,31])),meta:{title:"来压步距",icon:"grid",navOrder:60}},{path:"/report",name:"Report",component:()=>w(()=>import("./Report-D79rck0q.js"),__vite__mapDeps([32,1,4,2,3,33])),meta:{title:"结果报告",icon:"report",navOrder:70,flowOrder:50}},{path:"/geomodel-viz",name:"GeomodelVisualization",component:()=>w(()=>import("./GeomodelVisualization-IbMDmnSH.js"),__vite__mapDeps([34,1,35,36,9,10,2,3,4,37])),meta:{title:"地质建模可视化",icon:"chart",navOrder:57}},{path:"/scene3d",name:"Scene3D",component:()=>w(()=>import("./Scene3DPage-riOC_bEL.js"),__vite__mapDeps([38,1,4,35,36,2,3,39])),meta:{title:"三维指标可视化",icon:"chart",navOrder:58}}],_t=ke({history:Oe(),routes:ft}),re=Symbol("toast");function vt(n){const t=B(null);return n.provide(re,t),t}function yt(){const n=ge(re,B(null)),t=(s,v="info",m=3e3)=>{var c;(c=n.value)==null||c.add(s,v,m)};return{add:t,success:s=>t(s,"success"),error:s=>t(s,"error"),warning:s=>t(s,"warning"),info:s=>t(s,"info")}}const j=we(dt);j.use(_t);const ht=vt(j);j.config.globalProperties.$toast=ht;j.mount("#app");export{Be as _,yt as a,w as b,Ce as u};
