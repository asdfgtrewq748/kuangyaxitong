const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/katex-XYJMzQOF.js","assets/katex-CBmFCdgC.css"])))=>i.map(i=>d[i]);
var Z=(Y,I,P)=>new Promise((c,o)=>{var l=g=>{try{H(P.next(g))}catch(u){o(u)}},J=g=>{try{H(P.throw(g))}catch(u){o(u)}},H=g=>g.done?c(g.value):Promise.resolve(g.value).then(l,J);H((P=P.apply(Y,I)).next())});import{_ as wt,b as et,u as Mt}from"./index-D34UQVup.js";import{be as It,b8 as p,b7 as t,bp as G,bq as $,bu as Q,bs as St,bn as Rt,bb as n,ba as S,bh as K,bm as R,bc as L,b9 as F,br as at,r as it,b as m,c as b,b5 as h}from"./vendor-BiQoUjbf.js";import{J as Pt}from"./jszip-eC0OUXGO.js";import"./vue-router-Dfza_nYx.js";const Tt={class:"page mpi-algorithm-page"},$t={class:"page-header"},Lt={class:"header-actions"},Ft={class:"export-controls"},Ht={class:"export-toggle"},Bt=["disabled"],At={key:0,class:"export-status"},Ct={key:1,class:"export-done"},Vt={key:2,class:"export-error"},Et={key:3,class:"export-progress"},Dt={class:"card flow-card"},zt={class:"section-header flow-header"},Ot={class:"mode-tabs"},Ut={class:"flow-figure"},Nt=["src"],jt={class:"flow-steps"},Zt=["onMouseenter"],Gt={class:"step-index"},Kt={class:"step-content"},Jt={class:"card indicators-card"},Wt={class:"indicator-grid"},Xt={class:"indicator-card"},qt={class:"figure-block"},Qt=["src"],Yt={class:"formula"},ts=["innerHTML"],ss=["innerHTML"],es=["innerHTML"],as=["innerHTML"],is={class:"indicator-card"},ls={class:"figure-block"},ns=["src"],os={class:"interactive-control"},rs={class:"control-header"},ds={class:"bri-sim-result"},cs={class:"bri-value-bar"},us={class:"bri-bar-track"},vs={class:"bri-value"},ps={class:"formula"},ms=["innerHTML"],hs=["innerHTML"],fs=["innerHTML"],bs=["innerHTML"],_s={class:"indicator-card"},gs={class:"figure-block"},ks=["src"],xs={class:"formula"},ys=["innerHTML"],ws=["innerHTML"],Ms=["innerHTML"],Is={class:"asi-animation-container"},Ss={class:"stress-bars"},Rs={class:"card weight-card"},Ps={class:"weight-grid"},Ts={class:"weight-controls"},$s={class:"weight-label"},Ls={class:"weight-value"},Fs=["onUpdate:modelValue"],Hs={class:"weight-hint"},Bs={class:"weight-preview"},As={class:"stack-bar"},Cs={class:"formula formula-inline"},Vs=["innerHTML"],Es={class:"card example-card"},Ds={class:"example-grid"},zs={class:"example-table"},Os={class:"sample-selector"},Us=["onClick"],Ns={class:"example-result"},js={class:"result-value"},Zs={class:"result-breakdown"},Gs={class:"card output-card"},Ks={class:"output-steps"},Js={__name:"MpiAlgorithm",setup(Y){let I=null;const{markStepDone:P}=Mt(),c=a=>{if(!I)return a;try{return I.renderToString(a,{throwOnError:!1,displayMode:!0,output:"html",strict:!1})}catch(s){return console.error("KaTeX render error:",s),a}},o={rsi:{main:"\\text{RSI} = \\min(\\text{RSI}_{\\text{norm}} + \\text{RSI}_{\\text{key}} + \\text{RSI}_{\\text{struct}}, 0, 100)",norm:"\\text{RSI}_{\\text{norm}} = \\min\\left(\\frac{\\bar{\\sigma_t}}{10}, 1\\right) \\times 40",key:"\\text{RSI}_{\\text{key}} = \\min(n_{\\text{key}} \\times 15, 30)",struct:"\\text{RSI}_{\\text{struct}} = (1 - r_{\\text{soft}}) \\times 40"},bri:{main:"\\text{BRI} = \\max(100 - P_{\\text{depth}} - P_{\\text{hard}} - P_{\\text{thick}}, 0)",depth:"P_{\\text{depth}} = \\min\\left(\\frac{H - H_{\\text{crit}}}{200}, 1\\right) \\times 40",hard:"P_{\\text{hard}} = \\min\\left(\\frac{E_{\\text{hard}}}{500}, 1\\right) \\times 30",thick:"P_{\\text{thick}} = \\min\\left(\\frac{h_{\\text{coal}}}{10}, 1\\right) \\times 30"},asi:{main:"\\text{ASI} = S_{\\text{stiff}} + S_{\\text{fric}}",stiff:"S_{\\text{stiff}} = \\min\\left(\\frac{\\bar{E}}{35} \\times 50, 50\\right)",fric:"S_{\\text{fric}} = \\max\\left(\\frac{\\bar{\\varphi} - 20}{25} \\times 50, 0\\right)"},mpi:"\\text{MPI} = w_r \\cdot \\text{RSI} + w_b \\cdot \\text{BRI} + w_a \\cdot \\text{ASI}"},l=it({rsi:{main:"",norm:"",key:"",struct:""},bri:{main:"",depth:"",hard:"",thick:""},asi:{main:"",stiff:"",fric:""}});It(()=>Z(this,null,function*(){P("MpiAlgorithm");try{const a=yield et(()=>import("./katex-XYJMzQOF.js").then(s=>s.k),__vite__mapDeps([0,1]));I=a.default||a,yield et(()=>import("./katex-XYJMzQOF.js").then(s=>s.a),__vite__mapDeps([0,1])),l.rsi.main=c(o.rsi.main),l.rsi.norm=c(o.rsi.norm),l.rsi.key=c(o.rsi.key),l.rsi.struct=c(o.rsi.struct),l.bri.main=c(o.bri.main),l.bri.depth=c(o.bri.depth),l.bri.hard=c(o.bri.hard),l.bri.thick=c(o.bri.thick),l.asi.main=c(o.asi.main),l.asi.stiff=c(o.asi.stiff),l.asi.fric=c(o.asi.fric)}catch(a){console.error("Failed to load KaTeX:",a),Object.keys(o).forEach(s=>{typeof o[s]=="string"||typeof o[s]=="object"&&Object.keys(o[s]).forEach(e=>{l[s][e]=o[s][e]})})}}));const J=a=>{if(!I)return a;try{return I.renderToString(a,{throwOnError:!1,displayMode:!1,output:"html",strict:!1})}catch(s){return console.error("KaTeX render error:",s),a}},H=[{key:"input",title:"数据输入",subtitle:"岩层参数 / 地质信息",detailTitle:"输入数据来源",detail:"包括钻孔岩性、煤层厚度、抗拉强度、采深等，所有参数可追踪到原始表格。"},{key:"sub",title:"子指标计算",subtitle:"RSI / BRI / ASI",detailTitle:"子指标输出",detail:"分别描述顶板稳定性、冲击风险与支承压力分布，便于解释与诊断。"},{key:"fusion",title:"权重融合",subtitle:"默认 0.4 / 0.35 / 0.25",detailTitle:"权重融合逻辑",detail:"通过权重加权得到综合 MPI，可根据矿区经验进行微调并记录。"},{key:"risk",title:"风险等级",subtitle:"低 / 中 / 高",detailTitle:"风险映射",detail:"将 MPI 数值划分为风险等级，支撑施工决策与预警。"},{key:"output",title:"图像输出",subtitle:"热力图 / 等值线",detailTitle:"可视化输出",detail:"生成高分辨率热力图与等值线，支持报告级导出。"}],g=m(0),u=m(!1),z=m("sub"),O=m("svg"),W=m("current"),X=m(!1),B=m(!1),T=m(0),k=m(""),A=m(""),C=m(!1),w=it({rsi:.4,bri:.35,asi:.25}),U=m(600),V=b(()=>{const a=U.value,s=400,e=a>s?Math.min((a-s)/200,1)*40:0;return Math.min(Math.max(100-e-15-15,0),100)}),lt=b(()=>{const a=V.value;return a>=70?"low":a>=50?"medium":"high"}),nt=b(()=>{const a=V.value;return a>=70?"低风险":a>=50?"中风险":"高风险"}),ot=b(()=>{const a=V.value;return a>=70?"linear-gradient(90deg, #22c55e, #16a34a)":a>=50?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #ef4444, #dc2626)"}),rt=b(()=>{const a=[];for(let s=0;s<20;s++){const e=s/19;let i;e<.4?i=30+Math.random()*10:e<.6?i=30+(1-Math.abs(e-.5)/.1)*60+Math.random()*5:i=30+Math.exp(-(e-.6)*3)*30+Math.random()*10,a.push({height:Math.min(Math.max(i,10),95),color:i>70?"linear-gradient(180deg, #ef4444, #dc2626)":i>50?"linear-gradient(180deg, #f59e0b, #d97706)":"linear-gradient(180deg, #22c55e, #16a34a)",delay:s*.05})}return a}),dt=b(()=>50),ct=[{key:"rsi",label:"RSI 权重",default:"0.40"},{key:"bri",label:"BRI 权重",default:"0.35"},{key:"asi",label:"ASI 权重",default:"0.25"}],ut=b(()=>w.rsi+w.bri+w.asi),x=b(()=>{const a=ut.value||1;return{rsi:w.rsi/a,bri:w.bri/a,asi:w.asi/a}}),N=[{id:"a",name:"样例点 A（汇总表浅埋）",point:{burial_depth:86,thickness:6},strata:[{name:"岩层1",thickness:6,tensile_strength:2.3,compressive_strength:20.51,elastic_modulus:3,friction_angle:28},{name:"岩层2",thickness:1.5,tensile_strength:1.2,compressive_strength:14.32,elastic_modulus:9.8,friction_angle:17.5},{name:"岩层3",thickness:8,tensile_strength:4.5,compressive_strength:26.93,elastic_modulus:17,friction_angle:22.3},{name:"岩层4",thickness:12.5,tensile_strength:10.5,compressive_strength:35.36,elastic_modulus:28,friction_angle:20},{name:"岩层5",thickness:7,tensile_strength:3.6,compressive_strength:33.93,elastic_modulus:25,friction_angle:28}]},{id:"b",name:"样例点 B（汇总表深埋）",point:{burial_depth:967.7,thickness:5.9},strata:[{name:"岩层1",thickness:5.9,tensile_strength:2.4,compressive_strength:27,elastic_modulus:.5,friction_angle:42.6},{name:"岩层2",thickness:1.5,tensile_strength:4.7,compressive_strength:38.3,elastic_modulus:10.8,friction_angle:36},{name:"岩层3",thickness:15.7,tensile_strength:3.1,compressive_strength:32.8,elastic_modulus:9.3,friction_angle:38.8},{name:"岩层4",thickness:20,tensile_strength:2.1,compressive_strength:27,elastic_modulus:8.34,friction_angle:37.8},{name:"岩层5",thickness:46,tensile_strength:3.1,compressive_strength:27,elastic_modulus:9.3,friction_angle:38.8}]}],q=m(N[0].id),j=b(()=>N.find(a=>a.id===q.value)||N[0]),tt=a=>a.filter(e=>e.compressive_strength>60&&e.thickness>5&&e.elastic_modulus/35>.8),vt=a=>{const s=a.slice(0,2),e=s.reduce((f,M)=>f+M.thickness,0),i=e>0?s.reduce((f,M)=>f+M.thickness*M.tensile_strength,0)/e:0,r=tt(a),v=Math.min(r.length*15,30),d=a.reduce((f,M)=>f+M.thickness,0),E=(1-(d>0?a.filter(f=>f.compressive_strength<30).reduce((f,M)=>f+M.thickness,0)/d:0))*40,D=Math.min(i/10,1)*40;return Math.min(Math.max(D+v+E,0),100)},pt=(a,s)=>{const e=a.burial_depth||0,i=a.thickness||0,r=400,v=e>r?Math.min((e-r)/200,1)*40:0,d=s.filter(D=>D.compressive_strength>60).reduce((D,f)=>D+f.thickness*f.elastic_modulus,0),_=Math.min(d/500,1)*30,E=Math.min(i/10,1)*30;return Math.min(Math.max(100-v-_-E,0),100)},mt=a=>{const s=a.reduce((d,_)=>d+_.thickness,0);if(s===0)return 50;const e=a.reduce((d,_)=>d+_.elastic_modulus*_.thickness,0)/s,i=Math.min(e/35*50,50),r=a.reduce((d,_)=>d+_.friction_angle*_.thickness,0)/s,v=Math.max(Math.min((r-20)/25*50,50),0);return Math.min(Math.max(i+v,0),100)},y=b(()=>{const{point:a,strata:s}=j.value,e=vt(s),i=pt(a,s),r=mt(s);return{mpi:x.value.rsi*e+x.value.bri*i+x.value.asi*r,breakdown:{rsi:e,bri:i,asi:r}}}),st=b(()=>{const a=y.value.mpi;return a>=70?{label:"低风险",class:"low"}:a>=50?{label:"中风险",class:"medium"}:{label:"高风险",class:"high"}}),ht=b(()=>[{label:"埋深 (m)",value:j.value.point.burial_depth.toFixed(1)},{label:"煤层厚度 (m)",value:j.value.point.thickness.toFixed(1)},{label:"关键层数量",value:tt(j.value.strata).length},{label:"RSI",value:y.value.breakdown.rsi.toFixed(2)},{label:"BRI",value:y.value.breakdown.bri.toFixed(2)},{label:"ASI",value:y.value.breakdown.asi.toFixed(2)},{label:"权重 (RSI/BRI/ASI)",value:`${x.value.rsi.toFixed(2)} / ${x.value.bri.toFixed(2)} / ${x.value.asi.toFixed(2)}`},{label:"MPI",value:y.value.mpi.toFixed(2)}]),ft=[{title:"1. 网格化",desc:"将采集点转换为规则网格，保障空间分辨率一致。"},{title:"2. 插值",desc:"采用 IDW/Linear/Nearest 等方法填补空缺区域。"},{title:"3. 颜色映射",desc:"按照风险等级与 ODI 色带映射颜色。"},{title:"4. 叠加标注",desc:"叠加等值线、坐标轴与关键点注记。"}],bt=a=>{a.forEach((s,e)=>{setTimeout(()=>{const i=document.createElement("a");i.href=`/mpi-algorithm/${s}`,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i)},e*200)})},_t=a=>{const s=O.value,i=a==="bw"?"_bw":"";return z.value==="sub"?[`flow_overview${i}.${s}`,`rsi_stability${i}.${s}`,`bri_depth_curve${i}.${s}`,`asi_stress_profile${i}.${s}`,`mpi_colorbar${i}.${s}`]:[`flow_overview${i}.${s}`,`rsi_stability${i}.${s}`,`bri_depth_curve${i}.${s}`,`asi_stress_profile${i}.${s}`,`mpi_colorbar${i}.${s}`]},gt=()=>{const s=new Date().toISOString().slice(0,10).replace(/-/g,"");return`kuangyaxitong-mpi-${z.value}-${O.value}-${s}.zip`},kt=a=>Z(this,null,function*(){const s=new Pt,e=s.folder("mpi-figures");let i=0;for(const d of a){const E=yield(yield fetch(`/mpi-algorithm/${d}`)).blob();e.file(d,E),i+=1,T.value=Math.round(i/a.length*80),k.value=`正在打包：${i}/${a.length}`}k.value="正在生成ZIP...";const r=yield s.generateAsync({type:"blob"},d=>{T.value=80+Math.round(d.percent*.2)}),v=document.createElement("a");v.href=URL.createObjectURL(r),v.download=gt(),document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(v.href)}),xt=()=>Z(this,null,function*(){B.value=!0,T.value=0,k.value="准备导出...",A.value="",C.value=!1;try{const s=(W.value==="both"?["color","bw"]:[u.value?"bw":"color"]).flatMap(e=>_t(e));X.value?yield kt(s):(k.value=`准备下载 ${s.length} 个文件...`,bt(s),T.value=100),k.value="导出完成",C.value=!0}catch(a){k.value="导出失败",A.value=`错误原因：${(a==null?void 0:a.message)||"未知错误"}`}finally{setTimeout(()=>{B.value=!1,k.value="",A.value="",T.value=0,C.value=!1},1200)}}),yt=()=>{const a=["chrome://downloads/","edge://downloads/all","about:downloads"];let s=!1;for(const e of a)if(window.open(e,"_blank")){s=!0;break}s||(k.value="浏览器限制打开下载页，可用快捷键 Ctrl+J 查看下载记录。")};return(a,s)=>(h(),p("div",Tt,[t("div",$t,[s[11]||(s[11]=G('<div class="page-header-content" data-v-fc437189><div class="page-header-icon" data-v-fc437189><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-fc437189><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" data-v-fc437189></path><path d="M8 12h8" data-v-fc437189></path><path d="M12 8v8" data-v-fc437189></path></svg></div><div data-v-fc437189><h1 class="page-title" data-v-fc437189>MPI 矿压影响指标算法原理</h1><p class="page-subtitle" data-v-fc437189>从岩层参数到空间分布的可解释指数，3-5 分钟快速理解</p></div></div>',1)),t("div",Lt,[t("div",Ft,[$(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>z.value=e),class:"param-select export-select"},[...s[7]||(s[7]=[t("option",{value:"sub"},"导出当前子图",-1),t("option",{value:"all"},"导出全部图（批量）",-1)])],512),[[Q,z.value]]),$(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>O.value=e),class:"param-select export-select"},[...s[8]||(s[8]=[t("option",{value:"svg"},"SVG",-1),t("option",{value:"png"},"PNG",-1)])],512),[[Q,O.value]]),$(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>W.value=e),class:"param-select export-select"},[...s[9]||(s[9]=[t("option",{value:"current"},"当前配色",-1),t("option",{value:"both"},"彩色+黑白",-1)])],512),[[Q,W.value]]),t("label",Ht,[$(t("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=e=>X.value=e)},null,512),[[St,X.value]]),s[10]||(s[10]=Rt(" 打包ZIP ",-1))]),t("button",{class:"btn ghost",disabled:B.value,onClick:xt},n(B.value?"导出中...":"开始导出"),9,Bt),t("button",{class:S(["btn ghost",{highlight:C.value}]),onClick:yt},"打开下载记录",2)]),k.value?(h(),p("div",At,n(k.value),1)):K("",!0),C.value?(h(),p("div",Ct,"导出完成，可查看下载记录。")):K("",!0),A.value?(h(),p("div",Vt,n(A.value),1)):K("",!0),B.value?(h(),p("div",Et,[t("div",{class:"export-progress-bar",style:R({width:`${T.value}%`})},null,4)])):K("",!0)])]),s[43]||(s[43]=G('<section class="card overview-card" data-v-fc437189><div class="overview-text" data-v-fc437189><h2 data-v-fc437189>一句话总览</h2><p data-v-fc437189> MPI 将<strong data-v-fc437189>岩层参数</strong>转化为 RSI / BRI / ASI 三个子指标， 通过权重融合得到综合指数，并映射为<strong data-v-fc437189>空间风险等级</strong>热力图。 </p></div><div class="overview-badges" data-v-fc437189><span class="badge" data-v-fc437189>可解释</span><span class="badge" data-v-fc437189>可追踪</span><span class="badge" data-v-fc437189>可验证</span></div></section>',1)),t("section",Dt,[t("div",zt,[s[12]||(s[12]=t("div",null,[t("h2",null,"总体流程图"),t("p",null,"悬停查看每一步数据含义与输出说明")],-1)),t("div",Ot,[t("button",{class:S(["mode-tab",{active:!u.value}]),onClick:s[4]||(s[4]=e=>u.value=!1)},"彩色",2),t("button",{class:S(["mode-tab",{active:u.value}]),onClick:s[5]||(s[5]=e=>u.value=!0)},"黑白",2)])]),t("div",Ut,[t("img",{src:u.value?"/mpi-algorithm/flow_overview_bw.svg":"/mpi-algorithm/flow_overview.svg",alt:"MPI流程图",class:"flow-image",loading:"lazy",decoding:"async"},null,8,Nt),s[13]||(s[13]=t("p",{class:"figure-caption"},"图1 | MPI 计算流程示意",-1))]),t("div",jt,[(h(),p(L,null,F(H,(e,i)=>t("div",{key:e.key,class:S(["flow-step",{active:g.value===i}]),onMouseenter:r=>g.value=i},[t("div",Gt,n(i+1),1),t("div",Kt,[t("h3",null,n(e.title),1),t("p",null,n(e.subtitle),1)])],42,Zt)),64))])]),t("section",Jt,[s[33]||(s[33]=t("div",{class:"section-header"},[t("h2",null,"子指标模块"),t("p",null,"每个子指标都对应明确的输入参数与物理含义")],-1)),t("div",Wt,[t("div",Xt,[s[16]||(s[16]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"RSI"),t("h3",null,"顶板稳定性")],-1)),s[17]||(s[17]=t("ul",null,[t("li",null,"输入：抗拉强度、关键层数量、岩层结构"),t("li",null,"含义：描述顶板破坏敏感性")],-1)),t("div",qt,[t("img",{src:u.value?"/mpi-algorithm/rsi_stability_bw.svg":"/mpi-algorithm/rsi_stability.svg",alt:"RSI顶板稳定性示意",loading:"lazy",decoding:"async"},null,8,Qt),s[14]||(s[14]=t("span",null,"图2 | 顶板稳定性构成",-1))]),t("div",Yt,[s[15]||(s[15]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.main},null,8,ts),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.norm},null,8,ss),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.key},null,8,es),t("div",{class:"formula-body formula-katex",innerHTML:l.rsi.struct},null,8,as)]),s[18]||(s[18]=t("div",{class:"indicator-visual"},[t("div",{class:"visual-bar"},[t("span",null,"稳定性 ↑"),t("div",{class:"bar-track"},[t("div",{class:"bar-fill",style:{width:"72%"}})])])],-1))]),t("div",is,[s[23]||(s[23]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"BRI"),t("h3",null,"冲击地压风险")],-1)),s[24]||(s[24]=t("ul",null,[t("li",null,"输入：采深、硬厚岩层、煤层厚度"),t("li",null,"含义：描述深度与硬层带来的能量积累")],-1)),t("div",ls,[t("img",{src:u.value?"/mpi-algorithm/bri_depth_curve_bw.svg":"/mpi-algorithm/bri_depth_curve.svg",alt:"BRI采深影响曲线",loading:"lazy",decoding:"async"},null,8,ns),s[19]||(s[19]=t("span",null,"图3 | 采深影响曲线",-1))]),t("div",os,[t("div",rs,[s[20]||(s[20]=t("span",{class:"control-label"},"采深模拟",-1)),t("span",{class:S(["control-value",lt.value])},n(U.value)+"m ("+n(nt.value)+")",3)]),$(t("input",{type:"range",min:"0",max:"1200",step:"10","onUpdate:modelValue":s[6]||(s[6]=e=>U.value=e),class:"depth-slider"},null,512),[[at,U.value,void 0,{number:!0}]]),s[21]||(s[21]=t("div",{class:"depth-labels"},[t("span",null,"0m"),t("span",null,"400m"),t("span",null,"800m"),t("span",null,"1200m")],-1)),t("div",ds,[t("div",cs,[t("div",us,[t("div",{class:"bri-bar-fill",style:R({width:V.value+"%",background:ot.value})},null,4)]),t("span",vs,"BRI = "+n(V.value.toFixed(1)),1)])])]),t("div",ps,[s[22]||(s[22]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.main},null,8,ms),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.depth},null,8,hs),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.hard},null,8,fs),t("div",{class:"formula-body formula-katex",innerHTML:l.bri.thick},null,8,bs)]),s[25]||(s[25]=t("div",{class:"indicator-visual"},[t("div",{class:"visual-line"},[t("span",null,"深度 ↑ 风险 ↑"),t("div",{class:"line-track"})])],-1))]),t("div",_s,[s[31]||(s[31]=t("div",{class:"indicator-head"},[t("span",{class:"indicator-tag"},"ASI"),t("h3",null,"支承压力分布")],-1)),s[32]||(s[32]=t("ul",null,[t("li",null,"输入：综合刚度、内摩擦角"),t("li",null,"含义：描述应力传递与集中程度")],-1)),t("div",gs,[t("img",{src:u.value?"/mpi-algorithm/asi_stress_profile_bw.svg":"/mpi-algorithm/asi_stress_profile.svg",alt:"ASI应力传递示意",loading:"lazy",decoding:"async"},null,8,ks),s[26]||(s[26]=t("span",null,"图4 | 应力传递剖面",-1))]),t("div",xs,[s[27]||(s[27]=t("div",{class:"formula-title"},"计算公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.main},null,8,ys),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.stiff},null,8,ws),t("div",{class:"formula-body formula-katex",innerHTML:l.asi.fric},null,8,Ms)]),t("div",Is,[s[29]||(s[29]=t("div",{class:"asi-label"},"应力传递模拟",-1)),t("div",Ss,[(h(!0),p(L,null,F(rt.value,(e,i)=>(h(),p("div",{key:i,class:"stress-bar",style:R({height:e.height+"%",background:e.color,animationDelay:e.delay+"s"})},null,4))),128))]),s[30]||(s[30]=t("div",{class:"stress-labels"},[t("span",null,"采空区"),t("span",null,"煤壁"),t("span",null,"前方")],-1)),t("div",{class:"peak-indicator",style:R({left:dt.value+"%"})},[...s[28]||(s[28]=[t("div",{class:"peak-arrow"},"↑",-1),t("div",{class:"peak-label"},"峰值",-1)])],4)])])])]),t("section",Rs,[s[36]||(s[36]=t("div",{class:"section-header"},[t("h2",null,"权重解释区"),t("p",null,"拖动滑块模拟权重变化对 MPI 的影响")],-1)),t("div",Ps,[t("div",Ts,[(h(),p(L,null,F(ct,e=>t("div",{class:"weight-item",key:e.key},[t("div",$s,[t("span",null,n(e.label),1),t("span",Ls,n((x.value[e.key]*100).toFixed(1))+"%",1)]),$(t("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":i=>w[e.key]=i},null,8,Fs),[[at,w[e.key],void 0,{number:!0}]]),t("div",Hs,"默认："+n(e.default),1)])),64))]),t("div",Bs,[t("div",As,[t("div",{class:"stack-segment rsi",style:R({width:x.value.rsi*100+"%"})},null,4),t("div",{class:"stack-segment bri",style:R({width:x.value.bri*100+"%"})},null,4),t("div",{class:"stack-segment asi",style:R({width:x.value.asi*100+"%"})},null,4)]),s[35]||(s[35]=G('<div class="stack-legend" data-v-fc437189><span data-v-fc437189><i class="dot rsi" data-v-fc437189></i>RSI</span><span data-v-fc437189><i class="dot bri" data-v-fc437189></i>BRI</span><span data-v-fc437189><i class="dot asi" data-v-fc437189></i>ASI</span></div><div class="weight-note" data-v-fc437189> 默认权重来源于专家经验与历史样本拟合，可在后续版本中开放自定义策略。 </div>',2)),t("div",Cs,[s[34]||(s[34]=t("div",{class:"formula-title"},"MPI融合公式",-1)),t("div",{class:"formula-body formula-katex",innerHTML:J(o.mpi)},null,8,Vs)])])])]),s[44]||(s[44]=G('<section class="card risk-card" data-v-fc437189><div class="section-header" data-v-fc437189><h2 data-v-fc437189>风险等级与决策解释</h2><p data-v-fc437189>MPI 值越高表示稳定性越好，风险越低</p></div><div class="risk-grid" data-v-fc437189><div class="risk-level" data-v-fc437189><span class="level high" data-v-fc437189>高风险</span><p data-v-fc437189>MPI &lt; 50，建议加强支护与监测</p></div><div class="risk-level" data-v-fc437189><span class="level medium" data-v-fc437189>中风险</span><p data-v-fc437189>50 ≤ MPI &lt; 70，建议适度优化施工参数</p></div><div class="risk-level" data-v-fc437189><span class="level low" data-v-fc437189>低风险</span><p data-v-fc437189>MPI ≥ 70，施工条件相对稳定</p></div></div></section>',1)),t("section",Es,[s[40]||(s[40]=t("div",{class:"section-header"},[t("h2",null,"示例演算"),t("p",null,"选择真实样点做可追踪演算，增强可信度")],-1)),t("div",Ds,[t("div",zs,[t("div",Os,[(h(),p(L,null,F(N,e=>t("button",{key:e.id,class:S(["sample-btn",{active:q.value===e.id}]),onClick:i=>q.value=e.id},n(e.name),11,Us)),64))]),s[37]||(s[37]=t("div",{class:"table-row header"},[t("span",null,"参数"),t("span",null,"示例值")],-1)),(h(!0),p(L,null,F(ht.value,e=>(h(),p("div",{class:"table-row",key:e.label},[t("span",null,n(e.label),1),t("span",null,n(e.value),1)]))),128))]),t("div",Ns,[s[38]||(s[38]=t("div",{class:"result-title"},"综合 MPI",-1)),t("div",js,n(y.value.mpi.toFixed(2)),1),t("div",{class:S(["result-level",st.value.class])},n(st.value.label),3),t("div",Zs,[t("span",null,"RSI: "+n(y.value.breakdown.rsi.toFixed(2)),1),t("span",null,"BRI: "+n(y.value.breakdown.bri.toFixed(2)),1),t("span",null,"ASI: "+n(y.value.breakdown.asi.toFixed(2)),1)]),s[39]||(s[39]=t("div",{class:"result-desc"},"基于 MPI 设计文档公式的实时演算",-1))])])]),t("section",Gs,[s[41]||(s[41]=t("div",{class:"section-header"},[t("h2",null,"图像生成逻辑"),t("p",null,"说明 MPI 网格与可视化映射流程")],-1)),t("div",Ks,[(h(),p(L,null,F(ft,e=>t("div",{class:"output-step",key:e.title},[t("h3",null,n(e.title),1),t("p",null,n(e.desc),1)])),64))]),s[42]||(s[42]=t("div",{class:"output-note"}," 颜色映射采用 ODI 色带标准，支持 SVG + PNG 高分辨率输出。 ",-1))])]))}},te=wt(Js,[["__scopeId","data-v-fc437189"]]);export{te as default};
