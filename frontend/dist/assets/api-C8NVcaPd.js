var y=Object.defineProperty,b=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var l=(e,s,t)=>s in e?y(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,h=(e,s)=>{for(var t in s||(s={}))_.call(s,t)&&l(e,t,s[t]);if(d)for(var t of d(s))w.call(s,t)&&l(e,t,s[t]);return e},u=(e,s)=>b(e,x(s));import{a as f}from"./network-T6nY3V_4.js";const S="http://localhost:8001",a=f.create({baseURL:S}),z=(e,s="请求失败，请稍后重试")=>{var t;if(!e)return s;if(f.isAxiosError(e)){const r=(t=e.response)==null?void 0:t.data;if(typeof r=="string"&&r.trim())return r;if(r&&typeof r=="object"){const o=r.detail||r.message||r.error;if(typeof o=="string"&&o.trim())return o}return typeof e.message=="string"&&e.message.trim()?e.message:s}return typeof(e==null?void 0:e.message)=="string"&&e.message.trim()?e.message:s};class v{constructor(s=50){this.cache=new Map,this.pending=new Map,this.maxSize=s}normalizeParams(s){return Array.isArray(s)?s.map(t=>this.normalizeParams(t)):s&&typeof s=="object"?Object.keys(s).sort().reduce((t,r)=>(t[r]=this.normalizeParams(s[r]),t),{}):s}generateKey(s,t){const r=this.normalizeParams(t||{});return`${s}?${JSON.stringify(r)}`}get(s,t){const r=this.generateKey(s,t),o=this.cache.get(r);return o?(o.lastAccess=Date.now(),o.data):null}set(s,t,r){const o=this.generateKey(s,t);if(this.cache.size>=this.maxSize){let n=null,i=1/0;for(const[c,p]of this.cache.entries())p.lastAccess<i&&(i=p.lastAccess,n=c);n&&this.cache.delete(n)}this.cache.set(o,{data:r,lastAccess:Date.now()})}clear(){this.cache.clear(),this.pending.clear()}cachedGet(s,t={},r={}){const o=t.params||{},n=!!(r!=null&&r.bypassCache),i=this.generateKey(s,o);if(!n){const p=this.get(s,o);if(p)return Promise.resolve({data:p});const g=this.pending.get(i);if(g)return g}const c=a.get(s,t).then(p=>(n||this.set(s,o,p.data),p)).finally(()=>{this.pending.delete(i)});return n||this.pending.set(i,c),c}}const m=new v(100),P=()=>a.get("/boreholes/scan"),k=(e,s=20)=>a.get("/boreholes/preview",{params:{file:e,limit:s}}),D=e=>{const s=new FormData;return e.forEach(t=>s.append("files",t)),a.post("/boreholes/upload",s)},$=(e,s,t,r,o)=>a.get("/pressure/index/grid",{params:{method:e,grid_size:s,elastic_modulus:t,density:r,tensile_strength:o}}),E=(e,s,t,r,o)=>a.get("/pressure/steps",{params:{model:e,h:s,q:t,t:r,s:o}}),T=(e,s)=>a.get("/export/index",{params:{method:e,grid_size:s},responseType:"blob"}),R=e=>a.get("/pressure/index/workfaces",{params:e}),j=e=>a.get("/export/pressure-index-workfaces",{params:e,responseType:"blob"}),C=(e,s)=>a.get("/summary/index",{params:{method:e,grid_size:s}}),B=e=>a.get("/summary/index-workfaces",{params:e}),O=(e,s,t)=>a.get("/summary/steps",{params:{model:e,target:s,grid_size:t}}),q=e=>a.get("/summary/steps-workfaces",{params:e}),L=e=>a.get("/pressure/steps/boreholes",{params:{model:e}}),M=e=>a.get("/export/pressure-steps",{params:{model:e},responseType:"blob"}),W=(e,s,t,r,o,n)=>a.get("/pressure/steps/grid",{params:{model:e,target:s,h_mode:t,q_mode:r,grid_size:o,default_q:n}}),J=(e,s,t,r,o,n)=>a.get("/export/pressure-steps-grid",{params:{model:e,target:s,h_mode:t,q_mode:r,grid_size:o,default_q:n},responseType:"blob"}),K=()=>m.cachedGet("/seams/list"),U=e=>a.get("/seams/stats",{params:{seam_name:e}}),N=(e,s=null)=>a.get("/seams/overburden",{params:{seam_name:e,borehole:s}}),V=(e,s="kriging",t=80,r=12,o=150,n=1,i={})=>{const c={params:{seam_name:e,method:s,grid_size:t,num_levels:r,dpi:o,smooth_sigma:n}};return i!=null&&i.forceRefresh?a.get("/seams/contour-images",c):m.cachedGet("/seams/contour-images",c)},F=(e,s=50,t={})=>a.get("/api/scene3d/data",u(h({},t),{params:{seam:e,resolution:s}})),H=e=>a.post("/api/geomodel/jobs",e),Q=e=>a.get(`/api/geomodel/jobs/${e}`),X=e=>a.get(`/api/geomodel/jobs/${e}/artifacts`),Y=(e,s)=>a.get(`/api/geomodel/jobs/${e}/artifacts/${encodeURIComponent(s)}`,{responseType:"blob"}),Z=()=>a.get("/api/geomodel-integration/jobs"),ee=e=>a.get(`/api/geomodel-integration/visualization/${e}`),se=e=>a.post("/api/geomodel-integration/mpi-with-geomodel",e),te=e=>a.post("/api/mpi/calculate-geo",e),ae=e=>a.post("/api/mpi/interpolate-geo",e),re=(e,s=null,t=null)=>a.post("/api/mpi/batch",{points:e,weights:s,config:t}),oe=(e,s=50,t="idw",r=null,o=null)=>a.post("/api/mpi/interpolate",{points:e,resolution:s,method:t,weights:r,bounds:o}),ne=()=>a.get("/api/mpi/weights"),ie=e=>{const s=new FormData;return s.append("file",e),a.post("/api/mpi/workfaces/parse",s)},pe=e=>a.post("/api/mpi/heatmap-image",e),ce=(e,s=!0,t=!0)=>m.cachedGet("/api/rock-params/query",{params:{lithology:e,use_synonyms:s,include_default:t}}),me=e=>a.post("/api/algorithm-validation/evaluate",e),A="advanced_v2_asi_calibrated_v1",ge=(e="16-3煤",s=50,t="idw",r=null)=>{const o={seam_name:e,resolution:s,method:t,model_rev:A};return r&&typeof r=="object"&&(o.weights=JSON.stringify(r)),m.cachedGet("/api/algorithm-validation/spatial-overview",{params:o})},de=e=>a.post("/api/research/dataset/register",e),le=e=>a.get(`/api/research/dataset/${e}`),he=(e,s)=>a.post(`/api/research/dataset/${e}/split`,s),ue=e=>a.post("/api/research/experiments/run",e),fe=e=>a.get(`/api/research/experiments/${e}`),ye=e=>a.get(`/api/research/experiments/${e}/artifacts`),be=(e,s)=>a.get(`/api/research/experiments/${e}/artifacts/${encodeURIComponent(s)}`,{responseType:"blob"}),xe=()=>a.get("/api/research/experiments/templates"),_e=e=>a.post("/api/research/experiments/run-suite",e),we=()=>a.get("/api/research/papers/overview"),Se=(e,s)=>a.get(`/api/research/papers/${e}/download`,{params:{kind:s},responseType:"blob"}),ve=e=>a.get(`/api/research/papers/${e}/bundle`,{responseType:"blob"}),Ae=(e="auc",s=20)=>a.get("/api/research/leaderboard/experiments",{params:{metric:e,limit:s}});export{ve as A,Se as B,xe as C,de as D,le as E,he as F,ue as G,_e as H,fe as I,ye as J,be as K,J as L,M,E as N,W as O,L as P,C as Q,B as R,O as S,q as T,re as U,z as V,Z as W,se as X,ee as Y,F as Z,K as a,U as b,H as c,N as d,V as e,Y as f,Q as g,ne as h,$ as i,T as j,R as k,X as l,j as m,ie as n,oe as o,k as p,pe as q,ce as r,P as s,ae as t,D as u,ge as v,me as w,te as x,we as y,Ae as z};
