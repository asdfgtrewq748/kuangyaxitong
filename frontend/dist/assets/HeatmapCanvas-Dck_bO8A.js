import{_ as C}from"./index-C6WNepMi.js";import{bf as k,w as x,b4 as H,b5 as y,b8 as w,b7 as f,bb as N,bi as S,b as g}from"./vendor-CA5Q5CdR.js";const V={class:"heatmap-wrapper"},A=["width","height"],E={key:0,class:"color-scale"},I={class:"scale-label"},R={class:"scale-label"},$={__name:"HeatmapCanvas",props:{grid:{type:Array,default:()=>[]},size:{type:Number,default:420},colorScale:{type:Boolean,default:!0}},setup(d){const a=d,m=g(null),h=g(null),p=g(null);let i=0;const z=c=>{const t=[{r:30,g:64,b:175},{r:37,g:99,b:235},{r:59,g:130,b:246},{r:6,g:182,b:212},{r:16,g:185,b:129},{r:245,g:158,b:11}],o=c*(t.length-1),r=Math.floor(o),l=o-r,e=t[Math.min(r,t.length-1)],n=t[Math.min(r+1,t.length-1)];return`rgb(${Math.round(e.r+(n.r-e.r)*l)}, ${Math.round(e.g+(n.g-e.g)*l)}, ${Math.round(e.b+(n.b-e.b)*l)})`},F=()=>{var _;if(!m.value||a.grid.length===0)return;const c=m.value.getContext("2d"),t=a.grid.length,o=((_=a.grid[0])==null?void 0:_.length)||0;if(t===0||o===0)return;const r=a.size/o,l=a.size/t;let e=1/0,n=-1/0;a.grid.forEach(u=>{u.forEach(s=>{Number.isFinite(Number(s))&&(s<e&&(e=s),s>n&&(n=s))})}),(!Number.isFinite(e)||!Number.isFinite(n))&&(e=0,n=1);const M=n-e||1;h.value=e,p.value=n,c.clearRect(0,0,a.size,a.size);for(let u=0;u<t;u++)for(let s=0;s<o;s++){const v=a.grid[u][s];if(!Number.isFinite(Number(v)))continue;const B=(v-e)/M;c.fillStyle=z(B),c.fillRect(s*r,u*l,r+.5,l+.5)}},b=()=>{i||(i=requestAnimationFrame(()=>{i=0,F()}))};return k(b),x(()=>a.grid,b),x(()=>a.size,b),H(()=>{i&&(cancelAnimationFrame(i),i=0)}),(c,t)=>{var o,r;return y(),w("div",V,[f("canvas",{ref_key:"canvas",ref:m,width:d.size,height:d.size,class:"heatmap-canvas"},null,8,A),d.colorScale?(y(),w("div",E,[f("span",I,N((o=h.value)==null?void 0:o.toFixed(2)),1),t[0]||(t[0]=f("div",{class:"scale-bar"},null,-1)),f("span",R,N((r=p.value)==null?void 0:r.toFixed(2)),1)])):S("",!0)])}}},j=C($,[["__scopeId","data-v-611f464c"]]);export{j as H};
