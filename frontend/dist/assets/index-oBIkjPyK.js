const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataImport-CRop_rXS.js","assets/vendor-CA5Q5CdR.js","assets/api-CJun_zz_.js","assets/network-T6nY3V_4.js","assets/vue-router-D9BXaJFq.js","assets/DataImport-DoPIg_lL.css","assets/Interpolation-CQ2j6dPq.js","assets/Interpolation-Bo5iqosX.css","assets/PressureIndex-BNvoQMQA.js","assets/HeatmapCanvas-DMlTeHXF.js","assets/HeatmapCanvas-G0XigWI_.css","assets/PressureIndex-B2MrqkgP.css","assets/MpiHeatmap-BIhelIxM.js","assets/MpiHeatmap-Cu4RHxhn.css","assets/MpiHeatmapPro-BpaT3na1.js","assets/MpiHeatmapPro-CKjj8KPx.css","assets/MpiAlgorithm-Dkm3u7MW.js","assets/MpiAlgorithm-Cw_NgX_8.css","assets/AcademicAlgorithm-CYi0mXJi.js","assets/echarts-CG3_94Cz.js","assets/echarts-Dy-VGqd_.js","assets/AcademicAlgorithm-BSForOJu.css","assets/AlgorithmValidation-CZjnXPvu.js","assets/AlgorithmValidation-B9HF5A7V.css","assets/Steps-CMO2fnf5.js","assets/Steps-njgt18ve.css","assets/Report-B0fB-mm1.js","assets/Report-BKa8mOuT.css"])))=>i.map(i=>d[i]);
var ie=Object.defineProperty;var J=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var Q=(o,t,r)=>t in o?ie(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,A=(o,t)=>{for(var r in t||(t={}))ce.call(t,r)&&Q(o,r,t[r]);if(J)for(var r of J(t))ue.call(t,r)&&Q(o,r,t[r]);return o};import{b4 as ee,b5 as v,b6 as F,b7 as a,b8 as g,b9 as P,ba as te,bb as R,bc as T,bd as de,b as D,w as pe,r as me,c as E,be as fe,bf as ve,bg as Y,bh as _e,u as M,bi as B,bj as X,i as he,bk as ge}from"./vendor-CA5Q5CdR.js";import{u as we,a as ye,c as be,b as ke}from"./vue-router-D9BXaJFq.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))w(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&w(s)}).observe(document,{childList:!0,subtree:!0});function r(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function w(l){if(l.ep)return;l.ep=!0;const i=r(l);fetch(l.href,i)}})();const Se={class:"toast-container"},Me=["aria-live"],Oe={class:"toast-icon"},Ae={class:"toast-content"},Ee={__name:"Toast",setup(o,{expose:t}){const r=D([]);let w=0;const l=new Map,i=new Map,s=c=>{const d={success:"✓",error:"✕",warning:"⚠",info:"ℹ"};return d[c]||d.info},_=(c,d="info",p=3e3)=>{const y=++w,b={id:y,message:c,type:d,isExiting:!1};r.value=[...r.value,b].slice(-5);const O=setTimeout(()=>{m(y)},p);l.set(y,O)},m=c=>{const d=l.get(c);d&&(clearTimeout(d),l.delete(c));const p=r.value.find(y=>y.id===c);if(p){p.isExiting=!0;const y=setTimeout(()=>{r.value=r.value.filter(b=>b.id!==c),i.delete(c)},200);i.set(c,y)}};return ee(()=>{for(const c of l.values())clearTimeout(c);for(const c of i.values())clearTimeout(c);l.clear(),i.clear()}),t({add:_}),(c,d)=>(v(),F(de,{to:"body"},[a("div",Se,[(v(!0),g(T,null,P(r.value,p=>(v(),g("div",{key:p.id,class:te(["toast",p.type,p.isExiting&&"toast-exit"]),role:"alert","aria-live":p.type==="error"?"assertive":"polite"},[a("span",Oe,R(s(p.type)),1),a("span",Ae,R(p.message),1)],10,Me))),128))])]))}},oe="kuangya_workspace_flow_v1",Re=120,j=["DataImport","Interpolation","AcademicAlgorithm","AlgorithmValidation","Report"],ne=()=>({selectedSeam:"",updatedAt:"",steps:{DataImport:!1,Interpolation:!1,AcademicAlgorithm:!1,MpiAlgorithm:!1,PressureIndex:!1,AlgorithmValidation:!1,Report:!1},metrics:{boreholes:0,interpolationPoints:0,pressureReady:!1,validationReady:!1,reportGeneratedAt:""}}),h=me(ne());let V=null;const N=(o={})=>{const t=ne();h.selectedSeam=typeof o.selectedSeam=="string"?o.selectedSeam:t.selectedSeam,h.updatedAt=typeof o.updatedAt=="string"?o.updatedAt:t.updatedAt,h.steps=A(A({},t.steps),o.steps||{}),h.metrics=A(A({},t.metrics),o.metrics||{})},Pe=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{const o=localStorage.getItem(oe);if(!o)return;N(JSON.parse(o))}catch(o){N()}},Te=()=>{if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{localStorage.setItem(oe,JSON.stringify(h))}catch(o){}},xe=()=>{V&&clearTimeout(V),V=setTimeout(()=>{V=null,Te()},Re)},$e=(o,t=null)=>{Object.prototype.hasOwnProperty.call(h.steps,o)&&(h.steps[o]=!0,t&&typeof t=="object"&&(h.metrics=A(A({},h.metrics),t)),h.updatedAt=new Date().toISOString())},Ce=o=>{h.selectedSeam=typeof o=="string"?o:"",h.updatedAt=new Date().toISOString()},Le=()=>{N(),h.updatedAt=new Date().toISOString()};Pe();pe(h,()=>{xe()},{deep:!0,flush:"post"});const Ve=E(()=>{const o=j.filter(t=>h.steps[t]).length;return Number((o/j.length).toFixed(2))}),De=()=>({flowOrder:j,workspaceState:h,completionRate:Ve,markStepDone:$e,setSelectedSeam:Ce,resetFlow:Le}),Ie=(o,t)=>{const r=o.__vccOpts||o;for(const[w,l]of t)r[w]=l;return r},Be={class:"app-layout"},je={class:"sidebar"},Ne={class:"sidebar-nav"},Fe={class:"nav-icon","aria-hidden":"true"},He={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},ze=["d"],qe={class:"sr-only"},Ue={class:"main-content"},Ge={class:"content-wrapper"},Ke={class:"workflow-strip"},We={class:"workflow-head"},Je=["title","aria-label"],Qe={class:"workflow-rate"},Ye={class:"workflow-actions"},Xe=["title"],Ze=["title","aria-label"],et={class:"workflow-track"},tt=["title","aria-label","onClick"],ot={class:"step-icon","aria-hidden":"true"},nt={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},at=["d"],rt={class:"sr-only"},st={key:0,class:"workflow-guard"},lt=["title","aria-label"],it={__name:"AppLayout",setup(o){var U,G,K,W;const t=we(),r=ye(),w=D(null),{flowOrder:l,workspaceState:i,completionRate:s,resetFlow:_}=De(),m=(W=(K=(G=(U=fe())==null?void 0:U.appContext)==null?void 0:G.config)==null?void 0:K.globalProperties)==null?void 0:W.$toast,c=E(()=>r.getRoutes().filter(n=>{var e,u;return((e=n.meta)==null?void 0:e.title)&&((u=n.meta)==null?void 0:u.nav)!==!1}).sort((n,e)=>{var u,k;return Number(((u=n.meta)==null?void 0:u.navOrder)||999)-Number(((k=e.meta)==null?void 0:k.navOrder)||999)})),d=E(()=>{const n=new Map(r.getRoutes().map(e=>[e.name,e]));return l.map(e=>n.get(e)).filter(Boolean)}),p=E(()=>String(t.name||"")),y=E(()=>i.selectedSeam?{seam:i.selectedSeam}:void 0),b=n=>{var e;return!!((e=i.steps)!=null&&e[n])},O=E(()=>{if(d.value.length===0)return null;const n=d.value.findIndex(e=>e.name===p.value);if(n>=0){const e=d.value[n];if(!b(e.name))return e;for(let u=n+1;u<d.value.length;u+=1)if(!b(d.value[u].name))return d.value[u]}return d.value.find(e=>!b(e.name))||d.value[d.value.length-1]}),H=n=>{const e=d.value.findIndex(u=>u.name===n);return e<=0?null:d.value.find((u,k)=>k<e&&!b(u.name))||null},x=E(()=>{const n=p.value;if(!n)return null;const e=H(n);if(!e)return null;const u=d.value.find(k=>k.name===n);return u?{blockedBy:e,current:u}:null}),z=n=>{var u,k;if(!(n!=null&&n.name))return;const e=H(n.name);e&&((u=w.value)!=null&&u.add)&&w.value.add(`建议先完成：${((k=e.meta)==null?void 0:k.title)||e.name}`,"warning",2600),r.push({name:n.name,query:y.value})},re=()=>{var n;(n=O.value)!=null&&n.name&&r.push({name:O.value.name,query:y.value})},$=n=>{var e;return String(((e=n==null?void 0:n.meta)==null?void 0:e.title)||(n==null?void 0:n.name)||"导航")},se={upload:["M12 3v10","m8 9 4 4 4-4","M5 20h14"],chart:["M4 19h16","M7 15V9","M12 15V6","M17 15v-3"],bolt:["M13 2 4 14h6l-1 8 9-12h-6l1-8"],book:["M4 5a2 2 0 0 1 2-2h13v17H6a2 2 0 0 0-2 2V5z","M6 3v17"],flask:["M10 2v5l-5 8a4 4 0 0 0 3.4 6h7.2A4 4 0 0 0 19 15l-5-8V2","M9 11h6"],grid:["M4 4h7v7H4z","M13 4h7v7h-7z","M4 13h7v7H4z","M13 13h7v7h-7z"],report:["M7 3h8l4 4v14H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z","M15 3v5h5","M9 13h6","M9 17h4"]},q=n=>{var u;const e=String(((u=n==null?void 0:n.meta)==null?void 0:u.icon)||"").trim();return se[e]||["M5 12h14","M12 5v14"]};return ve(()=>{m&&typeof m=="object"&&(m.value=w.value)}),ee(()=>{m&&typeof m=="object"&&(m.value=null)}),(n,e)=>{const u=Y("router-link"),k=Y("router-view");return v(),g("div",Be,[a("aside",je,[e[2]||(e[2]=a("div",{class:"sidebar-logo"},"MPI",-1)),a("nav",Ne,[(v(!0),g(T,null,P(c.value,f=>(v(),F(u,{key:f.path,to:f.path,class:"nav-item",title:$(f),"aria-label":$(f),"data-title":$(f),"active-class":"active"},{default:_e(()=>[a("span",Fe,[(v(),g("svg",He,[(v(!0),g(T,null,P(q(f),(C,L)=>(v(),g("path",{key:L,d:C},null,8,ze))),128))]))]),a("span",qe,R($(f)),1)]),_:2},1032,["to","title","aria-label","data-title"]))),128))])]),a("main",Ue,[a("div",Ge,[a("section",Ke,[a("div",We,[a("div",{class:"workflow-progress",title:`娴佺▼杩涘害 ${Math.round(M(s)*100)}%`,"aria-label":`娴佺▼杩涘害 ${Math.round(M(s)*100)}%`},[e[3]||(e[3]=a("span",{class:"progress-dot","aria-hidden":"true"},null,-1)),a("span",Qe,R(Math.round(M(s)*100))+"%",1)],8,Je),a("div",Ye,[M(i).selectedSeam?(v(),g("span",{key:0,class:"workflow-seam",title:`褰撳墠鐓ゅ眰 ${M(i).selectedSeam}`},R(M(i).selectedSeam),9,Xe)):B("",!0),O.value?(v(),g("button",{key:1,type:"button",class:"workflow-btn icon",title:`鍓嶅線 ${O.value.meta.title}`,"aria-label":`鍓嶅線 ${O.value.meta.title}`,onClick:re},[...e[4]||(e[4]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M5 12h14"}),a("path",{d:"m13 5 7 7-7 7"})],-1),a("span",{class:"sr-only"},"鍓嶅線鎺ㄨ崘姝ラ",-1)])],8,Ze)):B("",!0),a("button",{type:"button",class:"workflow-btn icon ghost",title:"閲嶇疆娴佺▼","aria-label":"閲嶇疆娴佺▼",onClick:e[0]||(e[0]=(...f)=>M(_)&&M(_)(...f))},[...e[5]||(e[5]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M21 12a9 9 0 1 1-2.64-6.36"}),a("path",{d:"M21 3v6h-6"})],-1),a("span",{class:"sr-only"},"閲嶇疆娴佺▼",-1)])])])]),a("div",et,[(v(!0),g(T,null,P(d.value,(f,C)=>(v(),g("button",{key:f.path,type:"button",class:te(["workflow-step",{active:f.name===p.value,done:b(f.name)}]),title:`姝ラ ${C+1} 路 ${f.meta.title}`,"aria-label":`姝ラ ${C+1} 路 ${f.meta.title}`,onClick:L=>z(f)},[a("span",ot,[(v(),g("svg",nt,[(v(!0),g(T,null,P(q(f),(L,le)=>(v(),g("path",{key:le,d:L},null,8,at))),128))]))]),a("span",rt,R(f.meta.title),1)],10,tt))),128))]),x.value?(v(),g("div",st,[e[7]||(e[7]=a("div",{class:"workflow-guard-text"},[a("span",{class:"guard-dot","aria-hidden":"true"}),a("span",{class:"workflow-guard-label"},"流程保护已启用")],-1)),a("button",{type:"button",class:"workflow-btn guard icon",title:`鍓嶅線鍓嶇疆姝ラ ${x.value.blockedBy.meta.title}`,"aria-label":`鍓嶅線鍓嶇疆姝ラ ${x.value.blockedBy.meta.title}`,onClick:e[1]||(e[1]=f=>z(x.value.blockedBy))},[...e[6]||(e[6]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M10 14 4 8l6-6"}),a("path",{d:"M20 20v-3a9 9 0 0 0-9-9H4"})],-1),a("span",{class:"sr-only"},"鍓嶅線鍓嶇疆姝ラ",-1)])],8,lt)])):B("",!0)]),X(k)])]),X(Ee,{ref_key:"toast",ref:w},null,512)])}}},ct=Ie(it,[["__scopeId","data-v-1795903d"]]),ut={__name:"App",setup(o){return(t,r)=>(v(),F(ct))}},dt="modulepreload",pt=function(o){return"/"+o},Z={},S=function(t,r,w){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),_=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));l=Promise.allSettled(r.map(m=>{if(m=pt(m),m in Z)return;Z[m]=!0;const c=m.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":dt,c||(p.as="script"),p.crossOrigin="",p.href=m,_&&p.setAttribute("nonce",_),document.head.appendChild(p),c)return new Promise((y,b)=>{p.addEventListener("load",y),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(s){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=s,window.dispatchEvent(_),!_.defaultPrevented)throw s}return l.then(s=>{for(const _ of s||[])_.status==="rejected"&&i(_.reason);return t().catch(i)})},mt=[{path:"/",redirect:"/algorithm-validation"},{path:"/data",name:"DataImport",component:()=>S(()=>import("./DataImport-CRop_rXS.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{title:"数据导入",icon:"upload",navOrder:10,flowOrder:10}},{path:"/interpolation",name:"Interpolation",component:()=>S(()=>import("./Interpolation-CQ2j6dPq.js"),__vite__mapDeps([6,1,4,2,3,7])),meta:{title:"插值分析",icon:"chart",navOrder:20,flowOrder:20}},{path:"/pressure",name:"PressureIndex",component:()=>S(()=>import("./PressureIndex-BNvoQMQA.js"),__vite__mapDeps([8,1,4,9,10,2,3,11])),meta:{title:"矿压指标",icon:"bar",nav:!1,legacy:!0}},{path:"/mpi-heatmap",name:"MpiHeatmap",component:()=>S(()=>import("./MpiHeatmap-BIhelIxM.js"),__vite__mapDeps([12,1,2,3,4,13])),meta:{title:"MPI 热力图（旧版）",icon:"legacy",nav:!1,legacy:!0}},{path:"/mpi-heatmap-pro",name:"MpiHeatmapPro",component:()=>S(()=>import("./MpiHeatmapPro-BpaT3na1.js"),__vite__mapDeps([14,1,2,3,4,15])),meta:{title:"MPI 数值模拟",icon:"bolt",navOrder:40}},{path:"/mpi-algorithm",name:"MpiAlgorithm",component:()=>S(()=>import("./MpiAlgorithm-Dkm3u7MW.js"),__vite__mapDeps([16,1,4,17])),meta:{title:"MPI 算法原理",icon:"box",nav:!1,legacy:!0}},{path:"/academic-algorithm",name:"AcademicAlgorithm",component:()=>S(()=>import("./AcademicAlgorithm-CYi0mXJi.js"),__vite__mapDeps([18,1,3,19,20,4,21])),meta:{title:"新算法原理",icon:"book",navOrder:30,flowOrder:30}},{path:"/algorithm-validation",name:"AlgorithmValidation",component:()=>S(()=>import("./AlgorithmValidation-CZjnXPvu.js"),__vite__mapDeps([22,1,4,2,3,19,20,23])),meta:{title:"新算法实证",icon:"flask",navOrder:50,flowOrder:40}},{path:"/steps",name:"Steps",component:()=>S(()=>import("./Steps-CMO2fnf5.js"),__vite__mapDeps([24,1,9,10,2,3,4,25])),meta:{title:"来压步距",icon:"grid",navOrder:60}},{path:"/report",name:"Report",component:()=>S(()=>import("./Report-B0fB-mm1.js"),__vite__mapDeps([26,1,4,2,3,27])),meta:{title:"结果报告",icon:"report",navOrder:70,flowOrder:50}}],ft=be({history:ke(),routes:mt}),ae=Symbol("toast");function vt(o){const t=D(null);return o.provide(ae,t),t}function yt(){const o=he(ae,D(null)),t=(s,_="info",m=3e3)=>{var c;(c=o.value)==null||c.add(s,_,m)};return{add:t,success:s=>t(s,"success"),error:s=>t(s,"error"),warning:s=>t(s,"warning"),info:s=>t(s,"info")}}const I=ge(ut);I.use(ft);const _t=vt(I);I.config.globalProperties.$toast=_t;I.mount("#app");export{Ie as _,yt as a,S as b,De as u};
