# 阶段 E 前端联调回归清单（核心页面）

## 1. 范围

- `frontend/src/views/Interpolation.vue`
- `frontend/src/views/MpiHeatmapPro.vue`
- `frontend/src/views/AlgorithmValidation.vue`
- `frontend/src/views/Steps.vue`
- `frontend/src/views/Report.vue`
- `frontend/src/views/ResearchWorkbench.vue`
- `frontend/src/views/GeoMpiStudio.vue`

## 2. 环境前置

1. 后端服务可访问（默认 `http://127.0.0.1:8001`）。
2. 前端服务可访问并已加载最新代码。
3. 数据目录中存在可用煤层和钻孔数据。
4. 若要验证 Geomodel 产物下载，需准备一个已完成任务的 `geomodel_job_id`。

## 3. 回归项

### 3.1 Interpolation 页面

1. 进入页面并选择煤层。
2. 点击“发起建模”，确认作业状态从 `pending/running` 到 `completed`。
3. 校验质量摘要卡显示连续性、尖灭比例、层厚变异。
4. 点击产物芯片下载文件，校验文件可正常保存。
5. 从 `MpiHeatmapPro` 带 `geomodel_job_id` 跳转时，确认任务状态可自动读取。

### 3.2 MpiHeatmapPro 页面

1. 开启 geology-aware，点击“计算全域对照”。
2. 校验基线均值、地质增强均值、回退标记显示正确。
3. 点击“打开建模联动页”，确认跳转到 Interpolation 且保留 `seam`、`geomodel_job_id`。

### 3.3 AlgorithmValidation 页面

1. 打开“地质对照”面板，输入可选 job id 后执行对照。
2. 校验 `baseline / geo-aware / delta / fallback` 展示完整。
3. 切换煤层后校验面板状态重置正确。

### 3.4 Steps 页面

1. 开启“地质约束”，输入可选 job id。
2. 校验 `MPI` 网格和建议文案会响应地质增强结果。
3. 校验“分区风险说明”三区（高风险/关注/低风险）统计总占比约等于 100%。

### 3.5 Report 页面

1. 输入 `geomodel_job_id` 后点击“读取质量”。
2. 校验地质模型质量章节展示连续性、尖灭、CV、异常标记。
3. 校验任务不存在时，页面显示明确错误且不崩溃。

### 3.6 ResearchWorkbench 页面

1. 单实验 `model_type` 下拉可见：
   - `geomodel_aware`
   - `geomodel_ablation`
   - `pinchout_sensitive`
   - `rk_enhanced`
   - `kriging_baseline`
2. 批量模板可见：
   - `geomodel_ablation`
   - `pinchout_effect`
   - `rk_vs_kriging`
3. 证据包导出后校验包含：
   - `manifests/dataset_quality_report.json`
   - `figures/comparison_point_chart.svg`
   - `figures/model_summary_bar.svg`

### 3.7 GeoMpiStudio 页面

1. 打开 `/geo-mpi-studio`，确认 seam 下拉可用且页面无报错。
2. 点击“运行空间分析”，确认 MPI/RSI/BRI/ASI 四图矩阵可渲染。
3. 切换 `baseline / geo-aware / delta`，确认矩阵可稳定切换且不白屏。
4. 在 MPI 图点击任意格点，确认解释面板显示选中坐标与四指标值。
5. 点击后确认 3D 联动卡显示 `Anchor`、`X/Y`、`Z-depth` 同步更新。

## 4. 通过标准

1. 核心页面无阻断错误（白屏、崩溃、关键按钮不可用）。
2. 地质增强链路（建模 -> MPI -> 报告 -> 科研证据包）端到端可走通。
3. 导出文件结构完整，且核心 JSON/SVG 可读。

## 5. 失败分级

1. P0：无法完成主流程（建模任务、MPI计算、报告导出）。
2. P1：结果错误或关键字段缺失（如均值、回退标记、质量摘要）。
3. P2：样式/提示问题，不影响核心功能。

