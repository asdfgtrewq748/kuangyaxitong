# 阶段 C 实施方案：前端接入与可视化增强

## 1. 阶段目标

1. 让 Geomodel 结果在核心页面可见、可用、可解释。  
2. 打通 2D 热力图与 3D 分层模型联动交互。  
3. 在不破坏现有流程的前提下引入专家级分析入口。

---

## 2. 页面改造范围

1. `frontend/src/views/Interpolation.vue`  
2. `frontend/src/views/MpiHeatmapPro.vue`  
3. `frontend/src/views/AlgorithmValidation.vue`  
4. `frontend/src/views/Steps.vue`  
5. `frontend/src/views/Report.vue`

---

## 3. 关键改造点

### 3.1 插值分析页
- 新增“发起建模作业”入口
- 新增“质量诊断摘要卡”
- 新增插值方法对比图（IDW/Kriging/RK/Hybrid）

### 3.2 MPI 数值模拟页
- 增加 3D 模型加载区（图层开关、透明度、剖切）
- 与主热力图联动（点选同步、剖面同步）

### 3.3 新算法实证页
- 增加 geology-aware 开关
- 增加 baseline vs geology-aware 对照图组

### 3.4 来压步距页
- 增加地质约束驱动的步距修正建议
- 增加分区风险说明

### 3.5 结果报告页
- 新增“地质模型质量章节”
- 新增可视化摘要（连续性、尖灭、异常斑块）

---

## 4. 组件与数据流建议

1. 新增 API 适配  
- `frontend/src/api.js` 增加 `geomodel` 调用封装

2. 新增组合式状态管理  
- `useGeomodelJob`：作业状态轮询与产物缓存  
- `useGeomodelArtifacts`：产物元数据与下载管理  

3. 可视化组件建议  
- `GeomodelQualityCards.vue`  
- `GeomodelLayerViewer.vue`（3D 视图容器）  
- `GeomodelComparisonChart.vue`

---

## 5. UI/UX 原则

1. 默认轻量、专家可展开  
- 普通用户看到“结论视图”
- 专家模式展开“模型细节/诊断细节”

2. 交互一致性  
- 颜色语义、图例语义、风险等级语义统一

3. 反馈及时  
- 作业状态与进度可见
- 异常与回退路径清晰

---

## 6. 验收标准

1. 至少 3 个页面可直接展示 Geomodel 结果。  
2. 2D/3D 联动交互稳定，无明显卡顿。  
3. geology-aware 对照结果可在实证页完整展示。  
4. 关键页面在常用分辨率下布局正常。

---

## 7. 风险与应对

1. 渲染性能不足  
- 方案：分辨率分级 + 惰性加载 + 渐进渲染。

2. 交互复杂度过高  
- 方案：默认收敛信息密度，专家区折叠展开。

3. 数据联动错位  
- 方案：统一坐标系转换与边界校验层。

---

## 8. 交付物

1. 页面改造 PR（包含 API 接入、组件、样式）。  
2. 交互说明文档与演示截图。  
3. 前端回归测试清单。  
4. 阶段 C 验收记录。

